(self.modernJsonp=self.modernJsonp||[]).push([["83578"],{629769(e,t,i){var a,n,s,l;i.r(t),i.d(t,{default:()=>o});let r={fragment:{argumentDefinitions:a=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:n=[{kind:"Variable",name:"pin",variableName:"pinId"}],concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheckQuery_pin"}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"AlreadyPinnedCheckQuery",selections:[{alias:null,args:n,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},l],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c881f56582aebd78b7f3f625abfe959aa6d034bcd97439d6b4224d46c1c5f8cc",metadata:{},name:"AlreadyPinnedCheckQuery",operationKind:"query",text:null}};r.hash="0b5f077c08e31de36594b6918e128d12";let o=r},737817(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheckQuery_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"layout",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};a.hash="6bb1a587f71f85424aa51845831862d4";let n=a},891023(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"AlreadyPinnedCheck_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="3caf9424c2af74d2b11a6ea682b57d1b";let n=a},827842(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_pin",selections:[{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null}],type:"Pin",abstractKey:null};a.hash="c26037c886bf0e64c6b73d7daa56a9b4";let n=a},581943(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardCreateSuccess_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="f12c153dafdb70970e02775ea0db67c2";let n=a},376901(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardPicker_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};a.hash="76215b7b40cb02e76b77e58c8765d0d1";let n=a},399342(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BoardsPane_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"BoardPicker_pin"}],type:"Pin",abstractKey:null};a.hash="56f620fbd63abf8f7cb32f9a378198f8";let n=a},183594(e,t,i){var a,n;i.r(t),i.d(t,{default:()=>l});let s=(n=[a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CallToAction_advisoryAction",selections:[{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],type:"AdvisoryAction",abstractKey:null});s.hash="6ddea2ecd3dff2e1001c1e4d037cc858";let l=s},405940(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DefaultNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:null,kind:"FragmentSpread",name:"CallToAction_advisoryAction"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],type:"AdvisoryNotice",abstractKey:null};a.hash="5879c4710b107f258f42156bf3e47e37";let n=a},456359(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"HyperlinkFormatText_textTag",selections:[{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"tagType",storageKey:null}],type:"TextTag",abstractKey:null};a.hash="4970946a36017d9ad0c751fd70cc512c";let n=a},263986(e,t,i){var a,n,s;i.r(t),i.d(t,{default:()=>r});let l=(n=[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],s=[a],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LegoNotice_advisoryNotice",selections:[{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:[a,{alias:null,args:null,concreteType:"TextTag",kind:"LinkedField",name:"textTags",plural:!0,selections:[{args:null,kind:"FragmentSpread",name:"HyperlinkFormatText_textTag"}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryFooter",kind:"LinkedField",name:"footer",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:n,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"AdvisoryNotice",abstractKey:null});l.hash="fa2efeb6b4c660680d9f3a0e156c8007";let r=l},233746(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_pin",selections:[{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"AlreadyPinnedCheck_pin"},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null}]}],type:"Pin",abstractKey:null};a.hash="ee852d86e422f64afda32d5c5ed05eeb";let n=a},978663(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinPane_shuffle_asset",selections:[{alias:null,args:[{kind:"Literal",name:"spec",value:"originals"}],concreteType:"ImageDetails",kind:"LinkedField",name:"cutoutImages",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'cutoutImages(spec:"originals")'}],type:"ShuffleAsset",abstractKey:null};a.hash="1a4583782792fbfe92015cb2dbe50f70";let n=a},414227(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{args:null,kind:"FragmentSpread",name:"PinPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardsPane_pin"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_pin"}],type:"Pin",abstractKey:null};a.hash="9382108243b7924dca621b4886b38390";let n=a},433282(e,t,i){i.r(t),i.d(t,{default:()=>n});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinToBoard_shuffle_asset",selections:[{args:null,kind:"FragmentSpread",name:"PinPane_shuffle_asset"},{args:null,kind:"FragmentSpread",name:"BoardCreateSuccess_shuffle_asset"}],type:"ShuffleAsset",abstractKey:null};a.hash="4435ca5e135b834ea8a6425f68eb2f7a";let n=a},150859(e,t,i){var a,n,s;i.r(t),i.d(t,{default:()=>r});let l={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SensitiveNotice_sensitivity",selections:[{alias:null,args:null,kind:"ScalarField",name:"advisory",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"severity",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryNotice",kind:"LinkedField",name:"notices",plural:!0,selections:[{alias:"noticeId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:"content_image_url",args:null,kind:"ScalarField",name:"contentImageUrl",storageKey:null},{alias:"suggested_resource",args:null,kind:"ScalarField",name:"suggestedResource",storageKey:null},{alias:"image_type",args:null,kind:"ScalarField",name:"imageType",storageKey:null},s={alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"description",plural:!1,selections:n=[a={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"AdvisoryAction",kind:"LinkedField",name:"actions",plural:!0,selections:[{alias:"actionId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,concreteType:"AdvisoryButton",kind:"LinkedField",name:"button",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},a,{alias:"contact_type",args:null,kind:"ScalarField",name:"contactType",storageKey:null}],storageKey:null},s,{alias:null,args:null,concreteType:"AdvisoryRichText",kind:"LinkedField",name:"title",plural:!1,selections:n,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null}],type:"Sensitivity",abstractKey:null};l.hash="6e21ec048bb4ac7d621865a42cf02a6c";let r=l},524023(e,t,i){i.d(t,{A:()=>o});var a=i(859471);let n=null,s=!1,l=0,r=()=>{n&&clearTimeout(n),s=!0,n=setTimeout(()=>{s=!1},100)},o=()=>{let[e,t]=(0,a.useState)(!1),i=(0,a.useRef)(null);(0,a.useEffect)(()=>(0===l&&window.addEventListener("scroll",r),l+=1,()=>{i.current&&clearTimeout(i.current),(l-=1)||window.removeEventListener("scroll",r)}),[]);let n=e=>{i.current&&clearTimeout(i.current),i.current=e&&s?setTimeout(()=>n(!0),100):setTimeout(()=>{t(e)},32)};return{isHovering:e,hoverHandlers:(0,a.useRef)({onMouseOver:()=>n(!0),onMouseLeave:()=>n(!1)}).current}}},259490(e,t,i){i.d(t,{A:()=>w,d:()=>S});var a,n=i(61163),s=i(859471),l=i(974934);i(669897);var r=i(150880),o=i(743372),d=i(535273),c=i(538329),h=i(601185),u=i(844255),p=i(971289),g=i(168079),m=i(522232),_=i(562615);function f({action:e,viewType:t,auxData:i={}}){(0,s.useEffect)(()=>{(0,n.A)("ButtonLinkAction","/app/www/ContentSensitivity/ButtonLinkAction.tsx")},[]);let a=(0,o.A)(),l=(0,p.qJ)(),{button:d}=e,c=d?.text||"",h=d?.link||"";return c&&h?(0,_.jsx)(r.vx,{href:h,iconEnd:"arrow-up-right",onClick:()=>{(0,m.rt)({placement:t,logContextEvent:a,auxData:{url:h,...i},isDesktop:l,viewType:t})},target:l?"blank":"self",text:c}):null}let y={0:"phone",1:"speech-ellipsis",2:"speech",3:"globe",4:"whatsapp",5:"magnifying-glass"};function x({button:e,contactType:t,viewType:i,auxData:a={},viewParameter:l}){(0,s.useEffect)(()=>{(0,n.A)("CustomActionLink","/app/www/ContentSensitivity/CustomActionLink.tsx")},[]);let d=(0,o.A)(),c=(0,p.qJ)(),h=[0,1].includes(t),u=e?.link||"",g=c&&h?`${e?.text} ${function(e){let[,t]=e.split(":");return t}(u)}`:e?.text,f=y[t]||"arrow-up-right";return g&&u?(0,_.jsx)(r.vx,{href:u,iconStart:f,onClick:()=>{(0,m.rt)({viewParameter:l,logContextEvent:d,viewType:i,auxData:{url:u,...a},isDesktop:c,placement:i})},target:"blank",text:g}):null}var b=i(843529),v=i(81920),A=i(260787);let j=(void 0!==a||(a=i(150859)).hash&&"6e21ec048bb4ac7d621865a42cf02a6c"!==a.hash&&console.error("The definition of 'SensitiveNotice_sensitivity' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function S({query:e,sensitivityKey:t,viewParameter:i}){(0,s.useEffect)(()=>{(0,n.A)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx")},[]);let a=(0,d.A)(j,t),l=a?.notices;return l?.map(t=>(0,_.jsx)(w,{notice:t,query:e,sensitivity:a,viewParameter:i,viewType:2},t.noticeId))}function w({boardId:e,boardSectionId:t,boardName:i,notice:a,viewType:d,viewParameter:y,query:j,sensitivity:S,objectType:w}){var P,k;let z;(0,s.useEffect)(()=>{(0,n.A)("SensitiveNotice","/app/www/ContentSensitivity/SensitiveNotice.tsx")},[]);let C=(0,p.qJ)(),T=(0,c.A)(),I=(0,o.A)(),{title:B,footer:R,description:E,image_type:K,content_image_url:F}=a||{},L=a?.actions??[],D=a?.suggested_resource,N=(0,u._8)(),{checkExperiment:M}=(0,h.A)(),O=M("web_ps_search_advisories_wave_two",{dangerouslySkipActivation:!0}).anyEnabled,{imageSRC:H,imageALT:J}=(P=null==K?A.j.NONE:K,k=F||"",z={[A.j.HIDDEN]:T._('Hidden Illustration.', 'sensitiveNotice.hiddenIllustration', 'Sensitive illustration for hidden content'),[A.j.HOPE]:T._('An illustration of a landscape, clouds, and the sun seen through a window with both shutters open.', 'sensitiveNotice.hopeIllustration', 'Sensitive illustration for hope content'),[A.j.LOVE]:T._('An illustration of heart-shaped flowers arranged in a vase', 'sensitiveNotice.loveIllustration', 'Sensitive illustration for love content')},O&&k?{imageSRC:k,imageALT:k?T._('Illustration.', 'sensitiveNotice.customIllustration', 'Sensitive illustration for custom content'):""}:P===A.j.CUSTOM?{imageSRC:k,imageALT:T._('Illustration.', 'sensitiveNotice.customIllustration', 'Sensitive illustration for custom content')}:P===A.j.NONE?{imageSRC:"",imageALT:""}:{imageSRC:m.Zm[P],imageALT:z[P]}),U={advisory_level:S?.advisory,entered_query:j,severity_level:S?.severity,stage:N.stage,advisory_type:S?.advisory_type,resource_country:S?.resource_country,board_name:i,board_id:e,board_section_id:t};return(0,g.A)(()=>{d&&(I({aux_data:U,event_type:120,component:13367,view_parameter:y,view_type:d}),(0,v.U9)("webapp.advisories.view",1,{sampleRate:1,tags:{advisory_level:U.advisory_level,advisory_type:U.advisory_type,app:C?"DESKTOP_WEB":"MOBILE_WEB",resource_country:U.resource_country,placement:d,object_type:w}})),e&&5===d&&I({aux_data:{board_id:e,board_section_id:t??0},component:178,event_type:15549,view_parameter:y,view_type:d})}),(0,_.jsx)(r.az,{"data-test-id":"search-advisory",children:(0,_.jsxs)(r.az,{"data-test-id":"fresh-search-advisory",margin:"auto",maxWidth:"800px",padding:6,rounding:200,children:[H&&(0,_.jsx)(r.so,{justifyContent:C?"center":"start",children:(0,_.jsx)(r.az,{height:120,marginBottom:4,width:120,children:(0,_.jsx)(r._V,{alt:J,fit:"contain",naturalHeight:1,naturalWidth:1,src:H})})}),!!B&&(0,_.jsx)(r.az,{display:"flex",marginBottom:2,children:(0,_.jsx)(r._Y,{size:"400",children:B})}),!!E&&(0,_.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-line"}},marginBottom:4,children:(0,_.jsx)(r.KJ,{size:"200",children:(0,b.A)(E?.text||"",E?.text_tags||[],I,U,C)})}),D&&(0,_.jsxs)(r.az,{marginBottom:4,children:[(0,_.jsx)(r.KJ,{size:"200",weight:"bold",children:T._('Suggested resource', 'sensitiveNotice.suggestedResource', 'This string is a subtitle. It appears in an alert message to users who may benefit from receiving mental health and crisis resources. Underneath the subtitle, we\u2019ll show a single resource that seems the most helpful for  the user. We use \u201Csuggested\u201D rather than \u201Crecommended\u201D to soften the framing, as this resource isn\u2019t personalized or an endorsement from Pinterest. The tone of this string is helpful, but not strongly encouraging')}),(0,_.jsx)(r.az,{marginTop:2,children:(0,_.jsx)(r.KJ,{size:"200",children:D})})]}),(0,_.jsx)(r.so,{direction:"column",gap:2,children:L.map(e=>e?.button?.contact_type?(0,_.jsx)(x,{auxData:U,button:e.button,contactType:e.button.contact_type,viewParameter:y,viewType:d},e.id||e.actionId):(0,_.jsx)(f,{action:e,auxData:U,viewParameter:y,viewType:d},e.id))}),!!R&&(0,_.jsx)(r.az,{marginTop:4,children:(0,_.jsx)(r.KJ,{color:"subtle",size:"100",children:(0,_.jsx)(l.Ay,{options:{overrides:{b:{component:({children:e})=>(0,_.jsx)(r.N_,{display:"inline",href:R.link??"",onClick:()=>{(0,m.rt)({logContextEvent:I,auxData:{...U,url:R.link},isDesktop:C,placement:d,objectType:w,viewType:d,viewParameter:y})},target:"blank",children:(0,_.jsx)(r.KJ,{color:"subtle",inline:!0,size:"100",weight:"bold",children:e})},R.link)}}},children:R.text})})})]})})}},522232(e,t,i){i.d(t,{Zm:()=>l,bh:()=>o,dB:()=>r,k9:()=>s,rt:()=>d});var a=i(81920),n=i(260787);let s={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2},l={[n.j.HIDDEN]:"https://i.pinimg.com/originals/0d/fc/e7/0dfce74a82e89659495f1c9257fed188.png",[n.j.HOPE]:"https://i.pinimg.com/originals/46/d7/70/46d7705570b3c23562a70f39817b7b19.png",[n.j.LOVE]:"https://i.pinimg.com/originals/60/7e/d2/607ed2380d9fa28047f211dc6a7e8576.png"};function r(e){return null!=e&&!!e.notices&&e.notices.length>0}function o(e){return!!e&&e.severity===s.ABUSIVE}function d({auxData:e,isDesktop:t,logContextEvent:i,objectType:n,placement:s,viewType:l,viewParameter:r}){i({aux_data:e,component:13367,element:11180,event_type:t?101:102,view_parameter:r||43,view_type:l||2}),(0,a.U9)("webapp.advisories.action",1,{sampleRate:1,tags:{advisory_level:e.advisory_level,advisory_type:e.advisory_type,app:t?"DESKTOP_WEB":"MOBILE_WEB",url:e.url,resource_country:e.resource_country,object_type:n,placement:s}})}},843529(e,t,i){i.d(t,{A:()=>l});var a=i(150880),n=i(522232),s=i(562615);function l(e,t,i,r={},o){let d=[],c=0;for(let l=0;l<t.length;l+=1){let h=t[l];if(5===h.tag_type&&h.link){let{offset:t,length:u,link:p}=h;if(null!=t&&null!=u&&null!=p){let h=e.substring(t,t+u),g=(0,s.jsx)(a.N_,{display:"inline",href:p,onClick:({dangerouslyDisableOnNavigation:e})=>{e(),(0,n.rt)({auxData:{...r,url:p},isDesktop:o,logContextEvent:i})},target:"blank",underline:"hover",children:(0,s.jsx)(a.KJ,{inline:!0,weight:"bold",children:h})},`link-${l}-${h}`);d.push((0,s.jsx)(a.KJ,{inline:!0,children:e.substring(c,t)},`text-${l}-${h}`)),d.push(g),c=t+u}}}return(c>0&&d.push((0,s.jsx)(a.KJ,{inline:!0,children:e.substring(c)},e.substring(c))),0===d.length)?[(0,s.jsx)("span",{children:e},e)]:d}},592023(e,t,i){i.d(t,{A:()=>K});var a,n,s,l,r=i(61163),o=i(859471),d=i(586733),c=i(601185),h=i(844255),u=i(971289),p=i(168079),g=i(259490);i(825193);var m=i(150880),_=i(535273),f=i(743372),y=i(386379),x=i(522232),b=i(236503),v=i(562615);let A=(void 0!==a||(a=i(183594)).hash&&"6ddea2ecd3dff2e1001c1e4d037cc858"!==a.hash&&console.error("The definition of 'CallToAction_advisoryAction' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function j({auxData:e,actionKey:t,alignCenter:i}){(0,o.useEffect)(()=>{(0,r.A)("CallToAction","/app/www/ContentSensitivityOnDesktop/CallToAction.tsx")},[]);let a=(0,_.A)(A,t),n=(0,f.A)(),s=(0,u.qJ)(),{title:l,description:d,button:c}=a,h=c?.text,p=l?.text,g=d?.text,j=c?.link??"",S=j.replace(/^(?:https?:\/\/)?(?:www\.)?/i,"").replace("/",""),w=h&&j.startsWith("http"),P=(0,y.A)({url:j}),k=w&&P?"nofollow":"none";return e?.advisory_type===b.IQ?(0,v.jsx)(o.Fragment,{children:(0,v.jsxs)(m.so,{direction:"column",gap:3,justifyContent:"start",children:[!!p&&(0,v.jsx)(m.KJ,{align:"start",weight:"bold",children:p}),!!g&&(0,v.jsx)(m.KJ,{align:"start",children:g}),(0,v.jsx)(m.vx,{color:"tertiary",href:j,onClick:()=>{(0,x.rt)({auxData:{...e,url:j},isDesktop:s,logContextEvent:n})},rel:k,text:h||"Visit"})]})}):w?(0,v.jsxs)(o.Fragment,{children:[(0,v.jsx)(m.az,{marginBottom:1,children:(0,v.jsx)(m.KJ,{align:i?"center":"start",weight:"bold",children:""!==h?h:"Visit"})}),(0,v.jsx)(m.az,{marginBottom:1,children:(0,v.jsx)(m.N_,{href:j,onClick:()=>{(0,x.rt)({logContextEvent:n,auxData:{...e,url:j},isDesktop:s})},rel:k,children:(0,v.jsx)(m.KJ,{align:i?"center":"start",lineClamp:1,underline:!0,weight:"normal",children:S})})})]}):(0,v.jsxs)(o.Fragment,{children:[!!p&&(0,v.jsx)(m.az,{marginBottom:1,children:(0,v.jsx)(m.KJ,{align:i?"center":"start",weight:"bold",children:p})}),!!g&&(0,v.jsx)(m.az,{marginBottom:1,children:(0,v.jsx)(m.KJ,{align:i?"center":"start",children:g})})]})}let S=(void 0!==n||(n=i(456359)).hash&&"4970946a36017d9ad0c751fd70cc512c"!==n.hash&&console.error("The definition of 'HyperlinkFormatText_textTag' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function w({text:e,textTags:t,auxData:i}){let a=(0,f.A)(),n=(0,u.qJ)(),s=[],l=0;for(let r=0;r<t.length;r+=1){let o=t[r];if(5===o.tagType&&o.link){let{offset:t,length:d,link:c}=o;if(null!=t&&null!=d&&null!=c){let o=e.substring(t,t+d),h=(0,v.jsx)(m.KJ,{inline:!0,weight:"bold",children:(0,v.jsx)(m.N_,{display:"inlineBlock",href:c,onClick:()=>{(0,x.rt)({logContextEvent:a,auxData:{...i,url:c},isDesktop:n})},target:"blank",underline:"hover",children:o})},`link-${r}-${t}`);s.push((0,v.jsx)("span",{children:e.substring(l,t)},`text-${r}-${l}`)),s.push(h),l=t+d}}}return(l>0&&s.push((0,v.jsx)("span",{children:e.substring(l)},`text-end-${l}`)),0===s.length)?[(0,v.jsx)("span",{children:e},"text-full")]:s}function P({auxData:e,textTagKey:t,text:i}){(0,o.useEffect)(()=>{(0,r.A)("HyperlinkFormatText","/app/www/ContentSensitivityOnDesktop/HyperlinkFormatText.tsx")},[]);let a=(0,_.A)(S,t);return(0,v.jsx)(w,{auxData:e,text:i,textTags:a})}let k=[4,14],z={backgroundColor:"#E1F8F7",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},C={boxShadow:"0 4px 16px rgba(0, 0, 0, 0.04)"},T=(void 0!==s||(s=i(405940)).hash&&"5879c4710b107f258f42156bf3e47e37"!==s.hash&&console.error("The definition of 'DefaultNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function I({auxData:e,advisory:t,inModal:i,noticeKey:a}){(0,o.useEffect)(()=>{(0,r.A)("DefaultNotice","/app/www/ContentSensitivityOnDesktop/DefaultNotice.tsx")},[]);let{title:n,description:s,actions:l}=(0,_.A)(T,a),d=!!l?.length&&(e?.advisory_type===b.IQ||!!t&&k.includes(t)),c=l?.length===1,h=s&&s.text||"";return(0,v.jsxs)(m.az,{dangerouslySetInlineStyle:{__style:i?C:z},padding:6,rounding:200,children:[!!n&&!i&&(0,v.jsx)(m.az,{display:"flex",marginBottom:2,children:(0,v.jsx)(m._Y,{size:"600",children:n})}),!!h&&s?.textTags!=null&&(0,v.jsx)(m.az,{"data-test-id":"search-advisory",marginBottom:4,children:(0,v.jsx)("span",{style:{whiteSpace:"pre-wrap"},children:(0,v.jsx)(m.KJ,{align:i?"center":"start",overflow:"normal",children:(0,v.jsx)(P,{auxData:e,text:h,textTagKey:s.textTags})})})}),d&&(0,v.jsx)(m.az,{direction:i?"column":"row",display:"flex",marginEnd:-2,marginStart:-2,wrap:!0,children:l?.map(t=>(0,v.jsx)(m.az,{column:i||c?12:6,paddingX:2,paddingY:1,children:(0,v.jsx)(j,{actionKey:t,alignCenter:i||c,auxData:e})},t.actionId))})]})}let B=(void 0!==l||(l=i(263986)).hash&&"fa2efeb6b4c660680d9f3a0e156c8007"!==l.hash&&console.error("The definition of 'LegoNotice_advisoryNotice' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l);function R({auxData:e,noticeKey:t}){(0,o.useEffect)(()=>{(0,r.A)("LegoNotice","/app/www/ContentSensitivityOnDesktop/LegoNotice.tsx")},[]);let i=(0,_.A)(B,t),a=(0,f.A)(),n=(0,u.qJ)(),s={color:"#004b91",display:"block",fontSize:"28px",WebkitFontSmoothing:"antialiased"};return(0,v.jsxs)(m.az,{alignItems:"center",direction:"column",display:"flex",marginBottom:3,width:"100%",children:[(0,v.jsx)(m.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"#86d1ce"}},display:"flex",justifyContent:"center",rounding:800,width:656,children:(0,v.jsxs)(m.az,{"data-test-id":"search-advisory",height:"100%",padding:10,width:"100%",children:[(0,v.jsx)("span",{style:s,children:i.description?.textTags&&(0,v.jsx)(P,{text:i.description?.text||"",textTagKey:i.description.textTags})}),(0,v.jsx)(m.az,{marginTop:6,children:(i.actions??[]).map(t=>{let i=t.button?.link;return i&&i.startsWith("tel")?(0,v.jsxs)(m.az,{children:[(0,v.jsx)("span",{style:{fontWeight:"600",...s},children:t.title?.text}),(0,v.jsx)("span",{style:s,children:t.description?.text})]},t.actionId):(0,v.jsx)(m.N_,{href:i||"",onClick:()=>{(0,x.rt)({logContextEvent:a,auxData:{...e,url:i||"",isLegoNotice:!0},isDesktop:n})},children:(0,v.jsx)(m.az,{display:"inlineBlock",children:(0,v.jsx)(m.az,{alignItems:"center",color:"info",display:"flex",height:44,justifyContent:"center",paddingX:12,rounding:"pill",children:(0,v.jsx)(m.KJ,{color:"inverse",weight:"bold",children:t.button?.text||""})})})},t.actionId)})})]})}),!!i.footer&&(0,v.jsx)(m.az,{paddingY:2,width:540,children:(0,v.jsx)(m.N_,{display:"inlineBlock",href:i.footer.link??"",onClick:()=>{(0,x.rt)({logContextEvent:a,auxData:{...e,url:i.footer?.link??"",isLegoNotice:!0},isDesktop:n})},target:"blank",underline:"hover",children:(0,v.jsx)(m.KJ,{align:"center",color:"subtle",size:"100",children:(0,v.jsx)("div",{dangerouslySetInnerHTML:{__html:i.footer.text??""}})})},i.footer.link)})]})}var E=i(81920);function K({boardId:e,isOwnBoard:t,boardName:i,boardSectionId:a,notices:n,query:s,sensitivity:l,viewParameter:m,viewType:_,inModal:f}){(0,o.useEffect)(()=>{(0,r.A)("SensitiveContentNotice","/app/www/ContentSensitivityOnDesktop/SensitiveContentNotice.tsx")},[]),function({advisoryDetails:e,boardId:t,boardName:i,boardSectionId:a,query:n,sensitivity:s,viewParameter:l,viewType:r}){let{logContextEvent:o}=(0,d.o)(),c=(0,u.qJ)();(0,p.A)(()=>{r&&(o({aux_data:{entered_query:n,advisory_details:e,advisory_level:s?.advisory,severity_level:s?.severity,advisory_type:s?.advisory_type,resource_country:s?.resource_country},component:13367,event_type:120,view_parameter:l,view_type:r}),(0,E.U9)("webapp.advisories.view",1,{sampleRate:1,tags:{advisory_level:s?.advisory,advisory_type:s?.advisory_type,app:c?"DESKTOP_WEB":"MOBILE_WEB",resource_country:s?.resource_country,placement:5===r?"board":"search"}})),t&&5===r&&o({aux_data:{board_name:i,board_id:t,board_section_id:a??0},component:178,event_type:15549,view_parameter:l,view_type:r})})}({advisoryDetails:l?.advisory_details,boardId:e,boardSectionId:a,query:s,sensitivity:{advisory:l?.advisory,severity:l?.severity},viewParameter:m,viewType:_});let{checkExperiment:y}=(0,c.A)(),x=(0,h._8)(),b={advisory_level:l?.advisory||null,severity_level:l?.severity||null,advisory_type:l?.advisory_type||"",stage:x.stage,resource_country:l?.resource_country||"",entered_query:s||""};if(y("ps_board_advisories_ui_refresh").anyEnabled){let s=t?4173:4174;return(0,v.jsx)(o.Fragment,{children:n?.map(t=>(0,v.jsx)(g.A,{boardId:e,boardName:i,boardSectionId:a,notice:t,objectType:a?164:5,sensitivity:l,viewParameter:a?s:m,viewType:a?164:5},t.id))})}return(0,v.jsx)(o.Fragment,{children:n?.map(e=>2===e.style?(0,v.jsx)(R,{auxData:b,noticeKey:{type:"Legacy",data:e}},e.id):(0,v.jsx)(I,{advisory:l?.advisory,inModal:f,noticeKey:{type:"Legacy",data:e}},e.id))})}},236503(e,t,i){i.d(t,{IQ:()=>l,bh:()=>s,im:()=>a,k9:()=>n});let a={CONDITIONAL:0,EMOTIONAL_DISDRESS_OR_SUICIDE:4},n={ABUSIVE:0,SENSITIVE:1,BRAND_UNSAFE:2};function s(e){return!!e&&e.severity===n.ABUSIVE}let l="THIRD_PARTY_TL"},225886(e,t,i){i.d(t,{A:()=>h});var a=i(61163),n=i(859471),s=i(150880),l=i(538329),r=i(985761),o=i(562615);function d(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class c extends n.Component{constructor(...e){super(...e),d(this,"setInputRef",e=>{e&&(this._input=e)}),d(this,"handleKeyDown",e=>{let{event:t}=e,{disabled:i,indexManager:a}=this.props;if(!i)switch(t.which){case r.A.ENTER:case r.A.NUMPAD_ENTER:t.preventDefault(),a.select();break;case r.A.UP:t.preventDefault(),a.prev();break;case r.A.DOWN:t.preventDefault(),a.next()}})}componentDidMount(){(0,a.A)("PickerSearchField","/app/www/RepinPicker/PickerSearchField/PickerSearchField.tsx"),this._input&&this._input.focus()}render(){let{onChange:e,value:t}=this.props;return(0,o.jsx)(s.az,{"data-test-id":"picker-search-field-container",role:"presentation",width:"100%",children:(0,o.jsx)(s.Lw,{ref:this.setInputRef,accessibilityLabel:"",id:"pickerSearchField",onChange:({value:t})=>e(t),onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Search', 'search bar placeholder text', 'search bar placeholder text'),size:"lg",value:t})})}}let h=function(e){let t=(0,l.A)();return(0,o.jsx)(c,{...e,i18n:t})}},949141(e,t,i){i.d(t,{A:()=>_});var a=i(61163),n=i(859471),s=i(150880),l=i(538329),r=i(386121),o=i(732857),d=i(225886),c=i(290720),h=i(848561),u=i(746508),p=i(562615);function g(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class m extends n.Component{constructor(...e){super(...e),g(this,"state",{searchQuery:""}),g(this,"handleSelectItem",e=>{let{onCreate:t,onSelected:i}=this.props;if(!e&&t){let{searchQuery:e}=this.state;t(e)}else e&&i(e);(t||e)&&this.setState({searchQuery:""})}),g(this,"handleSearchQueryInput",e=>{this.setState({searchQuery:e})}),g(this,"renderSectionHeader",e=>{let{isRepin:t}=this.props;return e.title?(0,p.jsx)(s.az,{children:(0,p.jsx)(s.az,{paddingX:3,paddingY:1,children:(0,p.jsx)(s._Y,{accessibilityLevel:t?2:4,children:(0,p.jsx)(s.KJ,{size:"200",children:e.title})})})}):null}),g(this,"renderRow",({item:e,hovered:t,sectionProps:i={}})=>{let{boardSavedTo:a,isSelectMode:n,disabledRowId:s}=this.props,{searchQuery:l}=this.state,{inSectionSelection:r=!1}=i,o=a&&a.board===e.id?a&&a.state:null,d="board_section"===e.type;return(0,p.jsx)(c.A,{disabled:e.id===s&&r,isSection:d,isSelectMode:n,isWithinSectionPicker:r,item:e,saveState:o,searchQuery:l,selected:t})})}render(){let{boardSavedTo:e,createButtonLabel:t,hasLowBoardCount:i,getSections:a,isLoaded:n,onCreate:l,pinId:c}=this.props;if(!n)return(0,p.jsx)(s.az,{paddingY:5,children:(0,p.jsx)(s.y$,{accessibilityLabel:this.props.i18n._('loading section picker', 'accessibility label for the loading spinner the repin picker', 'accessibility label for the loading spinner the repin picker'),show:!0})});{let{searchQuery:n}=this.state,g=a(n);return this.indexManager=new r.A(g.map(e=>e.items)),this.indexManager.setSelectItem(this.handleSelectItem),(0,p.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:{zIndex:0}},direction:"column",display:"flex",flex:"grow",height:"100%",minHeight:0,overflow:"auto",children:[!i&&(0,p.jsx)(s.az,{children:(0,p.jsx)(s.az,{marginBottom:4,marginTop:1,paddingX:3,children:(0,p.jsx)(d.A,{disabled:!!e,indexManager:this.indexManager,onChange:this.handleSearchQueryInput,value:n})})}),(0,p.jsx)(o.A,{disabled:!!e,grow:!i&&!n,indexManager:this.indexManager,onSelectItem:this.handleSelectItem,renderItem:this.renderRow,renderSectionHeader:this.renderSectionHeader,sections:g}),l&&(0,p.jsx)(s.az,{elevation:g.length>1?"shadowFloating":void 0,children:(0,p.jsx)(u.A,{buttonLabel:t,hasHoverState:!0,name:n,onClick:()=>l(n)})}),i&&l&&c&&(0,p.jsx)(h.A,{onBoardSelected:l,pinId:c})]})}}componentDidMount(){(0,a.A)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")}}function _(e){(0,n.useEffect)(()=>{(0,a.A)("RepinPicker","/app/www/RepinPicker/RepinPicker.tsx")},[]);let t=(0,l.A)();return(0,p.jsx)(m,{...e,i18n:t})}},871023(e,t,i){i.d(t,{A:()=>l});var a=i(859471),n=i(284966);function s(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class l extends a.PureComponent{constructor(...e){super(...e),s(this,"setContainerRef",e=>{this.containerRef=e}),s(this,"fetchMoreIfNecessary",(0,n.A)(()=>{let{fetchMore:e,scrollBuffer:t}=this.props;e&&this.containerRef&&(({scrollTop:e,clientHeight:t,scrollHeight:i},a)=>e+t+(a?a(t):2*t)>i)(this.containerRef,t)&&e()},200))}componentDidMount(){setTimeout(this.fetchMoreIfNecessary)}componentDidUpdate(){this.fetchMoreIfNecessary()}render(){let{children:e}=this.props;return e({onScroll:this.fetchMoreIfNecessary,setRef:this.setContainerRef})}}},386121(e,t,i){i.d(t,{A:()=>l});let a={row:0,section:0},n={row:-1,section:-1},s=()=>void 0;class l{constructor(e){this.index={...a},this.sections=e,this.updateCallback=s,this.selectItem=s}getIndex(){return this.index}isAtStart(){let{row:e,section:t}=this.index;return 0===e&&0===t}isAtEnd(){let{row:e,section:t}=this.index,i=this.sections[t]||[];return this.sections.length===t+1&&i.length===e+1}next(){if(this.isAtEnd())return;let{row:e,section:t}=this.index;e===n.row&&t===n.section?this.index={...a}:this.sections[t].length>e+1?this.index.row+=1:(this.index.section+=1,this.index.row=0),this.updateCallback(!0)}prev(){if(this.isAtStart())return;let{row:e,section:t}=this.index;if(e===n.row&&t===n.section)this.index={...a};else if(e>0)this.index.row-=1;else{let e=this.index.section-1;this.index={section:e,row:this.sections[e].length-1}}this.updateCallback(!0)}select(){let{row:e,section:t}=this.index;this.selectItem((this.sections[t]||[])[e])}setInactive(){this.index={...n},this.updateCallback()}setSelectItem(e){this.selectItem=e}setUpdateCallback(e){this.updateCallback=e}updateIndex(e){this.index=e,this.updateCallback()}}},732857(e,t,i){i.d(t,{A:()=>d});var a=i(61163),n=i(859471),s=i(150880),l=i(871023),r=i(562615);function o(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class d extends n.Component{constructor(e){super(e),o(this,"setSelectedItemRef",e=>{this.selectedItemRef=e}),o(this,"handleIndexUpdate",e=>{let{indexManager:t}=this.props;this.setState({selectedIndex:t.getIndex(),selectionMovedByKeyboard:!!e})}),o(this,"handleSelectItem",e=>()=>{let{disabled:t,onSelectItem:i}=this.props;t||i(e)}),o(this,"handleMouseEnter",e=>()=>{let{disabled:t,indexManager:i}=this.props;t||i.updateIndex(e)}),o(this,"handleMouseLeave",()=>{let{disabled:e,indexManager:t}=this.props;e||t.setInactive()}),o(this,"renderItems",(e,t)=>{let{renderItem:i}=this.props,{selectedIndex:a}=this.state,{row:n,section:l}=a||{},{customProps:o={},items:d,renderItem:c}=e,{isDisabled:h}=o,u=t===l,p=c||i;return p&&d.map((e,i)=>{let a=h?.(e)??!1,l=u&&i===n;return(0,r.jsx)(s.az,{ref:!a&&l?this.setSelectedItemRef:null,"data-test-id":"board-selection",children:a?p({item:e,hovered:l,sectionProps:o}):(0,r.jsx)(s.Rp,{fullWidth:!1,onMouseEnter:this.handleMouseEnter({section:t,row:i}),onMouseLeave:this.handleMouseLeave,onTap:this.handleSelectItem(e),rounding:200,children:p({item:e,hovered:l,sectionProps:o})})},i)})}),o(this,"renderSections",()=>{let{renderSectionHeader:e,sections:t}=this.props;return t.map((t,i)=>(0,r.jsxs)(s.az,{children:[e&&e(t,i),this.renderItems(t,i)]},i))});let{indexManager:t}=this.props;this.state={selectedIndex:t.getIndex(),selectionMovedByKeyboard:!1},t.setUpdateCallback(this.handleIndexUpdate)}componentDidUpdate(e){let{containerRef:t}=this;if(this.selectedItemRef&&this.state.selectionMovedByKeyboard&&t){let e=this.selectedItemRef;if(!(e instanceof HTMLElement))return;let i=e.getBoundingClientRect(),a=i.top,n=i.bottom,s=t.getBoundingClientRect(),l=s.top;n>=s.bottom?e.scrollIntoView(!1):a<=l&&e.scrollIntoView(!0)}e.indexManager!==this.props.indexManager&&this.props.indexManager.setUpdateCallback(this.handleIndexUpdate)}render(){let{grow:e=!1,maxHeight:t,fetchMore:i}=this.props;return(0,r.jsx)(l.A,{fetchMore:i,children:({setRef:i,onScroll:a})=>(0,r.jsx)(s.az,{ref:e=>{this.containerRef=e,i(e)},flex:e?"grow":void 0,height:e?"100%":void 0,maxHeight:t,onScroll:a,overflow:"auto",children:this.renderSections()})})}componentDidMount(){(0,a.A)("SectionList","/app/www/common/SectionList/SectionList.tsx")}}},916455(e,t,i){i.d(t,{A:()=>v});var a,n,s=i(61163),l=i(859471);i(825193);var r=i(150880),o=i(535273),d=i(538329),c=i(542975),h=i(562615);function u(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let p=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],g=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),m=e=>Math.PI/180*e;class _ extends l.PureComponent{constructor(...e){super(...e),u(this,"animationTimer",null),u(this,"canvasRemovalTimer",null),u(this,"containerRef",(0,l.createRef)()),u(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;let{height:e,width:t}=this.containerRef.current.getBoundingClientRect(),i=2.5*e,a=document.createElement("canvas");return a.style.position="absolute",a.style.left=`${0-(i-t)/2}px`,a.style.top=`${0-(i-e)/2}px`,a.style.pointerEvents="none",a.style.width=`${i}px`,a.style.height=`${i}px`,a.style.overflow="visible",a.width=i,a.height=i,a}),u(this,"explode",()=>{let e=this.buildCanvas(),t=this.containerRef.current;if(!e||!t)return;let i=e.getContext("2d");t.prepend(e);let a=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(g(10,30)),color:p[Math.floor(Math.random()*p.length)],degree:Number(g(0,360).toFixed(1)),speed:Math.round(g(0,25)),friction:.9,opacity:Number(g(0,.5).toFixed(1)),yVel:0,gravity:.04})),n=(e,t,i,a)=>{window.requestAnimationFrame(()=>n(e,t,i,a)),t.clearRect(0,0,i,a),e.forEach(e=>{e.x+=e.speed*Math.cos(m(e.degree)),e.y+=e.speed*Math.sin(m(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};i&&n(a,i,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{t.removeChild(e)},(this.props.delay||0)+800)})}componentDidUpdate(e){let{delay:t,startAnimation:i}=this.props,{startAnimation:a}=e;i&&a!==i&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return(0,h.jsx)(r.az,{ref:this.containerRef,position:"relative",children:this.props.children})}}function f(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}u(_,"defaultProps",{delay:0});let y=(void 0!==a||(a=i(827842)).hash&&"c26037c886bf0e64c6b73d7daa56a9b4"!==a.hash&&console.error("The definition of 'BoardCreateSuccess_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),x=(void 0!==n||(n=i(581943)).hash&&"f12c153dafdb70970e02775ea0db67c2"!==n.hash&&console.error("The definition of 'BoardCreateSuccess_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class b extends l.PureComponent{constructor(...e){super(...e),f(this,"state",{isInitialized:!1}),f(this,"containerRef",(0,l.createRef)()),f(this,"pinDestinationRef",(0,l.createRef)())}componentDidMount(){window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}componentWillUnmount(){this.dismissTimeout&&clearTimeout(this.dismissTimeout)}componentDidUpdate(){let{isInitialized:e}=this.state,{onDismiss:t}=this.props;e&&t&&!this.dismissTimeout&&(this.dismissTimeout=setTimeout(t,2600))}render(){let{pin:e,firstRepin:t,pinImageRef:i,selectedBoardName:a,shuffleAsset:n}=this.props,s=n?.cutoutImages??e?.images_236x,o=e?.description??"",d=s?.height??1,u=s?.width??1,p=s?.url??"",{isInitialized:g}=this.state,{mask:m,imageContainer:f}=((e,t,i,a)=>{let n,s,l={},r=i.current?.getBoundingClientRect(),o=t.current?.getBoundingClientRect(),d=a.current?.getBoundingClientRect();if(o&&r&&d){l={left:r.left-o.left,top:r.top-o.top};let e={x:d.left-r.left,y:d.top-r.top},t={x:(d.width-r.width)/2,y:(d.height-r.height)/2};n=`translate(${e.x}px, ${e.y}px)`,s=`translate(${t.x}px, ${t.y}px)`}return{mask:{position:"absolute",left:l.left,top:l.top,width:e?d?.width:r?.width,height:e?d?.height:r?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?n:"none",transform:e?n:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s",borderRadius:e?"8px 0px 0px 8px":"8px",zIndex:2},imageContainer:{width:r?.width,height:r?.height,WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?s:"none",transform:e?s:"none",WebkitTransition:"all .5s ease-in-out .25s",transition:"all .5s ease-in-out .25s"}}})(g,this.containerRef,i,this.pinDestinationRef);return(0,h.jsx)(l.Fragment,{children:(0,h.jsxs)(r.az,{ref:this.containerRef,bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:[(0,h.jsx)(r.az,{dangerouslySetInlineStyle:{__style:m},maxHeight:335,overflow:"hidden",children:(0,h.jsx)(r.az,{dangerouslySetInlineStyle:{__style:f},children:(0,h.jsx)(r._V,{alt:o,naturalHeight:d,naturalWidth:u,src:p})})}),(0,h.jsx)(r.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{pointerEvents:"none",opacity:+!!g,WebkitTransition:"opacity .3s ease-in-out",transition:"opacity .3s ease-in-out",zIndex:1}},left:!0,position:"absolute",right:!0,top:!0,children:(0,h.jsxs)(r.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{opacity:+!!g,WebkitTransition:"opacity .5s ease-in-out .75s",transition:"opacity .5s ease-in-out .75s",overflow:"visible"}},direction:"column",display:"flex",height:"100%",justifyContent:"center",children:[(0,h.jsx)(_,{delay:1250,startAnimation:g,children:(0,h.jsx)(r.n1,{height:180,rounding:200,width:270,children:(0,h.jsxs)(r.so,{alignItems:"stretch",height:"100%",justifyContent:"start",width:"100%",children:[(0,h.jsx)(r.az,{ref:this.pinDestinationRef,color:"transparent",flex:"grow",height:"100%",marginEnd:1}),(0,h.jsxs)(r.so,{alignItems:"stretch",direction:"column",justifyContent:"start",width:80,children:[(0,h.jsx)(r.az,{color:"secondary",flex:"grow",marginBottom:1}),(0,h.jsx)(r.az,{color:"secondary",flex:"grow"})]})]})})}),(0,h.jsx)(r.az,{dangerouslySetInlineStyle:{__style:{opacity:+!!g,WebkitTransform:g?"translateY(0)":"translateY(20%)",transform:g?"translateY(0)":"translateY(20%)",WebkitTransition:"all .5s ease-in-out .75s",transition:"all .5s ease-in-out .75s",textAlign:"center",marginTop:"24px"}},"data-test-id":"board-saved-heading",paddingX:2,children:(0,h.jsx)(r._Y,{align:"center",children:t?(0,c.vQ)(this.props.i18n._('You saved your first Pin to {{ selectedBoardName }}!', 'First board create confirmation message', 'First board create confirmation message'),{selectedBoardName:a??""}):(0,c.vQ)(this.props.i18n._('You saved this Pin to {{ selectedBoardName }}!', 'Board create confirmation message', 'Board create confirmation message'),{selectedBoardName:a??""})})})]})})]})})}}function v({pinKey:e,shuffleAssetKey:t,...i}){(0,l.useEffect)(()=>{(0,s.A)("BoardCreateSuccess","/app/www/nux/BoardCreateSuccess.tsx")},[]);let a=(0,d.A)(),n=(0,o.A)(y,e),r=(0,o.A)(x,t);return(0,h.jsx)(b,{...i,i18n:a,pin:n,shuffleAsset:r})}f(b,"defaultProps",{firstRepin:!1})},94565(e,t,i){i.d(t,{A:()=>h});var a=i(427471),n=i(34830),s=i(703672),l=i(671931),r=i(424857),o=i(513010),d=i(517750),c=i(504252);function h({boardId:e,sourceBoardId:t="",sourceSectionId:i="",name:h,nameSource:u,pinImport:p,initialPinIds:g=[]},m,_,f){let y=0;"RECOMMENDATION"===u?y=1:"EDITED_RECOMMENDATION"===u&&(y=2);let x={board_id:e,initial_pins:p&&!p.all?p.pinIds:g,name:h,name_source:y,..._?{orbac_subject_id:_}:Object.freeze({})};return h=>a.A.create("BoardSectionResource",x).callCreate({showError:!1}).then(({resource_response:{data:a}})=>{f({event_type:7100,object_id_str:a.id}),h((0,r.I4)(e,a)),h((0,o.ZT)({feedId:e,feedType:c.A.BOARD_SECTIONS,itemIds:[a.id],itemType:"boardsection"})),h((0,l.A)(e,"pin_count")),h((0,s.Q5)("ApiResource",{url:`/v3/board/${e}/sections/all/`,data:{fields:n.A,orbac_subject_id:_}}));let{all:u,pinIds:g}=p||{all:!1,pinIds:[]};return u?new Promise((n,s)=>h((0,d.A)({inverseSelection:!0,selectedPinIds:g,source:{boardId:t||e,sectionId:i||null},target:{boardId:e,sectionId:a.id}},m,f)).then(()=>n(a)).catch(s)):(g.length>0&&h((0,o.J6)({feedId:e,feedType:c.A.BOARDFEED,itemIds:g,itemType:"pin"})),a)})}},290720(e,t,i){i.d(t,{A:()=>h,p:()=>c});var a=i(150880),n=i(753771),s=i(538329),l=i(580740),r=i(281817),o=i(835375),d=i(562615);function c(e,t=""){let i=e&&e.length>1?RegExp(e,"i"):"";return e&&e.length>1?t.split(i).reduce((i,a)=>{if(i.length>0&&e&&e.length){let n=t.toLowerCase().indexOf(e.toLowerCase());return i.concat(t.substring(n,n+e.length),a)}return[a]},[]):t}let h=function(e){let t=(0,s.A)(),{disabled:i,item:h,isSection:u,isSelectMode:p,isWithinSectionPicker:g,saveState:m,searchQuery:_,selected:f}=e,y=u?null:h,x=u?h:null,b=x&&x.title||y&&y.name||"",v="",A=!1,j="",S=0;y&&({image_cover_url:v,is_collaborative:A,privacy:j,section_count:S=0}=y);let w=c(_,b),P=j===n.A.BoardPrivacy.SECRET,k=!i&&(f||!!m),z=!g&&"number"==typeof S&&S>0,C="number"==typeof S&&S>0?"boardWithSection":"boardWithoutSection",T=p?t._('Select', 'Board select button label', 'Board select button label'):t._('Save', 'Pin save button label', 'Pin save button label');return(0,d.jsxs)(a.az,{alignItems:"center",color:k?"secondary":"default","data-test-id":C,display:"flex",height:64,marginEnd:2,marginStart:2,marginTop:1,padding:2,rounding:300,children:[y&&(0,d.jsx)(a.az,{color:"secondary",flex:"none",height:48,marginEnd:2,overflow:"hidden",rounding:200,width:48,children:v&&(0,d.jsx)(a._V,{alt:t._('Board cover image', 'boardPickerRow.image.altText', 'alt text for a board cover image'),fit:"cover",naturalHeight:1,naturalWidth:1,src:v})}),x&&!!x.preview_pins?.length&&(0,d.jsx)(r.A,{image_url:x.preview_pins[0].image_square_url??"",naturalHeight:x.preview_pins[0].image_square_size_pixels?.height??1,naturalWidth:x.preview_pins[0].image_square_size_pixels?.width??1}),(0,d.jsxs)(a.so,{alignItems:"center",flex:"grow",justifyContent:"between",children:[(0,d.jsx)(a.KJ,{color:i?"subtle":"default",lineClamp:1,size:"300",weight:"bold",children:w}),(z||!k)&&(0,d.jsxs)(a.so,{alignItems:"center",justifyContent:"start",children:[P&&(0,d.jsx)(o.A,{type:"secret"}),A&&(0,d.jsx)(l.A,{board:y,showCollaborativeIcon:A,useLegoLayout:!0}),z&&(0,d.jsx)(o.A,{type:"sections"})]}),!z&&k&&!m&&(0,d.jsx)(a.az,{alignItems:"center",color:"primary","data-test-id":"BoardPickerSaveButton",display:"flex",flex:"none",paddingX:3,paddingY:2,rounding:400,children:(0,d.jsx)(a.KJ,{color:"inverse",overflow:"normal",size:"300",weight:"bold",children:T})}),!z&&k&&"loading"===m&&(0,d.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{transform:"scale(0.7)"}},maxHeight:35,children:(0,d.jsx)(a.y$,{accessibilityLabel:t._('Saving', 'Accessibility label for saving a pin to a board', 'Accessibility label for saving a pin to a board'),show:!0})})]})]})}},848561(e,t,i){i.d(t,{A:()=>u});var a=i(61163),n=i(859471),s=i(150880),l=i(586733),r=i(538329),o=i(430705),d=i(562615);function c(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class h extends n.Component{constructor(...e){super(...e),c(this,"state",{isHovering:!1}),c(this,"onHover",()=>{this.setState({isHovering:!0})}),c(this,"offHover",()=>{this.setState({isHovering:!1})})}render(){let{name:e,selected:t,image:i,inFlyoutExp:a}=this.props;return a?(0,d.jsxs)(s.az,{alignItems:"center",color:this.state.isHovering?"secondary":"transparent",direction:"row",display:"flex",onMouseOut:this.offHover,onMouseOver:this.onHover,paddingX:4,paddingY:2,children:[(0,d.jsx)(s.az,{children:(0,d.jsx)(s.n1,{height:40,rounding:200,width:40,children:this.state.isHovering&&i&&i.url?(0,d.jsx)(s._V,{alt:"",color:"",fit:"cover",naturalHeight:i.height??1,naturalWidth:i.width??1,src:i.url}):(0,d.jsx)(s.az,{color:"secondary",height:40,width:40})})}),(0,d.jsx)(s.az,{padding:2,children:(0,d.jsx)(s._Y,{size:"400",children:e})})]}):(0,d.jsxs)(s.az,{alignItems:"center",color:t?"secondary":"transparent",direction:"row",display:"flex",paddingX:6,paddingY:2,children:[(0,d.jsx)(s.az,{children:(0,d.jsx)(s.In,{accessibilityLabel:"",color:t?"default":"subtle",icon:"plus"})}),(0,d.jsx)(s.az,{marginStart:3,children:(0,d.jsx)(s.KJ,{color:t?"default":"subtle",weight:"bold",children:e})})]})}componentDidMount(){(0,a.A)("BoardSuggestionListRow","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionListRow.tsx")}}let u=({inFlyoutExp:e,inFirstBoardCreateGestaltExp:t,pinId:i,image:c,minHeight:u,onBoardSelected:p})=>{(0,n.useEffect)(()=>{(0,a.A)("BoardSuggestionList","/app/www/save/pin-to-board/BoardSuggestionList/BoardSuggestionList.tsx")},[]);let{logContextEvent:g}=(0,l.o)(),m=(0,r.A)(),[_,f]=(0,n.useState)(-1),{data:y=[],isLoaded:x}=(0,o.A)({name:"ApiResource",options:{url:`/v3/pins/${String(i)}/board_title_suggestions/`,pin_id:i}}),b=(0,n.useMemo)(()=>y&&y.length?y.map(e=>e.title):[],[y]),v=()=>{f(-1)},A=(t,i)=>{let a=_===i;return(0,d.jsx)("li",{children:(0,d.jsx)(s.Rp,{onMouseEnter:()=>{f(i)},onMouseLeave:v,onTap:()=>{p(b[i],!1),g({event_type:101,component:13025,element:23})},children:(0,d.jsx)(h,{image:c,inFlyoutExp:e,name:t,selected:a})})},i)};return x?b&&b.length?e?(0,d.jsx)(s.az,{children:(0,d.jsx)("ul",{children:b.map(A)})}):t?(0,d.jsxs)(s.az,{children:[(0,d.jsx)(s.az,{marginBottom:3,marginStart:6,marginTop:5,children:(0,d.jsx)(s.KJ,{children:m._('Suggested board names', 'text above suggested board names list', 'text above suggested board names list')})}),(0,d.jsx)("ul",{children:b.map(A)})]}):(0,d.jsxs)(s.az,{children:[(0,d.jsx)(s.az,{marginTop:2,paddingX:5,children:(0,d.jsx)(s.KJ,{children:m._('Suggested board names', ' - ', ' -- ')})}),(0,d.jsx)("ul",{children:b.map(A)})]}):null:(0,d.jsx)(s.so,{alignItems:"center",height:"100%",justifyContent:"center",minHeight:u||"",children:(0,d.jsx)(s.y$,{accessibilityLabel:m._('Loading board suggestions', 'Accesibility label for loading board suggestions', 'Accesibility label for loading board suggestions'),show:!0})})}},746508(e,t,i){i.d(t,{A:()=>d});var a=i(61163),n=i(859471),s=i(150880),l=i(538329),r=i(524023),o=i(562615);function d(e){(0,n.useEffect)(()=>{(0,a.A)("CreateBoardButton","/app/www/save/pin-to-board/CreateBoardButton/CreateBoardButton.tsx")},[]);let t=(0,l.A)(),{buttonLabel:i,hasHoverState:d,name:c,onClick:h}=e,{isHovering:u,hoverHandlers:p}=(0,r.A)(),g=c||i||t._('Create board', ' - ', ' -- ');return(0,o.jsx)(s.Rp,{onMouseEnter:p.onMouseOver,onMouseLeave:p.onMouseLeave,onTap:h,children:(0,o.jsxs)(s.az,{alignItems:"center",color:d&&u?"secondary":"default",display:"flex",height:"100%",padding:4,width:"100%",children:[(0,o.jsx)(s.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{padding:"14px"}},marginEnd:2,rounding:200,children:(0,o.jsx)(s.In,{accessibilityLabel:"",color:"default",icon:"plus",size:20})}),c?(0,o.jsx)(s.az,{margin:1,children:(0,o.jsxs)(s.KJ,{inline:!0,overflow:"normal",children:[" ",t._('Create: ', ' - ', ' -- ')," "]})}):null,(0,o.jsxs)(s.KJ,{align:"center",inline:!0,lineClamp:1,weight:"bold",children:[" ",g," "]})]})})}},952756(e,t,i){i.d(t,{A:()=>y});var a=i(61163),n=i(859471),s=i(106386),l=i(150880),r=i(743372),o=i(693154),d=i(538329),c=i(985761),h=i(870540),u=i(847753),p=i(896575),g=i(94565),m=i(562615);function _(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class f extends n.Component{constructor(e){super(e),_(this,"onCreateSection",()=>{let{board:e,sourceBoard:t,sourceSection:i,dispatch:a,completeCreateSectionAction:n,pinImport:s,viewer:l,orbacActingAs:r,logContextEvent:o}=this.props,d=(0,u.H7)(l,r);return this.setState({isSaving:!0}),a((0,g.A)({boardId:e.id,sourceBoardId:t&&t.id,sourceSectionId:i&&i.id,name:this.state.inputName.trim(),pinImport:s},this.props.i18n,d,o)).then(e=>{this.setState({isSaving:!1}),n(e)}).catch(e=>{this.setState({createError:e.message_detail||e.message,isSaving:!1})})}),_(this,"handleKeyDown",({event:e})=>{let{createError:t,inputName:i}=this.state;[c.A.ENTER,c.A.NUMPAD_ENTER].includes(e.which)&&!t&&i.trim()&&this.onCreateSection()}),_(this,"handleChangeName",({value:e})=>{this.setState({createError:null,inputName:e})}),_(this,"handleInputRef",e=>{this.setState({inputRef:e})}),this.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1}}componentDidUpdate(e,t){let{createError:i,inputRef:a}=this.state;a&&(!t.inputRef||i)&&a.focus()}render(){let{showTitle:e,positionRelative:t}=this.props,{createError:i,inputName:a,isSaving:n}=this.state,s=!!a.trim()&&!i;return(0,m.jsxs)(l.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:t?"relative":"absolute",right:!0,rounding:200,top:!0,width:"100%",children:[e&&(0,m.jsx)(l.az,{marginTop:3,paddingX:6,paddingY:3,children:(0,m.jsx)(l._Y,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,m.jsxs)(l.az,{padding:4,children:[(0,m.jsx)(l.az,{marginBottom:2,children:(0,m.jsx)(l.JU,{htmlFor:"sectionEditName",children:(0,m.jsx)(l.KJ,{color:i?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,m.jsx)(l.az,{children:(0,m.jsx)(l.az,{ref:this.handleInputRef,children:(0,m.jsx)(l.A_,{errorMessage:i||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:a})})})]}),(0,m.jsx)(l.so,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,m.jsx)(l.az,{padding:4,children:(0,m.jsx)(l.so,{alignItems:"stretch",justifyContent:"end",children:(0,m.jsx)(p.A,{disabled:!s||n,onClick:this.onCreateSection,submitting:n,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}componentDidMount(){(0,a.A)("CreateSectionPane","/app/www/save/pin-to-board/CreateSectionPane/CreateSectionPane.tsx")}}let y=function(e){let t=(0,s.wA)(),i=(0,d.A)(),a=(0,o.A)(),n=(0,h.A)();return(0,m.jsx)(f,{...e,dispatch:t,i18n:i,logContextEvent:(0,r.A)(),orbacActingAs:n,viewer:a})}},375502(e,t,i){i.d(t,{A:()=>m});var a=i(61163),n=i(859471),s=i(150880),l=i(257300),r=i(538329),o=i(653472),d=i(542975),c=i(985761),h=i(928229),u=i(562615);function p(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class g extends n.Component{constructor(...e){super(...e),p(this,"state",{recommendations:[],selectedIndex:0,resourceLoaded:!1}),p(this,"onDismiss",()=>{}),p(this,"mounted",!1),p(this,"addHashtag",e=>{this.props.addHashtag(e),this.setState({recommendations:[]})}),p(this,"handleKeyDown",e=>{e.keyCode===c.A.UP?this.handlePrevHashtag(e):e.keyCode===c.A.DOWN?this.handleNextHashtag(e):e.keyCode===c.A.ESCAPE?this.handleClose(e):e.keyCode===c.A.ENTER&&this.handleSubmit(e)}),p(this,"handlePrevHashtag",e=>{e.preventDefault(),this.state.selectedIndex>0&&this.setState(e=>({selectedIndex:e.selectedIndex-1}))}),p(this,"handleNextHashtag",e=>{e.preventDefault(),this.state.selectedIndex<this.state.recommendations.length-1&&this.setState(e=>({selectedIndex:e.selectedIndex+1}))}),p(this,"handleClose",e=>{e.preventDefault(),this.setState({recommendations:[]})}),p(this,"handleSubmit",e=>{e.preventDefault(),this.addHashtag(this.state.recommendations[this.state.selectedIndex].query)}),p(this,"callResource",e=>{let{makeCancelablePromise:t}=this.props;t((0,l.A)({url:"/v3/search/autocomplete/",data:{q:e,show_pin_count:!0}}),"typeahead").then(e=>{if(!this.mounted)return;let{data:t}=e.resource_response;this.setState({recommendations:t.slice(0,5),resourceLoaded:!0})}).catch(({isCanceled:e})=>{e||this.setState({resourceLoaded:!1})})})}componentDidMount(){this.mounted=!0,this.callResource(this.props.query),window.addEventListener("keydown",this.handleKeyDown)}componentDidUpdate(e){this.props.query!==e.query&&""!==this.props.query&&this.callResource(this.props.query)}componentWillUnmount(){window.removeEventListener("keydown",this.handleKeyDown),this.mounted=!1}render(){let{recommendations:e,resourceLoaded:t,selectedIndex:i}=this.state,{anchor:a,idealDirection:n}=this.props,l=e.filter(e=>e.query),r="flyout_"+l.length;return t&&l.length>0?(0,u.jsx)(s.AM,{anchor:a,idealDirection:n||"down",onDismiss:this.onDismiss,size:"sm",children:(0,u.jsx)(s.az,{width:"100%",zIndex:new s.rk(3),children:l.length>0?l.map((e,t)=>(0,u.jsx)(s.Rp,{fullWidth:!1,onTap:()=>this.addHashtag(e.query),children:(0,u.jsxs)(s.az,{alignItems:"center",color:t===i?"secondary":"transparent",display:"flex",justifyContent:"between",padding:1,children:[(0,u.jsx)(s.az,{flex:"grow",children:(0,u.jsx)(s.KJ,{inline:!0,size:"200",weight:"bold",children:e.query})}),(0,u.jsx)(s.az,{flex:"none",children:(0,u.jsx)(s.KJ,{inline:!0,size:"100",children:(0,d.vQ)(this.props.i18n.ngettext('{{ count }} pin', '{{ count }} pins', Number(e.pin_count), 'label for n pins in hashtag flyout', 'label for n pins in hashtag flyout'),{count:(0,u.jsx)(o.A,{value:Number(e.pin_count)},"pinCount")})})})]})},e.query)):null})},r):null}}function m(e){(0,n.useEffect)(()=>{(0,a.A)("HashtagFlyout","/app/www/save/pin-to-board/PinPane/HashtagFlyout.tsx")},[]);let t=(0,r.A)(),i=(0,h.A)();return(0,u.jsx)(g,{...e,i18n:t,makeCancelablePromise:i})}},785657(e,t,i){i.d(t,{A:()=>C});var a,n,s,l,r,o=i(61163),d=i(859471);i(825193);var c=i(150880),h=i(586733),u=i(535273),p=i(239092),g=i(104088),m=i(219053),_=i(538329),f=i(542975),y=i(430705),x=i(562615);let b=(void 0!==a||(a=i(891023)).hash&&"3caf9424c2af74d2b11a6ea682b57d1b"!==a.hash&&console.error("The definition of 'AlreadyPinnedCheck_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),v=(void 0!==n||(n=i(737817)).hash&&"6bb1a587f71f85424aa51845831862d4"!==n.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),A=(void 0!==s||(s=i(629769)).hash&&"0b5f077c08e31de36594b6918e128d12"!==s.hash&&console.error("The definition of 'AlreadyPinnedCheckQuery' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);function j({pinKey:e}){(0,d.useEffect)(()=>{(0,o.A)("AlreadyPinnedCheck","/app/www/save/pin-to-board/PinPane/AlreadyPinnedCheck.tsx")},[]);let t=(0,_.A)(),i=(0,u.A)(b,e),a="GraphQL"===(0,g.z)(e),n=(0,m.A)({strategy:a?"GraphQL":"Legacy",query:A,variables:{pinId:i.entityId},options:{fetchPolicy:"network-only"},useGetLegacyResource:({pinId:e})=>(0,y.A)({name:"ApiResource",options:{url:`/v3/pins/${e}/`,field_sets:["pin.board()","pin.id","pin.pinned_to_board()","pin.type","pin.via_pinner()"]},noCache:!0})}),s=n?.v3GetPinQuery?.__typename==="V3GetPin"?n.v3GetPinQuery.data:null,l=(0,u.A)(v,s);return l&&l.pinnedToBoard&&"quick_creates"!==l.pinnedToBoard.layout?(0,x.jsxs)(c.az,{children:[(0,x.jsx)(c.az,{color:"error","data-test-id":"already-pinned",display:"flex",padding:3,rounding:200,width:185,children:(0,x.jsx)(c.KJ,{align:"center",color:"inverse",size:"200",weight:"bold",children:(0,f.vQ)(t._('Psst! You already saved this Pin to {{ board_name }} ', 'Toast for already having repinned pin', 'Toast for already having repinned pin'),{board_name:(l.pinnedToBoard||{}).name}).join(" ")})}),(0,x.jsx)(c.az,{display:"flex",justifyContent:"center",marginTop:-3,children:(0,x.jsx)(c.In,{accessibilityLabel:"",color:"error",icon:"heart-fill",size:26})})]}):null}var S=i(375502);function w(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let P=(void 0!==l||(l=i(233746)).hash&&"ee852d86e422f64afda32d5c5ed05eeb"!==l.hash&&console.error("The definition of 'PinPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),k=(void 0!==r||(r=i(978663)).hash&&"1a4583782792fbfe92015cb2dbe50f70"!==r.hash&&console.error("The definition of 'PinPane_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);class z extends d.Component{constructor(...e){super(...e),w(this,"state",{flyoutCursorIndex:-1,description:this.props.pin?.description&&this.props.pin.description.trim()||"",editing:!1,hashtagQuery:"",isHashtagFlyoutOpen:!1,flyoutOpened:!1}),w(this,"updateDescription",e=>{this.props.updateDescription&&this.props.updateDescription(e)}),w(this,"handleHashtagAddition",e=>{let{pin:t}=this.props;this.props.logContextEvent({event_type:101,component:208,element:10249,object_id_str:t?.entityId,aux_data:{hashtags:e}});let i=this.state.flyoutCursorIndex,a=Number(i+this.state.hashtagQuery.length),n=this.state.description.slice(0,i)+e+" "+this.state.description.slice(a);this.updateDescription(n),this.setState({description:n,editing:!0,hashtagQuery:"",isHashtagFlyoutOpen:!1})})}render(){let{color:e,isFirstPin:t,pin:i,pinImageRef:a,shuffleAsset:n}=this.props,{editing:s,flyoutOpened:l,hashtagQuery:r,isHashtagFlyoutOpen:o}=this.state,d=n?.cutoutImages??i?.images_236x,h=d?.url||i?.imageBase64||this.props.urlPinInfo?.imageUrl,u=this.state.description||this.props.urlPinInfo?.description||"",g=i?.link||this.props.urlPinInfo?.link;return(0,x.jsxs)(c.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:l&&s?{transform:"translateY(-75px)"}:{}},display:"flex",justifyContent:"center",position:"relative",width:t?"50%":"",children:[(0,x.jsxs)(c.so,{alignItems:"center",direction:"column",justifyContent:"start",children:[i?.entityId&&!n&&(0,x.jsx)(j,{pinKey:i}),(0,x.jsx)(c.az,{paddingY:9*!!t,width:240,children:(0,x.jsx)(c.az,{ref:a,maxHeight:l&&s?220:335,overflow:"hidden",rounding:400,children:h?(0,x.jsx)(c._V,{alt:u,naturalHeight:d?.height||1,naturalWidth:d?.width||1,src:h}):!!g&&(0,x.jsx)(p.A,{color:e||"",description:u,url:g})})})]}),this.anchor&&o?(0,x.jsx)(S.A,{addHashtag:this.handleHashtagAddition,anchor:this.anchor,query:r}):null]})}}function C({pinKey:e,shuffleAssetKey:t,...i}){(0,d.useEffect)(()=>{(0,o.A)("PinPane","/app/www/save/pin-to-board/PinPane/PinPane.tsx")},[]);let{logContextEvent:a}=(0,h.o)(),n=(0,u.A)(P,e),s=(0,u.A)(k,t);return(0,x.jsx)(z,{...i,logContextEvent:a,pin:n,shuffleAsset:s})}},476257(e,t,i){let a;i.d(t,{A:()=>ec});var n,s,l,r,o=i(859471);i(825193);var d=i(150880),c=i(79906),h=i(693154),u=i(535273),p=i(538329),g=i(601185),m=i(592023),_=i(916455),f=i(61163),y=i(106386),x=i(743372),b=i(844255),v=i(94565),A=i(562615);let j=({board:e,completeCreateSectionAction:t,height:i,onClose:a,pinImport:n,url:s,width:l})=>{(0,o.useEffect)(()=>{(0,f.A)("SectionCreateModal","/app/www/save/board/BoardPage/ModalContents/SectionCreateModal.tsx")},[]);let r=(0,p.A)(),{isRTL:h}=(0,b._8)(),u=(0,x.A)(),g=(0,y.wA)(),[m,_]=(0,o.useState)(""),[j,S]=(0,o.useState)(!1),[w,P]=(0,o.useState)(null);return(0,A.jsx)(c.Ay,{accessibilityModalLabel:r._('Repin modal', 'save.pinToBoard.modal.label', 'Accessibility label on modal'),footer:(0,A.jsx)(d.so,{children:(0,A.jsx)(d.az,{marginStart:"auto",children:(0,A.jsx)(d.$n,{color:"primary",dataTestId:"create-section-add-button",disabled:j||!m.trim()||!!w,fullWidth:!0,onClick:()=>{e&&(S(!0),g((0,v.A)({boardId:e.id,name:m.trim(),pinImport:n},r,void 0,u)).then(i=>{t(e,i,!1)}).catch(e=>{P(e.message_detail||e.message)}).finally(()=>{S(!1)}))},size:"lg",text:r._('Add', 'sectionCreateModal.add.button', 'add a new section')})})}),heading:(0,A.jsx)(d.az,{paddingY:8,children:(0,A.jsxs)(d.so,{justifyContent:"center",children:[(0,A.jsx)(d.az,{maxWidth:400,children:(0,A.jsx)(d._Y,{align:"center",size:"600",children:r._('Add section', 'sectionCreateModal.title', 'Title in the add section modal')})}),(0,A.jsx)(d.az,{left:h,padding:8,position:"absolute",right:!h,top:!0,children:(0,A.jsx)(d.K0,{accessibilityLabel:r._('Close', 'sectionCreateModal.closeButton', 'close section create modal button'),icon:"close",iconColor:"default",onClick:a,size:"md"})})]})}),onDismiss:a,size:"sm",children:(0,A.jsx)(d.az,{padding:8,children:(0,A.jsxs)(d.so,{children:[(0,A.jsx)(d.n1,{height:i,rounding:400,width:l,children:s&&(0,A.jsx)(d._V,{alt:"",fit:"cover",naturalHeight:i??1,naturalWidth:l??1,src:s})}),(0,A.jsx)(d.az,{dangerouslySetInlineStyle:{__style:{width:l?`calc(100% - ${l}px)`:"100%"}},marginStart:8,children:(0,A.jsx)(d.A_,{dataTestId:"create-section-name-input-field",errorMessage:w,id:"sectionEditName",label:r._('Name', 'section.create.label', 'label text for section input'),onChange:e=>{_(e.value),P(null)},placeholder:r._('Like "Lighting"', 'sectionCreateModal.boardSection.name', 'Placeholder for board section name'),size:"lg",type:"text",value:m})})]})})})};var S=i(849550),w=i(586733),P=i(703672),k=i(430705),z=i(655621),C=i(971289);function T(e,t,i,n){return{...e?{pin_id:e}:Object.freeze({}),...t?{username:t}:Object.freeze({}),...i?{advertiser_id:i,filter:"protected"}:Object.freeze({}),field_set_key:"board_picker",limit:a,shortlist_suggestions:2,isDesktop:n}}var I=i(949141),B=i(851287);let R=(void 0!==n||(n=i(376901)).hash&&"76215b7b40cb02e76b77e58c8765d0d1"!==n.hash&&console.error("The definition of 'BoardPicker_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);class E extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let t,i,{boardResource:{data:a}}=this.props;if(!a)return[];let{all_boards:n,boards_shortlist:s}=a,l=(t=[],i=[],n.forEach(e=>{e.name?.match(/^\d/)?i.push(e):t.push(e)}),[...t,...i]);return l.length<=3?[{items:l}]:e.length>=z.A?[{items:(0,B._)(l,e)}]:[s.length?{items:s,title:this.props.i18n._('Top choices', ' - ', ' -- ')}:{items:[]},{items:l,title:this.props.i18n._('All boards', 'title for board picker all boards section', 'title for board picker all boards section')}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{boardResource:{data:e,error:t,isLoaded:i},boardSavedTo:a,isRepin:n,isSelectMode:s,onBoardCreate:l,onBoardSelected:r,pin:o}=this.props,d=i&&!!e&&e.all_boards.length<=3;return(0,A.jsx)(I.A,{boardSavedTo:a,getSections:this.getSections,hasLoadError:!!t,hasLowBoardCount:d,isLoaded:i,isRepin:n,isSelectMode:s,onCreate:l,onSelected:r,pinId:o?.entityId})}componentDidMount(){(0,f.A)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")}}function K({pinKey:e,...t}){(0,o.useEffect)(()=>{(0,f.A)("BoardPicker","/app/www/RepinPicker/BoardPicker/BoardPicker.tsx")},[]);let i=(0,p.A)(),a=(0,h.A)(),n=(0,C.qJ)(),s=(0,u.A)(R,e),l=(0,y.d4)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.id}),r=(0,y.d4)(({advertiser:e})=>{if(a.isAuth&&e&&e.owner_user_id!==a.id)return e.owner_user_id}),d=(0,k.A)({name:"BoardPickerBoardsResource",options:T(s?.entityId,r,l,n)});return(0,A.jsx)(E,{...t,boardResource:d,i18n:i,pin:s})}var F=i(34830),L=i(31913);class D extends o.Component{constructor(...e){var t,i,a;super(...e),t="getSections",i=e=>{let{board:t,i18n:i,sectionsResource:{data:a}}=this.props,n=i._('Board', 'PinSaveButton.RepinPicker.SectionListBoardTitle', 'board title on section picker'),s=i._('Section', 'PinSaveButton.BoardFlyout.SectionListSectionTitle', 'section title on section picker');return e.length>=z.A?[{items:(0,B._)([t],e),customProps:{inSectionSelection:!0}},{items:(0,B._)(a??[],e,"title")}]:[{items:[t],customProps:{inSectionSelection:!0},title:n},{items:a??[],title:s}]},(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in this?Object.defineProperty(this,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[t]=i}render(){let{sectionsResource:{error:e,isLoaded:t},boardSavedTo:i,isRepin:a,isSelectMode:n,onSectionCreate:s,onSectionSelected:l,pinId:r}=this.props;return(0,A.jsx)(I.A,{boardSavedTo:i,createButtonLabel:this.props.i18n._('Add section', 'Button for creating a board section', 'Button for creating a board section'),getSections:this.getSections,hasLoadError:!!e,isLoaded:t,isRepin:a,isSelectMode:n,onCreate:s,onSelected:l,pinId:r})}componentDidMount(){(0,f.A)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")}}function N(e){(0,o.useEffect)(()=>{(0,f.A)("SectionPicker","/app/www/RepinPicker/SectionPicker.tsx")},[]);let t=(0,p.A)(),i=(0,L.A)({url:"/v3/board/{board}/sections/all/",params:{board:e.board.id,fields:F.A}});return(0,A.jsx)(D,{...e,i18n:t,sectionsResource:i})}var M=i(753771),O=i(500544),H=i(912581),J=i(989457),U=i(570805);function W(e){let t=(0,p.A)(),{body:i,img:a,onClick:n,selected:s,title:l,username:r,valid:o}=e;return(0,A.jsx)(d.az,{marginBottom:4,children:(0,A.jsx)(d.Rp,{onTap:n,children:(0,A.jsxs)(d.so,{alignItems:"center",direction:"row",justifyContent:"start",width:"100%",children:[a,(0,A.jsxs)(d.az,{flex:"grow",marginEnd:2,marginStart:3,children:[(0,A.jsx)(d.az,{marginBottom:1,children:(0,A.jsx)(d.KJ,{lineClamp:1,weight:"bold",children:l})}),(0,A.jsx)(d.KJ,{lineClamp:1,size:"100",children:r||i})]}),(0,A.jsx)(d.az,{marginStart:2,children:r?s?(0,A.jsx)(d.In,{accessibilityLabel:t._('Confirmation an invite will be sent', 'Alt tags on a check box on the board create flow for board invites', 'Alt tags on a check box on the board create flow for board invites'),color:"error",icon:"circle-check",size:32}):(0,A.jsx)(d.az,{dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}},height:32,rounding:"circle",width:32}):(0,A.jsx)(d.$n,{color:"secondary",disabled:!!s||!o,size:"sm",text:s?t._('Sent', 'Sent a board collaborator invite', 'Sent a board collaborator invite'):t._('Invite', 'Add board collaborator invite', 'Add board collaborator invite')})})]})})})}var Q=i(955170);function q(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function V(e,t,i){let{id:a}=e;return t===i.findIndex(e=>e.id===a)}class Y extends o.Component{constructor(...e){super(...e),q(this,"state",{selectedCollaborators:this.props.preselectedCollaborators||[],typeaheadSuggestions:[],value:""}),q(this,"isIdSelected",{}),q(this,"handleTextFieldChange",({value:e})=>{this.setState({value:e})}),q(this,"handleCollaboratorClick",e=>{let{id:t,type:i}=e;this.isIdSelected[t]=!this.isIdSelected[t];let{inviteUsers:a,inviteEmails:n}=this.props,{selectedCollaborators:s}=this.state,l=s.concat([e]);this.props.onSelectedCollaboratorsChange({id:t,resource:"email"===i?n:a}),this.setState({selectedCollaborators:l})}),q(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})})}componentDidMount(){let{inviteUsers:e,inviteEmails:t}=this.props;this.props.preselectedCollaborators&&this.props.preselectedCollaborators.map(i=>{let{id:a,type:n}=i;return this.isIdSelected[a]=!this.isIdSelected[a],this.props.onSelectedCollaboratorsChange({id:a,resource:"email"===n?t:e}),null})}render(){let{value:e}=this.state,{shareSuggestionsResource:{data:t}}=this.props,i=t||[],a=(""===e?this.state.selectedCollaborators.concat(i).filter(V):this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:e,valid:(0,H.A)(e)}).concat(i).filter(V)).map(e=>(function(e,t,i,a){if("user_share_suggestion"===e.type||"user"===e.type){let a=(0,A.jsx)(J.eu,{accessibilityLabel:"",name:e.title||e.full_name,size:"sm",src:e.image_medium_url||e.image_large_url});return(0,A.jsx)(W,{img:a,onClick:()=>i(e),selected:t,title:e.full_name,username:e.username})}if("email"===e.type){let n,s,{id:l,valid:r}=e,o=(0,A.jsx)(d.az,{alignItems:"center",color:"secondary",display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:(0,A.jsx)(d.In,{accessibilityLabel:a._('Email icon', 'Email icon on board create modal', 'Email icon on board create modal'),color:"default",icon:"envelope",size:20})}),c=(0,U.A)(a._('Email {{ email }}', ' - ', ' -- '),{email:l});return t?(n=a._('Done!', 'Text that lets the user know we sent the board invite email', 'Text that lets the user know we sent the board invite email'),s=()=>void 0):(n=r?a._('Click to send!', 'Text that lets the user know they can successfully send a board invite email', 'Text that lets the user know they can successfully send a board invite email'):a._('Keep typing!', 'Text that lets a user know the email they are typing is not valid yet', 'Text that lets a user know the email they are typing is not valid yet'),s=()=>r?i(e):void 0),(0,A.jsx)(W,{body:n,img:o,onClick:s,selected:t,title:c,valid:r})}})(e,this.isIdSelected[e.id],this.handleCollaboratorClick,this.props.i18n)).map((e,t)=>(0,A.jsx)("li",{children:e},t));return(0,A.jsxs)(d.so,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[(0,A.jsx)(d.az,{paddingX:3,paddingY:2,children:(0,A.jsx)(d.KJ,{size:"100",children:this.props.i18n._('Add collaborators (optional)', 'Optional field to add collaborators to a board on board create', 'Optional field to add collaborators to a board on board create')})}),(0,A.jsx)(d.az,{marginBottom:4,marginTop:2,paddingX:3,width:"100%",children:(0,A.jsx)(d.az,{flex:"grow",children:(0,A.jsx)(O.A,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:e,children:(0,A.jsx)(d.Lw,{accessibilityLabel:this.props.i18n._('Search for collaborators by name or email', ' - ', ' -- '),id:"CollaboratorInviteSearchField",onChange:this.handleTextFieldChange,placeholder:this.props.i18n._('Search by name or email', ' - ', ' -- '),size:"lg",value:e})})})}),(0,A.jsx)(d.az,{marginBottom:14,overflow:"auto",paddingX:3,children:(0,A.jsx)("ul",{children:a})})]})}}function $(e){(0,o.useEffect)(()=>{(0,f.A)("BoardCreateCollaborators","/app/www/BoardCreate/BoardCreateCollaborators.tsx")},[]);let t=(0,p.A)(),i=(0,k.A)({name:"ShareSuggestionsResource",noCache:!0}),a=(0,Q.mV)(),n=(0,Q.lt)();return(0,A.jsx)(Y,{...e,i18n:t,inviteEmails:a,inviteUsers:n,shareSuggestionsResource:i})}var X=i(896575),G=i(433414);function Z({hidePlaceholder:e,onCancel:t,onCreate:i,onInvite:a,prefilledName:n,preselectedCollaborators:s,showTitle:l,suggestedBoardName:r}){(0,o.useEffect)(()=>{(0,f.A)("CreateBoardPane","/app/www/save/pin-to-board/CreateBoardPane/CreateBoardPane.tsx")},[]);let c=(0,p.A)(),{isRTL:h}=(0,b._8)(),{handleCreate:u,handleChangeName:g,handleChangePrivacy:m,isAdAccountOwner:_,state:{createBoardError:y,inputName:x,nameValidatorErrors:v,privacy:j,saving:S}}=(0,G.A)({onCreate:i,prefilledName:n,suggestedBoardName:r}),w=0===v.length,P=j===M.A.BoardPrivacy.SECRET,k=(0,A.jsxs)(o.Fragment,{children:[(0,A.jsx)(d.so,{children:(0,A.jsx)(d.$n,{onClick:t,text:c._('Cancel', 'cancel board create', 'cancel board create')})}),(0,A.jsxs)(d.so,{alignItems:"stretch",justifyContent:"end",children:[!!y&&(0,A.jsx)(d.az,{paddingX:2,children:(0,A.jsx)(d.KJ,{align:"center",color:"error",size:"200",weight:"bold",children:y})}),(0,A.jsx)(X.A,{disabled:!x.trim()||!w||!!y||S,submitting:S,text:c._('Create', 'create a new board', 'create a new board')})]})]});return(0,A.jsx)(d.az,{color:"default",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:(0,A.jsx)("form",{onSubmit:e=>{e.preventDefault(),u()},style:{height:"100%"},children:(0,A.jsxs)(d.so,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"start",children:[l&&(0,A.jsx)(d.az,{display:"flex",marginTop:3,paddingX:6,paddingY:3,children:(0,A.jsx)(d._Y,{size:"400",children:c._('Create board', ' - ', ' -- ')})}),(0,A.jsxs)(d.az,{padding:3,children:[(0,A.jsx)(d.az,{marginBottom:2,children:(0,A.jsx)(d.JU,{htmlFor:"boardEditName",children:(0,A.jsx)(d.KJ,{size:"100",children:c._('Name', ' - ', ' -- ')})})}),(0,A.jsx)(d.az,{children:(0,A.jsx)(d.A_,{errorMessage:v.join(", "),id:"boardEditName",name:"boardName",onChange:({value:e})=>g(e),placeholder:e?void 0:c._('Like "Places to Go" or "Recipes to Make"', ' - ', ' -- '),size:"lg",value:x})})]}),_&&(0,A.jsxs)(o.Fragment,{children:[(0,A.jsxs)(d.az,{padding:3,children:[(0,A.jsx)(d.az,{marginBottom:2,children:(0,A.jsx)(d.JU,{htmlFor:"secret",children:(0,A.jsx)(d.KJ,{size:"100",children:c._('Secret', 'secret board', 'secret board')})})}),(0,A.jsx)(d.az,{children:(0,A.jsx)(d.dO,{id:"secret",onChange:m,switched:P})})]}),(0,A.jsx)(d.so,{alignItems:"stretch",flex:"grow",justifyContent:"start",overflow:"hidden",children:(0,A.jsx)(d.az,{width:"100%",children:(0,A.jsx)($,{onSelectedCollaboratorsChange:a,preselectedCollaborators:s})})})]}),!_&&(0,A.jsx)(o.Fragment,{children:(0,A.jsxs)(d.az,{padding:3,children:[(0,A.jsx)(d.az,{marginBottom:2,children:(0,A.jsx)(d.JU,{htmlFor:"protected",children:(0,A.jsx)(d.KJ,{size:"100",children:c._('Protected board (not listed on user\'s profile)', 'protected board', 'protected board')})})}),(0,A.jsx)(d.az,{children:(0,A.jsx)(d.dO,{disabled:!0,id:"protected",onChange:()=>void 0,switched:!0})})]})}),(0,A.jsx)(d.az,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderBottomLeftRadius:"32px",borderBottomRightRadius:"32px"}},"data-test-id":"create-board-footer-default",display:"flex",elevation:"shadowFloating",justifyContent:"between",left:h,paddingX:4,paddingY:2,position:"absolute",right:!h,width:720,children:k})]})})})}var ee=i(952756);function et(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let ei=(void 0!==s||(s=i(399342)).hash&&"56f620fbd63abf8f7cb32f9a378198f8"!==s.hash&&console.error("The definition of 'BoardsPane_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),s);class ea extends o.Component{constructor(...e){super(...e),et(this,"state",{inviteQueue:{},newName:"",selectedSectionBoard:this.props.boardWithSection||null,showCreate:this.props.showCreate||!1}),et(this,"close",()=>{let{selectedSectionBoard:e,showCreate:t}=this.state,{onClose:i}=this.props;t&&e?this.setState({showCreate:!1},this.manageModalTitle):e?this.setState({selectedSectionBoard:null},this.manageModalTitle):i()}),et(this,"sendInvites",e=>{let{inviteQueue:t}=this.state;Object.keys(t).forEach(i=>{t[i].resource(e.id??"",[i])})}),et(this,"handleInvite",e=>{let{inviteQueue:t}=this.state;if(t[e.id]){let i={...t};delete i[e.id],this.setState({inviteQueue:i})}else{let i={...t,[e.id]:e};this.setState({inviteQueue:i})}}),et(this,"handleBoardCreate",e=>{let{onBoardCreated:t}=this.props;this.handleBoardSave(e,!0),t&&t(e)}),et(this,"handleBoardSave",(e,t)=>{let{selectedSectionBoard:i}=this.state,{onBoardSave:a,invalidatePinBetterSaveResource:n,invalidateResource:s}=this.props;if(s(),n(),"board_section"===e.type)return i?a(i,{...e,type:"boardsection"},t):void 0;if("board"!==e.type)return;let{section_count:l=0}=e;!i&&"number"==typeof l&&l>0?this.setState({selectedSectionBoard:e},this.manageModalTitle):(this.sendInvites(e),a(e,void 0,t))}),et(this,"handleCreate",e=>t=>{t=t||"",this.setState({newName:t,showCreate:!0},this.manageModalTitle),this.props.logContextEvent({event_type:101,component:e?13105:13025,element:e?10306:249})}),et(this,"manageModalTitle",()=>{let{setModalTitle:e}=this.props,{selectedSectionBoard:t,showCreate:i}=this.state;e&&e(i&&t?this.props.i18n._('Add section', 'Repin title for making a board section', 'Repin title for making a board section'):i&&!t?this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board'):t&&!i?this.props.i18n._('Choose section', 'Repin title for choosing a board section', 'Repin title for choosing a board section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board'))})}render(){let{boardSavedTo:e,hidePlaceholder:t,isRepin:i,isSelectMode:a,pin:n,preselectedCollaborators:s,setModalTitle:l,suggestedBoardTitle:r}=this.props,{newName:o,selectedSectionBoard:c,showCreate:h}=this.state,u=!!c,p=!l;return(0,A.jsxs)(d.az,{display:"flex",position:"relative",width:"100%",children:[!h&&(0,A.jsx)(d.az,{direction:"column",display:"flex",marginTop:4,width:"100%",children:c?(0,A.jsx)(N,{board:c,boardSavedTo:e,isRepin:i,isSelectMode:a,onSectionCreate:this.handleCreate(u),onSectionSelected:this.handleBoardSave}):(0,A.jsx)(K,{boardSavedTo:e,isRepin:i,isSelectMode:a,onBoardCreate:this.handleCreate(u),onBoardSelected:this.handleBoardSave,pinKey:n})}),h&&!c&&(0,A.jsx)(Z,{hidePlaceholder:t,onCancel:this.close,onCreate:this.handleBoardCreate,onInvite:this.handleInvite,prefilledName:o||r,preselectedCollaborators:s,showTitle:p,suggestedBoardName:r}),h&&c&&(0,A.jsx)(ee.A,{board:c,completeCreateSectionAction:this.handleBoardSave,initialName:o,isRepin:i,onClearModal:this.close,showTitle:p})]})}componentDidMount(){(0,f.A)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")}}function en({pinKey:e,...t}){(0,o.useEffect)(()=>{(0,f.A)("BoardsPane","/app/www/save/pin-to-board/BoardsPane/BoardsPane.tsx")},[]);let{logContextEvent:i}=(0,w.o)(),a=(0,p.A)(),n=(0,u.A)(ei,e),s=(0,y.wA)();return(0,A.jsx)(ea,{...t,i18n:a,invalidatePinBetterSaveResource:()=>{s((0,P.Q5)("BoardPickerBoardsResource",{field_set_key:"board_picker"}))},invalidateResource:()=>{s((0,P.Q5)("BoardPickerBoardsResource",T(n?.entityId)))},logContextEvent:i,pin:n})}var es=i(785657);function el(e,t,i){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let er=(void 0!==l||(l=i(414227)).hash&&"9382108243b7924dca621b4886b38390"!==l.hash&&console.error("The definition of 'PinToBoard_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),l),eo=(void 0!==r||(r=i(433282)).hash&&"4435ca5e135b834ea8a6425f68eb2f7a"!==r.hash&&console.error("The definition of 'PinToBoard_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),r);class ed extends o.PureComponent{constructor(...e){super(...e),el(this,"pinImageRef",(0,o.createRef)()),el(this,"handleSavePinToBoard",(e,t,i)=>{let{handleSaveToBoard:a}=this.props;a(e,t,i)}),el(this,"close",()=>{let{handleAbort:e}=this.props;e()}),el(this,"dismissModal",()=>{let{dismissModal:e}=this.props;e&&e()})}render(){let{boardSavedTo:e,boardWithSection:t,color:i,displaySuccessAnimation:a,handleNewBoardAnimationCompletion:n,hidePlaceholder:s,isInModal:l,newPin:r,pin:h,preselectedCollaborators:u,onBoardCreated:p,sensitiveContentNotice:g,setModalTitle:f,showCreate:y,shouldRenderContent:x,suggestedBoardTitle:b,updateDescription:v,urlPinInfo:S,shuffleAsset:w}=this.props,P=S?.description||S?.link||S?.imageUrl;if(!h&&!P||!x)return null;if(y&&t)return(0,A.jsx)(j,{board:t,completeCreateSectionAction:this.handleSavePinToBoard,height:h?.images_236x?.height??0,onClose:this.close,url:h?.images_236x?.url??S?.imageUrl??"",width:h?.images_236x?.width??0});let k=null;r&&r.board&&(k=r.board.name);let z=g&&g.title||this.props.modalTitle,C=g?(0,A.jsx)(m.A,{inModal:!0,notices:[g]}):(0,A.jsx)(d.so,{alignItems:"stretch",dataTestId:"pin-to-board-content",height:"calc(90vh - 97px)",justifyContent:"center",maxHeight:"703px",width:"100%",children:(0,A.jsxs)(o.Fragment,{children:[(0,A.jsxs)(d.az,{color:"default",display:"flex",height:"100%",overflow:"hidden",position:"relative",rounding:200,width:"100%",children:[(0,A.jsx)(d.so,{alignItems:"stretch",direction:"column",justifyContent:"between",width:"40%",children:(0,A.jsx)(d.az,{alignItems:"center",direction:"column",display:"flex",flex:"grow",justifyContent:"start",marginTop:3,children:(0,A.jsx)(es.A,{color:i,pinImageRef:this.pinImageRef,pinKey:h,shuffleAssetKey:w??null,updateDescription:v,urlPinInfo:S})})}),(0,A.jsx)(d.so,{alignItems:"stretch",width:"60%",children:(0,A.jsx)(en,{boardSavedTo:e,boardWithSection:t,hidePlaceholder:s,isRepin:!0,onBoardCreated:p,onBoardSave:this.handleSavePinToBoard,onClose:this.close,pinKey:h,preselectedCollaborators:u,setModalTitle:l?f:void 0,showCreate:y,suggestedBoardTitle:b})})]}),a&&(0,A.jsx)(_.A,{onDismiss:()=>{n(),this.dismissModal()},pinImageRef:this.pinImageRef,pinKey:h,selectedBoardName:k,shuffleAssetKey:w??null})]})});if(!l)return C;let T=z||this.props.i18n._('Repin modal', 'save.pin-to-board.PinToBoard.PinToBoard', 'Accessibility label on modal');return(0,A.jsx)(c.Ay,{accessibilityModalLabel:T,heading:z,onDismiss:this.close,size:"md",children:C})}}el(ed,"defaultProps",{pwtAuxData:{}});let ec=function({pinKey:e,shuffleAssetKey:t,suggestedBoardTitle:i,...a}){let n=(0,p.A)(),s=(0,h.A)(),l=(0,u.A)(er,e),r=(0,u.A)(eo,t),{checkExperiment:o}=(0,g.A)(),d=!!l?.entityId&&!i&&o("web_curation_sabr_board_title_suggestion").anyEnabled,c=(0,S.A)({pinId:l?.entityId,skip:!d});return(0,A.jsx)(ed,{...a,hidePlaceholder:d,i18n:n,pin:l,shuffleAsset:r,suggestedBoardTitle:i||c,viewer:s})}},433414(e,t,i){i.d(t,{A:()=>g});var a=i(859471),n=i(106386),s=i(753771),l=i(457315),r=i(693154),o=i(538329),d=i(542975),c=i(703672),h=i(734696),u=i(394550),p=i(720407);function g({onCreate:e,prefilledName:t,suggestedBoardName:i}){let g=(0,o.A)(),m=(0,n.d4)(({advertiser:e})=>e),_=(0,n.wA)(),f=(0,r.A)(),y=!m||f.isAuth&&m.owner_user_id===f.id,x=m&&m.id,b=(0,p.A)(),[v,A]=(0,a.useState)({createBoardError:null,inputName:t||"",nameValidatorErrors:[],privacy:y?s.A.BoardPrivacy.PUBLIC:s.A.BoardPrivacy.PROTECTED,saving:!1}),[j,S]=(0,a.useState)(t);t!==j&&(S(t),t&&!v.inputName&&A(e=>({...e,inputName:t})));let w=()=>{let{inputName:t,privacy:a}=v;A({...v,saving:!0,createBoardError:null}),b({boardCreateOptions:{name:t,privacy:a,...!y&&x?{advertiser_id:x}:Object.freeze({}),aux_data:{...i?{suggested_board_name:i}:{},source:"board_picker"}}}).then(t=>{A({...v,saving:!1}),e(t)}).catch(e=>{let t=g._('Uh oh! Something went wrong.', ' - ', ' -- ');if("string"==typeof e)t=e;else{let i=(0,l.A)(e,"message");if(i){let a=(0,l.A)(e,"message_detail");t=a?`${i} ${a}`:i}}A({...v,saving:!1,createBoardError:t})}),_((0,c.Q5)("BoardsResource",(0,u.A)(f.isAuth?f.username:"",a===s.A.BoardPrivacy.SECRET)))};return{handleChangeName:(e,t)=>{A({...v,inputName:e,nameValidatorErrors:(0,h.Yl)([(0,h.mg)({message:g._('Don\'t forget to name your board!', ' - ', ' -- ')}),(0,h.RU)({max:s.A.MAX_CHARS_FOR_BOARD_TITLE,maxErrorString:(0,d.vQ)(g._('Please enter no more than {{ maxLength }} characters.', 'Validation error when a user input is too long', 'Validation error when a user input is too long'),{maxLength:s.A.MAX_CHARS_FOR_BOARD_TITLE}).join("")})],e),createBoardError:null}),t&&w()},handleChangePrivacy:()=>{A({...v,privacy:v.privacy===s.A.BoardPrivacy.SECRET?s.A.BoardPrivacy.PUBLIC:s.A.BoardPrivacy.SECRET})},handleCreate:w,isAdAccountOwner:y,state:v}}},260787(e,t,i){i.d(t,{j:()=>a});let a={CUSTOM:0,HIDDEN:1,HOPE:2,LOVE:3,NONE:4}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/83578-50f96104b8a5ed16.mjs.map