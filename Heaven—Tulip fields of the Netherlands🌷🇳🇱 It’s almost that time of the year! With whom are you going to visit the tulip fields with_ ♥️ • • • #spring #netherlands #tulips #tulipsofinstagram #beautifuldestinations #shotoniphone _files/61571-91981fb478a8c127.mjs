(self.modernJsonp=self.modernJsonp||[]).push([["61571"],{754423(e,t,r){r.r(t),r.d(t,{default:()=>i});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardButton_board"}],type:"Board",abstractKey:null};a.hash="0e2c441822700a6145ea7cd142c0425b";let i=a},52919(e,t,r){r.r(t),r.d(t,{default:()=>i});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_coverPin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],type:"CoverPin",abstractKey:null};a.hash="35b139c2e951baaa6624b30e45f913ce";let i=a},470166(e,t,r){r.r(t),r.d(t,{default:()=>i});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardButton_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardFlyout_board"}],type:"Board",abstractKey:null};a.hash="8d95294efe15498023c69669c6a41e71";let i=a},638025(e,t,r){r.r(t),r.d(t,{default:()=>i});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardFlyout_board",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null}],type:"Board",abstractKey:null};a.hash="f459445ee8d1ea0db022e490ef5a2e80";let i=a},443482(e,t,r){r.d(t,{A:()=>l});var a=r(61163),i=r(859471),n=r(150880),o=r(640992),s=r(562615);let l=({animationData:e})=>{(0,i.useEffect)(()=>{(0,a.A)("HeaderIconLottie","/app/common/react/components/growth/news/NewsHub/HeaderIcon/HeaderIconLottie.tsx")},[]);let{animationContainerRef:t}=(0,o.A)({animationData:e,loop:!0,autoplay:!0});return(0,i.useMemo)(()=>(0,s.jsx)(n.az,{ref:t,"data-testid":"lottie-header-icon",height:"100%",left:!0,position:"absolute",top:!0,width:"100%"}),[t])||null}},662449(e,t,r){r.d(t,{V:()=>h,Xv:()=>_,qD:()=>d});var a=r(859471),i=r(979638),n=r(987628),o=r(567365),s=r(562615);let{Provider:l,get:d}=(0,n.A)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function u(e,t){let r={action:t.action,location:t.location,matchedPath:t.matchedPath};if(t.location===e.current?.location)return e;switch(t.action){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(r.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:t.action},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:t.action},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:r,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath}]:e.previous};case"REPLACE":return{...e,current:r};default:return e}}function h(){let{current:e,previous:t}=d();return(0,a.useMemo)(()=>e?t.concat(e):t,[e,t])}function _({children:e}){let t=(0,i.wQ)(),r=(0,i.zy)(),n=(0,o.A)(),[d,c]=(0,a.useReducer)(u,{forward:[],current:{action:t,location:r,matchedPath:n},previous:[]}),h=(0,a.useRef)(r),_=(0,a.useRef)(n);return(h.current!==r||_.current!==n)&&(c({action:t,location:r,matchedPath:n}),h.current=r,_.current=n),(0,s.jsx)(l,{value:d,children:e})}},994053(e,t,r){r.d(t,{E4:()=>l,GF:()=>u,Wj:()=>o,Y7:()=>d,sE:()=>s,xE:()=>c});var a=r(435108),i=r(257300),n=r(393320);function o(e){for(let t of Array.isArray(e.data)?e.data:[e.data]){let{object_map:e}=t;for(let r of t.content_items){let{content_object_id:t}=r;t&&e[t]&&(r.content_object=e[t]);let{action_object_id:a}=r;a&&e[a]&&(r.action_object=e[a])}if(t.header_icon_object_ids)for(let r of(t.header_icon_objects=[],t.header_icon_object_ids))e[r]&&t.header_icon_objects.push(e[r]);if(t.subscribable_object_ids)for(let e of(t.subscribable_objects=[],t.subscribable_object_ids))t.object_map[e]&&t.subscribable_objects.push(t.object_map[e]);delete t.object_map,delete t.subscribable_object_ids,delete t.header_icon_object_ids}}let s=(e,t)=>t.some(t=>e&1<<t),l=({lastUpdatedAt:e})=>{let t=(0,n.A)(),r=new Date(e);return new Date().getTime()-r.getTime()>a.Wm&&r.setHours(0,0,0,0),` ${t(r,!0)}`};function d(e,t){return(0,i.A)({url:"/v3/news_hub/{news_id}/fatigue/{interest_id}/",urlParams:{news_id:e,interest_id:t},method:"POST"})}function c(e,t){return(0,i.A)({url:"/v3/news_hub/{news_id}/fatigue/{interest_id}/",urlParams:{news_id:e,interest_id:t},method:"DELETE"})}function u(e,t){return(0,i.A)({url:"/v3/news_hub/hide/batch/",method:"PUT",data:{news_ids:[e],should_hide:t}})}},805170(e,t,r){r.d(t,{RQ:()=>i,zD:()=>a});let a={PUSH:"push",EMAIL:"email",NEWS:"news",WEB_PUSH:"web_push"},i=new Set([203])},792213(e,t,r){function a(e){return e===window?window.innerHeight:e.clientHeight}function i(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}function n(e){return e===window&&document.documentElement?document.documentElement.scrollHeight:e.scrollHeight}function o(e){return e===window?i():e.scrollTop}r.d(t,{Hj:()=>n,UI:()=>a,ct:()=>i,qM:()=>o})},791117(e,t,r){r.d(t,{nA:()=>y,p$:()=>A,Vc:()=>b});var a=r(859471),i=r(106386),n=r(829597),o=r.n(n),s=r(427471),l=r(987628),d=r(257300),c=r(652567),u=r(33658),h=r(596664);let _={feature_map:Object.freeze({})},g=(e,t)=>{let r={...(0,h.A)(e,t),...t.reaction_counts?{reaction_counts:t.reaction_counts}:Object.freeze({}),...t.tags?{tags:t.tags}:Object.freeze({}),...t.tagged_users?{tagged_users:t.tagged_users}:Object.freeze({})};return e&&(0,u.Ay)(e,r)?e:r},m=(e,t)=>{if(e=e||_,"FETCH_COMPLETE"===t.type){let{payload:{resource:r,options:a={}}}=t,{data:i}=t.payload.response.resource_response;if("AggregatedCommentReplyFeedResource"===r||"ApiResource"===r&&a.url===`/v3/aggregated_comments/${a.data?.aggregated_comment}/replies/`||"ApiResource"===r&&a.url===`/v3/aggregated_pin_data/${a.data?.aggregated_pin_data}/comments/`||"DidItCommentsResource"===r){let t=i||[],r=e?t.reduce((t,r)=>(t[r.id]=g(e[r.id],r),t),{}):{};return{...e,...r}}if("UnifiedCommentsResource"===r&&i&&i.length>0){let t=i.filter(e=>"aggregatedcomment"===e.type).reduce((t,r)=>(t[r.id]=g(e?.[r.id],r),t),{});return{...e,...t}}if("UnifiedCommentsPreviewResource"===r&&i&&i.length>0){let t=i.map(e=>e.aggregated_comment).reduce((t,r)=>(r&&(t[r.id??""]=g(e?.[r.id??""],r)),t),{}),r=i.map(e=>e.creator_reply).reduce((t,r)=>(r&&r.id&&(t[r.id]=g(e?.[r.id],r)),t),{});return{...e,...t,...r}}if("ApiResource"===r&&"/v3/aggregated_comments/features/"===a.url&&i&&Object.keys(i).length>0)return{...e,feature_map:i}}else if("AGGREGATED_COMMENT_CREATED"===t.type){let{payload:{aggregatedComment:r}}=t;return r.id?{...e,[r.id]:r}:e}else if("AGGREGATED_COMMENT_DELETED"===t.type||"AGGREGATED_COMMENT_HIDDEN"===t.type){let{payload:{aggregatedCommentId:r}}=t,a={...e};return delete a[r],a}else if("AGGREGATED_COMMENT_HIDDEN_FOR_USER"===t.type){let{payload:{userId:r}}=t;return Object.fromEntries(Object.entries(e??{}).filter(e=>e[1].user?.id!==r))}else if("AGGREGATED_COMMENT_UPDATED"===t.type){let{payload:{data:r}}=t;return{...e,[r.id]:g(e?.[r.id],r)}}else if("AGGREGATED_COMMENT_LIKE_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],i=a?.reaction_counts[1]||0,n={1:r.reaction_by_me?i+1:i-1},o={...a,reaction_by_me:r.reaction_by_me,reaction_counts:n};return{...e,[r.id]:o}}else if("AGGREGATED_COMMENT_HELPFUL_TOGGLED"===t.type){let{payload:{data:r}}=t,a=e?.[r.id],i=a?.helpful_count||0,n=r.marked_helpful_by_me?i+1:i-1,o={...a,marked_helpful_by_me:r.marked_helpful_by_me,helpful_count:n};return{...e,[r.id]:o}}else if("AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED"===t.type){let{payload:{data:r}}=t,a={...e?.[r.aggregated_comment_id],highlighted_by_pin_owner:r.is_highlighted};return{...e,[r.aggregated_comment_id]:a}}else if("AGGREGATED_COMMENT_FEATURES_UPDATED"===t.type){let{payload:{data:{featureMap:r}}}=t;return{...e,feature_map:{...e?.feature_map,...r}}}else if("UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT"===t.type){let{payload:{increment:r,id:a}}=t,i=e?.[a];if(!i)return e;let n={...i,comment_count:i.comment_count+r};return{...e,[a]:n}}else if("DELETE_COMMENT_MENTION"===t.type){let{payload:{aggregatedCommentId:r,tagged_users:a,tags:i,text:n}}=t,o={...e?.[r],tagged_users:a,tags:i,...n?{text:n}:{}};return{...e,[r]:o}}else if("GET_COMMENT_TRANSLATION"===t.type){let{payload:{aggregatedCommentId:r,translatedText:a}}=t,i={...e?.[r],translatedText:a};return{...e,[r]:i}}return e};var p=r(562615);let{Provider:f,get:E}=(0,l.A)("AggregatedComments");function y({children:e}){let t=(0,i.d4)(({resources:e})=>e?.UnifiedCommentsResource),r=_;t&&Object.values(t).forEach(e=>{let t=e.data?.filter(e=>"aggregatedcomment"===e.type),a=t?.reduce((e,t)=>(e[t.id]=g(r[t.id],t),e),{});r={...r,...a}});let[n,o]=(0,a.useReducer)(m,r),s=e=>{o({type:"FETCH_COMPLETE",payload:e})};(0,c.jY)("AggregatedCommentReplyFeedResource",s),(0,c.gw)("AggregatedCommentReplyFeedResource",s),(0,c.jY)("ApiResource",s),(0,c.gw)("ApiResource",s),(0,c.jY)("DidItCommentsResource",s),(0,c.gw)("DidItCommentsResource",s),(0,c.jY)("UnifiedCommentsPreviewResource",s),(0,c.gw)("UnifiedCommentsPreviewResource",s),(0,c.jY)("UnifiedCommentsResource",s),(0,c.gw)("UnifiedCommentsResource",s);let l=(0,a.useMemo)(()=>({aggregatedComments:n,dispatch:o}),[n,o]);return(0,p.jsx)(f,{value:l,children:e})}function b(){let{dispatch:e}=E();return(0,a.useMemo)(()=>({aggregatedCommentCreated(t,r){e({type:"AGGREGATED_COMMENT_CREATED",payload:{parentId:t,aggregatedComment:r}})},aggregatedCommentDeleted:(t,r)=>{e({type:"AGGREGATED_COMMENT_DELETED",payload:{parentId:t,aggregatedCommentId:r}})},aggregatedCommentHidden:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN",payload:{aggregatedCommentId:t}})},aggregatedCommentsHiddenForUser:t=>{e({type:"AGGREGATED_COMMENT_HIDDEN_FOR_USER",payload:{userId:t}})},flagAggregatedComment:async({isAggregatedComment:e=!0,commentId:t,reason:r,detailedReasons:a})=>e?(0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/flag/",urlParams:{aggregated_comment:t},method:"PUT",data:{reason:r,detailed_reasons:a}}):(0,d.A)({url:"/v3/did_it/{user_did_it_data}/flag/",urlParams:{user_did_it_data:t},method:"PUT",data:{reason:r,detailed_reasons:a}}),deleteCommentMention:async t=>{let{resource_response:r}=await (0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/mentions/",urlParams:{aggregated_comment:t},data:{fields:["aggregatedcomment.id","aggregatedcomment.tags","aggregatedcomment.tagged_users()","aggregatedcomment.text"]},method:"DELETE"}),a=r.data;a?.id&&e({type:"DELETE_COMMENT_MENTION",payload:{aggregatedCommentId:a.id,tagged_users:a.tagged_users??[],tags:a.tags??[],text:a.text??""}})},translateAggregatedComment:async t=>{try{let{resource_response:r}=await (0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/translate/",urlParams:{aggregated_comment:t},method:"GET"}),a=r.data??"";e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:a}})}catch(r){e({type:"GET_COMMENT_TRANSLATION",payload:{aggregatedCommentId:t,translatedText:""}})}},toggleAggregatedCommentHelpful:({aggregatedCommentId:t,isMarkedHelpfulByMe:r,orbacSubjectId:a})=>{(0,d.A)({url:`/v3/helpful/1/${t}/`,method:r?"DELETE":"POST",data:a?{orbac_subject_id:a}:{}}),e({type:"AGGREGATED_COMMENT_HELPFUL_TOGGLED",payload:{data:{id:t,marked_helpful_by_me:!r}}})},toggleAggregatedCommentHighlight:async({aggregatedCommentId:t,pinId:r,isHighlighted:a})=>{o()(t,"Could not find comment"),o()(r,"Could not find Pin"),await (0,d.A)({url:"/v3/aggregated_comments/pin/highlight/",method:"PUT",data:{aggregated_comment:t,pin:r,highlight:!a}}),e({type:"AGGREGATED_COMMENT_HIGHLIGHT_TOGGLED",payload:{data:{aggregated_comment_id:t,pin_id:r,is_highlighted:!a}}})},toggleAggregatedCommentLike:({aggregatedCommentId:t,isLikedByMe:r,orbacSubjectId:a})=>{(0,d.A)({url:"/v3/aggregated_comments/{aggregated_comment}/react/",urlParams:{aggregated_comment:t},method:r?"DELETE":"POST",data:{reaction_type:1,...a?{orbac_subject_id:a}:{}}}),e({type:"AGGREGATED_COMMENT_LIKE_TOGGLED",payload:{data:{id:t,reaction_by_me:+!r}}})},updateAggregatedComment:async({commentId:t,force:r,orbacSubjectId:a,tags:i,text:n})=>{let{resource_response:o}=await s.A.create("AggregatedCommentResource",{commentId:t,force:r,tags:i,text:n,...a?{orbacSubjectId:a}:{}}).callUpdate({showError:!1}),{tagged_users:l}=o.data??{};e({type:"AGGREGATED_COMMENT_UPDATED",payload:{data:{id:t,tagged_users:l.map(e=>({...e})),tags:JSON.parse(i),text:n}}})},updateAggregatedCommentFeatures:async({userId:t,featureMap:r,passcode:a,userConfirmPasscode:i})=>{let{resource_response:n}=await (0,d.A)({url:"/v3/aggregated_comments/features/",method:"PUT",data:{user:t,feature_map:{comments_phrase_filter_list:r.comments_phrase_filter_list??void 0,comments_phrase_filter_list_enabled:r.comments_phrase_filter_list_enabled??void 0,pinner_comments_phrase_filter_list:r.pinner_comments_phrase_filter_list??void 0,pinner_comments_phrase_filter_list_enabled:r.pinner_comments_phrase_filter_list_enabled??void 0},passcode:a,user_confirm_skip_passcode:i??!1},sendAsJson:!0});e({type:"AGGREGATED_COMMENT_FEATURES_UPDATED",payload:{data:{featureMap:n.data??Object.freeze({})}}})},updateCommentCount:(t,r)=>{e({type:"UPDATE_AGGREGATED_COMMENT_COMMENT_COUNT",payload:{increment:r,id:t}})}}),[e])}function A(){let{aggregatedComments:e}=E();return e}},958735(e,t,r){r.d(t,{C3:()=>u,p1:()=>h,xP:()=>c});var a=r(859471),i=r(987628);let n={hiddenNews:{}};function o(e,t){if(e=e||n,"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS"!==t.type)return e;{let{payload:{id:r,isHidden:a}}=t;return{hiddenNews:{...e?.hiddenNews,[r]:a}}}}var s=r(562615);let{Provider:l,get:d}=(0,i.A)("HiddenNews");function c({children:e}){let[t,r]=(0,a.useReducer)(o,n),i=(0,a.useMemo)(()=>({dispatch:r,hiddenNews:t}),[r,t]);return(0,s.jsx)(l,{value:i,children:e})}function u(){let{dispatch:e,hiddenNews:{hiddenNews:t}}=d();return(0,a.useMemo)(()=>({updateNewsIdToHiddenNews:(t,r)=>{e({type:"HIDDEN_NEWS_ADD_ID_TO_HIDDEN_STATUS",payload:{id:t,isHidden:r}})},getShownNewsCount:e=>e.filter(e=>e&&e.id&&!(e.id in t&&t[e.id])).length}),[e,t])}function h(){let{hiddenNews:e}=d();return e}},795275(e,t,r){r.d(t,{bM:()=>u,lz:()=>h,vH:()=>_});var a=r(859471),i=r(987628),n=r(652567),o=r(378263),s=r(562615);let l=()=>r.e("54751").then(r.bind(r,639906)),{Provider:d,get:c}=(0,i.A)("NativeEngagements");function u({children:e}){let[t,r]=(0,o.A)(l,[]);(0,n.jY)("NativeInteractionsResource",e=>{r({type:"FETCH_COMPLETE",payload:e})}),(0,n.gw)("NativeInteractionsResource",e=>{r({type:"FETCH_MORE_COMPLETE",payload:e})});let i=(0,a.useMemo)(()=>({dispatch:r,nativeEngagements:t}),[r,t]);return(0,s.jsx)(d,{value:i,children:e})}function h(){let{dispatch:e}=c();return(0,a.useMemo)(()=>({nativeEngagementsHiddenForUser:t=>{e({type:"NATIVE_ENGAGEMENT_HIDDEN_FOR_USER",payload:{userId:t}})}}),[e])}function _(){let{nativeEngagements:e}=c();return e}},21405(e,t,r){r.d(t,{gB:()=>p,o6:()=>m,yk:()=>g});var a=r(859471),i=r(743372),n=r(987628),o=r(257300),s=r(652567),l=r(378263),d=r(562615);let c=()=>r.e("5985").then(r.bind(r,966744));function u(e,t,r=!1){return{type:"TOPIC_FOLLOW",payload:{id:e,value:t,showTooltip:r}}}let{Provider:h,get:_}=(0,n.A)("Topics");function g({children:e}){let[t,r]=(0,l.A)(c,{}),i=e=>{r({type:"TOPIC_FETCH_COMPLETE",payload:e})};(0,s.jY)("InterestFollowingResource",i),(0,s.jY)("InterestResource",i);let n=(0,a.useMemo)(()=>({dispatch:r,topics:t}),[r,t]);return(0,d.jsx)(h,{value:n,children:e})}function m(){let{dispatch:e}=_(),t=(0,i.A)();return(0,a.useMemo)(()=>({follow:async(r,a=!1)=>{e(u(r,!0,a));try{await (0,o.A)({url:"/v3/users/{user}/interests/favorited/{interest}/",urlParams:{user:"me",interest:r},method:"PUT",data:{image_size:1,fields:["interest.images[300x300(ir.24)]","interest.name"]}}),t({event_type:601,object_id_str:r})}catch(t){e(u(r,!1,a))}},unfollow:async r=>{e(u(r,!1));try{await (0,o.A)({url:"/v3/users/{user}/interests/favorited/{interest}/",urlParams:{user:"me",interest:r},method:"DELETE"}),t({event_type:602,object_id_str:r})}catch(t){e(u(r,!0))}}}),[e,t])}function p(){let{topics:e}=_();return e}},653956(e,t,r){r.d(t,{A:()=>w});var a,i,n=r(61163),o=r(859471);r(669897);var s=r(150880),l=r(535273),d=r(538329),c=r(921591),u=r(601185),h=r(844255),_=r(971289),g=r(459951),m=r(223733),p=r(562615);function f({backgroundColor:e="darkGray",iconColor:t="inverse",iconSize:r,privacy:a,size:i=20}){(0,o.useEffect)(()=>{(0,n.A)("PrivacyIcon","/app/www/board/duplo/PrivacyIcon.tsx")},[]);let l=(0,d.A)();return(0,p.jsx)(s.az,{alignItems:"center",color:e,direction:"column",display:"flex",height:i,justifyContent:"center",rounding:"circle",width:i,children:(0,p.jsx)(s.In,{accessibilityLabel:l._('Secret board icon', 'Icon indicating that a board is secret', 'Icon indicating that a board is secret'),color:t,icon:"secret"===a?"lock":"shield",size:r??i/2})})}var E=r(831707),y=r(261682);let b=(void 0!==a||(a=r(754423)).hash&&"0e2c441822700a6145ea7cd142c0425b"!==a.hash&&console.error("The definition of 'DrawerImageGroup_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),A=(void 0!==i||(i=r(52919)).hash&&"35b139c2e951baaa6624b30e45f913ce"!==i.hash&&console.error("The definition of 'DrawerImageGroup_coverPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),v="100%";function w(e){(0,o.useEffect)(()=>{(0,n.A)("DrawerImageGroup","/app/www/board/DrawerImageGroup.tsx")},[]);let t=(0,d.A)(),{boardKey:r,canEdit:a,containerBackgroundColor:i="white",coverPhoto:w,coverPinKey:T,fullSize:I,hideSecretBoardIcon:R,images:x,isActive:S,isHomePageBoards:C,isProtected:j,isSecret:D,layout:G,onEditClick:M,renderAsImage:N,showSensitivityScreen:P}=e,O=(0,_.qJ)(),{isRTL:L,isAuthenticated:H}=(0,h._8)(),z=(0,l.A)(b,r),F=(0,l.A)(A,T),U=(0,o.useRef)(null),B=O&&H,{checkExperiment:k}=(0,u.A)(),[W,K]=(0,o.useState)(!1);(0,o.useEffect)(()=>{if(S&&B&&z&&!D&&!W){let e=k("ce_dweb_board_preview_share_button").anyEnabled,t=window.setTimeout(()=>{K(e)},0);return()=>clearTimeout(t)}return()=>{}},[S,B,z,D,W,k]);let Y=(0,o.useRef)(void 0);(0,o.useEffect)(()=>{S?Y.current&&(clearTimeout(Y.current),Y.current=void 0):Y.current||(Y.current=window.setTimeout(()=>{Y.current=void 0,S||K(!1)},200))},[S]),(0,o.useEffect)(()=>()=>{Y.current&&clearTimeout(Y.current)},[]);let J=x[0],$=!w&&x[0]?.name||t._('Cover image', 'DrawerImageGroup', 'Alt text for the main image of a board'),V=[,,].fill(0),q=new s.rk(1),X=J?.url?(0,p.jsx)(s._V,{alt:$,color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:J.url}):(0,p.jsx)(s.az,{color:"secondary",height:"100%",width:"100%"}),Q=P?{filter:"blur(20px)"}:{};return(0,p.jsxs)(s.n1,{height:I?"100%":void 0,rounding:400,width:"100%",children:[(0,p.jsxs)(s.so,{alignItems:"stretch",direction:"row",height:"100%",justifyContent:"start",children:[(0,p.jsx)(s.VP,{span:8,children:(0,p.jsx)(s.az,{dangerouslySetInlineStyle:{__style:Q},height:I?"100%":void 0,position:"relative",children:(0,p.jsx)(s.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:v}},overflow:"hidden",width:"100%",children:(0,p.jsxs)(s.az,{ref:U,bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:C?"#FFDFE9":i,borderStyle:"solid",borderWidth:"1px 0 1px 1px",borderRadius:"16px 0 0 16px"}},"data-test-id":"drawer-image-group-first-image-container",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:[(j||D)&&!R&&(0,p.jsx)(s.az,{left:!L,margin:2,position:"absolute",right:L,top:!0,zIndex:q,children:(0,p.jsx)(f,{backgroundColor:"default",iconColor:"default",privacy:D?"secret":"protected",size:B?32:24})}),w?.url?(0,p.jsx)(s.n1,{height:"100%",wash:!0,width:"100%",children:(0,p.jsx)(m.A,{customCover:w.isCustom,height:"square"===G?157:213,imgPos:F?function(e){let{crop:t,size:r}=e||{};if(Array.isArray(t)&&Array.isArray(r))return{x:t[0]||0,y:t[1]||0,width:r[0]||0,height:r[1]||0}}(F):w.position||{width:0,height:0,x:0,y:0},imgUrl:F?.imageUrl??(w.url||""),renderAsImage:N,width:Math.floor(("square"===G?236:320)/3*2)})}):X]})})})}),(0,p.jsx)(s.VP,{span:4,children:(0,p.jsxs)(s.az,{dangerouslySetInlineStyle:{__style:Q},height:"100%",children:[(a||W)&&(0,p.jsxs)(s.az,{bottom:!0,display:W?"flex":void 0,left:L,margin:2,opacity:100*!!S,position:"absolute",right:!L,zIndex:q,children:[W&&(0,p.jsx)(s.Rp,{onTap:({event:e})=>{e.preventDefault(),e.stopPropagation()},children:(0,p.jsx)(s.az,{marginEnd:1,children:(0,p.jsx)(y.A,{boardKey:z,handleCreatePincode:()=>{},iconColor:"default",size:"sm"})})}),a&&(0,p.jsx)(s.Rp,{onTap:({event:e})=>M?.(e),children:(0,p.jsx)(s.K0,{accessibilityLabel:t._('Edit', 'DrawerImageGroup.edit', 'Icon indicating that a board is editable'),bgColor:"default",icon:"pencil",iconColor:"default",size:"sm",tabIndex:-1})})]}),V.map((e,t)=>{let r=w?x[t]:x[t+1];return(0,p.jsx)(s.az,{height:I?"50%":void 0,position:"relative",children:(0,p.jsx)(s.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:v}},overflow:"hidden",width:"100%",children:(0,p.jsx)(s.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:C?"#FFDFE9":i,borderStyle:"solid",borderWidth:0===t?1:"0 1px 1px 1px",borderRadius:0===t?"0 16px 0 0":"0 0 16px 0"}},left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:r?.url?(0,p.jsx)(s.n1,{height:"100%",wash:!0,width:"100%",children:(0,p.jsx)(s._V,{alt:"",color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:r.url})}):(0,p.jsx)(s.az,{color:"secondary",height:"100%",width:"100%"})})})},t)})]})}),P&&(0,p.jsx)(s.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,p.jsx)(s._Y,{align:"center",color:"light",size:"400",children:t._('This board may contain sensitive content', 'drawerImageGroup.sensitivityScreen.heading', 'Warning text for a board that may have sensitive content')})})]}),(0,p.jsx)(g.A,{visibility:S?"visible":"none",children:(0,p.jsx)(E.A,{additionalStyles:{backgroundColor:c.E.LEGO_WASH}})})]})}},269616(e,t,r){r.d(t,{A:()=>l});var a=r(61163),i=r(859471),n=r(150880),o=r(542975),s=r(562615);function l(e){(0,i.useEffect)(()=>{(0,a.A)("NewsText","/app/www/growth/news/NewsHub/NewsText/NewsText.tsx")},[]);let{applyMarkup:t=!0,applyLink:r=!1,text:l,textMapping:d={}}=e,c={};return d&&Object.keys(d).forEach(e=>{let a=d[e];null!==a&&(a.t?c[e]=a.t.toString():c[e]="",t&&(a.b&&(c[e]=(0,s.jsx)(n.KJ,{inline:!0,weight:"bold",children:c[e]},e)),a.r&&(c[e]=(0,s.jsx)(n.KJ,{color:"error",inline:!0,children:c[e]},e)),a.l&&r&&(c[e]=(0,s.jsx)(n.N_,{display:"inlineBlock",href:a.l,underline:"hover",children:c[e]},e))))}),(0,s.jsx)(n.az,{"data-test-id":"updates-link-text",children:(0,s.jsx)(n.KJ,{inline:!0,children:l?(0,o.IY)(l,c):null})})}},884906(e,t,r){r.d(t,{I4:()=>d,I7:()=>i,Q4:()=>l,SE:()=>s,ZJ:()=>a,a2:()=>h,mw:()=>n,p5:()=>u,sk:()=>o});let a={BOARD:"board",DID_IT:"userdiditdata",INTEREST:"interest",JOURNEY:"journey",PIN:"pin",SEARCH:"news_hub_search",STORY:"story",USER:"user"},i="news-feed-sidebar",n={backgroundColor:"rgba(0, 0, 0, 0.4)"},o="136x136",s={BASIC:0,TEXT:1,ROW_WITH_COUNT:2,MINI_PIN_GRID:4,ROW_WITH_COUNT_2:10,MINI_PIN_GRID_2:11,MINI_BOARD_GRID:12,MINI_USER_GRID:13,MINI_SEARCH_GRID:14,MINI_INTEREST_GRID:15,MINI_BOARD_GRID_WITH_ICON:18,HIGHLIGHT_NOTIFICATION:23},l="recommendation",d="dropdown_item_settings_id",c="#E9E4FF",u={backgroundColor:c,borderColor:c,paddingLeft:"16px",paddingTop:"16px",paddingBottom:"16px",paddingRight:"12px"},h={...u,paddingRight:"10px"}},160417(e,t,r){r.d(t,{A:()=>y});var a=r(61163),i=r(859471),n=r(150880),o=r(538329),s=r(994053),l=r(792213),d=r(284966),c=r(884906),u=r(958735),h=r(47509),_=r(562615);function g(e,t,r){var a;return(t="symbol"==typeof(a=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?a:a+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let m="down",p=!1,f=!0;class E extends i.Component{constructor(e){super(e),g(this,"handleMouseOver",()=>{!this.props.listResource.isFetching&&this._container&&this.setState({highlight:!1})}),g(this,"handleScroll",(0,d.A)(()=>{if(this.props.listResource.isFetching||!this._container)return;let{handleScrollShadow:e}=this.props;e&&e((0,l.qM)(this._container)>70);let{scrollThreshold:t}=this.props,r=(0,l.Hj)(this._container)-(0,l.qM)(this._container)-(0,l.UI)(this._container);t&&r<t&&this.fetchMore()},30)),g(this,"addEventListeners",e=>{let{useWindow:t}=this.props;t&&(e=window),this.removeEventListeners(),e&&(t||e.addEventListener("wheel",this.preventScroll),e.addEventListener("scroll",this.handleScroll),e.addEventListener("mouseover",this.handleMouseOver)),this._container=e}),g(this,"getRef",e=>e&&e.id===this.props.highlightId?this.onRefChange:null),g(this,"preventScroll",e=>{if(!this._container)return;let t=e.deltaY<0?"up":m,r=this._container.scrollHeight-this._container.scrollTop-this._container.clientHeight==0,a=0===this._container.scrollTop;(t===m&&r||"up"===t&&a)&&e.preventDefault()}),g(this,"fetchForHighlight",()=>{if(!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.props.listResource.data){let e=!1;this.props.listResource.data.forEach(t=>{t?.id===this.props.highlightId&&(e=!0,this.setState({isHighlightedItemLoaded:!0}))}),e||this.fetchMore()}}),g(this,"onRefChange",e=>{this.setState({highlightedItemRef:e})}),g(this,"handleHighlightAndScrollToItem",()=>{this.props.listResource&&this.props.listResource.data&&!this.state.isResourceExhausted&&!this.state.isHighlightedItemLoaded&&this.fetchForHighlight(),this.state.highlightedItemRef&&!p&&(this.state.highlightedItemRef.scrollIntoView({behavior:"smooth",block:"center"}),p=!0)}),g(this,"fetchMoreIfHidden",e=>{this.props.listResource.auxData?.x_pinterest_sli_endpoint_name==="v3_get_news_hub_feed"&&!this.props.listResource.isFetching&&!this.props.listResource.isAtEnd&&e&&20>this.props.getShownNewsCount(e)&&this.props.listResource.fetchMore()}),this.state={highlightedItemRef:null,highlight:null,isResourceExhausted:!1,isHighlightedItemLoaded:!1}}componentWillUnmount(){this.removeEventListeners(),p&&(f=!1)}static getDerivedStateFromProps(e,t){return t.highlight?{}:{highlight:e.shouldHighlightListItem}}removeEventListeners(){let{useWindow:e}=this.props,{_container:t}=this;t&&(e||t.removeEventListener("wheel",this.preventScroll),t.removeEventListener("scroll",this.handleScroll),t.removeEventListener("mouseover",this.handleScroll))}fetchMore(){let{_container:e}=this;this.props.listResource.isFetching||(this.props.listResource.isAtEnd&&e?(e.removeEventListener("scroll",this.handleScroll),e.removeEventListener("mouseover",this.handleMouseOver),this.setState({isResourceExhausted:!0})):this.props.listResource.fetchMore())}render(){let{isAdsTab:e,isSideBarEnabled:t,hiddenNews:r,renderEmptyState:a,renderItem:o,renderTopStoryExperience:l,renderBottomSection:d,renderSectionHeaders:u}=this.props;this.props.shouldScrollToItem&&this.handleHighlightAndScrollToItem();let{data:h}=this.props.listResource;if(this.fetchMoreIfHidden(h),!this.props.listResource.isFetching&&h&&(0===this.props.getShownNewsCount(h)||0===h.length))return a();let g=h?.filter(e=>e&&"type"in e&&e?.type==="news"&&!r[e.id]),m=g?.findIndex(e=>e&&"unread"in e&&e?.unread&&(0,s.sE)(e.encoded_display_mode,[c.SE.HIGHLIGHT_NOTIFICATION]))??-1,p=h&&-1!==m?h[m]:null,E=g?.filter(e=>e&&"unread"in e&&!e?.unread)??[],y=g?.filter((e,t)=>e&&"unread"in e&&e.unread&&t!==m)??[];return(0,_.jsxs)(n.az,{ref:this.addEventListeners,dangerouslySetInlineStyle:{__style:{clear:"both",height:t?"100%":"calc(100% - 88px)",overflowY:"auto",overflowX:"hidden",wordBreak:"break-word"}},"data-test-id":"scrollable-container",children:[h&&l&&l(),e&&h?h.map((e,t)=>(0,_.jsx)(i.Fragment,{children:o(e,t+1,this.getRef(e),this.state.highlight&&f)},t)):null,!e&&(p||y?.length)?(0,_.jsxs)(i.Fragment,{children:[u&&(0,_.jsx)(n.az,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,_.jsx)(n._Y,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n._('New', 'Title for news hub section containing unread news items', 'Unread news hub items')})}),(0,_.jsxs)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:[p?o(p,0,this.getRef(p),this.state.highlight&&f,!0):null,y?.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&f))]})]}):null,!e&&E&&E.length>0?(0,_.jsxs)(i.Fragment,{children:[u&&(0,_.jsx)(n.az,{marginBottom:2,marginEnd:2,marginStart:2,paddingX:2,children:(0,_.jsx)(n._Y,{accessibilityLevel:1,align:"start",size:"400",children:this.props.i18n._('Seen', 'Title for news hub section containing read news items', 'Read news hub items')})}),(0,_.jsx)("ul",{className:"scrollableList","data-test-id":"scrollable-list",children:E.map((e,t)=>o(e,t,this.getRef(e),this.state.highlight&&f))})]}):null,this.props.listResource.isAtEnd?null:(0,_.jsx)(n.az,{dangerouslySetInlineStyle:{__style:{padding:"5%"}},"data-test-id":"loadingItem",height:"20%",position:"relative",children:(0,_.jsx)(n.y$,{accessibilityLabel:this.props.i18n._('Loading items', ' - ', ' -- '),show:this.props.listResource.isFetching})}),d&&d()]})}componentDidMount(){(0,a.A)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")}}function y(e){(0,i.useEffect)(()=>{(0,a.A)("ScrollableList","/app/www/growth/news/ScrollableList/ScrollableList.tsx")},[]);let t=(0,o.A)(),{getShownNewsCount:r}=(0,u.C3)(),{hiddenNews:n}=(0,u.p1)(),s=(0,h.A)();return(0,_.jsx)(E,{...e,getShownNewsCount:r,hiddenNews:n,i18n:t,isSideBarEnabled:s})}g(E,"defaultProps",{scrollThreshold:400,useWindow:!1,handleScrollShadow:()=>{},highlightId:null,shouldScrollToItem:!1})},116432(e,t,r){r.d(t,{H:()=>a});let a="_profile"},520884(e,t,r){r.d(t,{A:()=>g});var a,i=r(61163),n=r(859471);r(825193);var o=r(150880),s=r(948641),l=r(535273),d=r(538329),c=r(832773),u=r(845754),h=r(562615);let _=(void 0!==a||(a=r(638025)).hash&&"f459445ee8d1ea0db022e490ef5a2e80"!==a.hash&&console.error("The definition of 'SendBoardFlyout_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function g({boardKey:e,bgColor:t="default",children:r,iconColor:a="subtle",onCreatePincode:g,onOpen:m,sendBoardButtonRef:p,showTooltip:f,size:E="lg"}){(0,n.useEffect)(()=>{(0,i.A)("SendBoardFlyout","/app/www/save/board/BoardInfoBar/SendBoardFlyout.tsx")},[]);let[y,b]=(0,n.useState)(!1),[A,v]=(0,n.useState)(null),w=(0,d.A)(),T=(0,s.A)(),I=(0,l.A)(_,e),R={description:I?.description,id:I?.entityId??"",imageUrl:I?.imageCoverUrl,name:I?.name??void 0,type:"board",url:I?.url??void 0},x=e=>{if(T){e&&e.preventDefault(),T();return}y||m(),b(e=>!e)},S=r&&r({active:y,onClick:()=>x()})||(0,h.jsx)(o.K0,{ref:p,accessibilityLabel:w._('Send Board', 'Accessible label for button to send board', 'Accessible label for button to send board'),bgColor:t,dataTestId:"send-board-button-icon",icon:"share",iconColor:a,onClick:({event:e})=>x(e),selected:y,size:E,tooltip:f?{text:w._('Share board', 'sendBoardFlyout.button.tooltip', 'Tooltip for button to share board')}:void 0});return(0,h.jsxs)(n.Fragment,{children:[(0,h.jsx)(o.az,{ref:v,children:S}),y&&(0,h.jsx)(o.Wd,{zIndex:u.u$,children:(0,h.jsx)(o.AM,{anchor:A,idealDirection:"down",onDismiss:()=>x(),positionRelativeToAnchor:!1,size:"flexible",children:(0,h.jsx)(c.A,{component:13216,onCreatePincodeClick:g?()=>{x(),g()}:void 0,onHide:()=>x(),sendShareSurface:5,sendType:"board",sharedObject:R,viewType:5})})})]})}},261682(e,t,r){r.d(t,{A:()=>f});var a,i=r(61163),n=r(859471);r(669897);var o=r(150880),s=r(586733),l=r(948641),d=r(296221),c=r(535273),u=r(538329),h=r(844255),_=r(520884),g=r(564533),m=r(562615);let p=(void 0!==a||(a=r(470166)).hash&&"8d95294efe15498023c69669c6a41e71"!==a.hash&&console.error("The definition of 'SendBoardButton_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a);function f({boardKey:e,color:t,handleCreatePincode:r,iconColor:a,hasBoardToolStyles:f,hasShadow:E,showTooltip:y,size:b="lg"}){(0,n.useEffect)(()=>{(0,i.A)("SendBoardButton","/app/www/save/board/Headers/BoardHeader/SendBoardButton.tsx")},[]);let{logContextEvent:A}=(0,s.o)(),v=(0,u.A)(),w=(0,l.A)(),{userAgent:{platform:T}}=(0,h._8)(),I="android"===T,R=(0,n.useRef)(null),x=(0,c.A)(p,e),[S,C]=(0,n.useState)(!1),j=S?void 0:t,D=S?{__style:{backgroundColor:"#e2e2e2"}}:void 0;return(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(_.A,{boardKey:x,iconColor:a,onCreatePincode:r,onOpen:()=>{w?w():(0,g.A)(A)},sendBoardButtonRef:R,showTooltip:y,size:b,children:f?({active:e,onClick:t})=>(0,m.jsx)(o.Rp,{dataTestId:"share-board-button",onTap:t,rounding:500,children:(0,m.jsxs)(o.az,{alignItems:"center",color:e?"selected":j,dangerouslySetInlineStyle:D,display:"flex",elevation:E?"shadowFloating":void 0,height:64,justifyContent:"center",onMouseEnter:()=>C(!0),onMouseLeave:()=>C(!1),paddingX:4,rounding:500,children:[(0,m.jsx)(o.az,{marginEnd:2,children:(0,m.jsx)(o.In,{accessibilityLabel:v._('Share', 'Board.ShareButton', 'Accessible label for button to share a board'),color:e?"light":"default",icon:I?"share-android":"share",size:20})}),(0,m.jsx)(o.Wu,{color:e?"inverse":"default",children:v._('Share', 'Board.ShareButton', 'Label for button to share a board')})]})}):void 0}),(0,m.jsx)(d.X$,{anchors:{3018:R},idealDirection:"down",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0})]})}},564533(e,t,r){r.d(t,{A:()=>a});function a(e){e({event_type:101,element:10778,component:13216,view_type:5,view_parameter:3069})}},567365(e,t,r){r.d(t,{A:()=>i});var a=r(979638);function i(){let e=(0,a.g)(),t=(0,a.zy)(),r=Object.entries(e).reduce((e,[t,r])=>(r&&(e[r]=t),e),{});return t.pathname.split("/").map(e=>r[e]?`:${r[e]}`:e).join("/")}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/61571-91981fb478a8c127.mjs.map