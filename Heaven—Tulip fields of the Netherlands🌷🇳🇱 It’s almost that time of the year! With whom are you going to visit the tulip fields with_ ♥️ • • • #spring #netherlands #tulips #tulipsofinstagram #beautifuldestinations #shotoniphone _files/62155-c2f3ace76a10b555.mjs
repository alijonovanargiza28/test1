(self.modernJsonp=self.modernJsonp||[]).push([["62155"],{82118(e,s,l){var a;l.r(s),l.d(s,{default:()=>o});let t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_pin",selections:[{alias:"images_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:"images_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:a,storageKey:'images(spec:"236x")'},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isPromoted",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"promotedIsRemovable",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"__id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageBase64",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"mediaUploadId",storageKey:null}]}],type:"Pin",abstractKey:null};t.hash="64132b88edd48497e63c9ad85ae5ab66";let o=t},842227(e,s,l){l.r(s),l.d(s,{default:()=>t});let a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"PinSaveRequest_shuffle_asset",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"ShuffleAsset",abstractKey:null};a.hash="58c24e25a76e7a1c4533f3b07f490517";let t=a},578849(e,s,l){l.d(s,{A:()=>a});function a(e,s){return({CANCEL:s._('Cancel', 'business.strings', 'A generic translation for \'Cancel\' used for labeling, CTAs, and buttons'),LEARN_MORE:s._('Learn more', 'business.strings', 'A generic translation for \'Learn more\' used for labeling, CTAs, and buttons'),OK:s._('OK', 'business.strings', 'A generic translation for \'OK\' used for labeling, CTAs, and buttons'),DONE:s._('Done', 'business.strings', 'A generic translation for \'Done\' used for labeling, CTAs, and buttons'),NEXT:s._('Next', 'business.strings', 'A generic translation for \'Next\' used for labeling, CTAs, and buttons'),SAVE_ACTION:s._('Save', 'business.strings', 'A generic translation for \'Save\', the action, used for labeling, CTAs, and buttons'),SAVE_NOUN:s._('Save', 'business.strings', 'A generic translation for \'Save\', the noun, used for labeling, CTAs, and buttons'),LOADING:s._('Loading', 'business.strings', 'A generic translation for \'Loading\' used for labeling, CTAs, and buttons'),ALL:s._('All', 'business.strings', 'A generic translation for \'All\' used for labeling, CTAs, and buttons'),EDIT:s._('Edit', 'business.strings', 'A generic translation for \'Edit\' used for labeling, CTAs, and buttons'),BACK:s._('Back', 'business.strings', 'A generic translation for \'Back\' used for labeling, CTAs, and buttons'),DELETE:s._('Delete', 'business.strings', 'A generic translation for \'Delete\' used for labeling, CTAs, and buttons'),NONE:s._('None', 'business.strings', 'A generic translation for \'None\' used for labeling, CTAs, and buttons'),IMPRESSIONS:s._('Impressions', 'business.strings', 'A generic translation for \'Impressions\' used for labeling, CTAs, and buttons'),SEARCH_ACTION:s._('Search', 'business.strings', 'A generic translation for \'Search\', the action,  used for labeling, CTAs, and buttons'),SEARCH_NOUN:s._('Search', 'business.strings', 'A generic translation for \'Search\', the noun,  used for labeling, CTAs, and buttons'),ACTIVE:s._('Active', 'business.strings', 'A generic translation for \'Active\' used for labeling, CTAs, and buttons'),VIDEO:s._('Video', 'business.strings', 'A generic translation for \'Video\' used for labeling, CTAs, and buttons'),SAVES_ACTION:s._('Saves', 'business.strings', 'A generic translation for \'Saves\', the action, used for labeling, CTAs, and buttons'),SAVES_NOUN:s._('Saves', 'business.strings', 'A generic translation for \'Saves\', the noun,  used for labeling, CTAs, and buttons'),CONTINUE:s._('Continue', 'business.strings', 'A generic translation for \'Continue\' used for labeling, CTAs, and buttons'),NO:s._('No', 'business.strings', 'A generic translation for \'No\' used for labeling, CTAs, and buttons'),STATUS:s._('Status', 'business.strings', 'A generic translation for \'Status\' used for labeling, CTAs, and buttons'),PROMOTE:s._('Promote', 'business.strings', 'A generic translation for \'Promote\' used for labeling, CTAs, and buttons'),NAME:s._('Name', 'business.strings', 'A generic translation for \'Name\' used for labeling, CTAs, and buttons'),SUBMIT:s._('Submit', 'business.strings', 'A generic translation for \'Submit\' used for labeling, CTAs, and buttons'),PAUSED:s._('Paused', 'business.strings', 'A generic translation for \'Paused\' used for labeling, CTAs, and buttons'),SEE_MORE:s._('See more', 'business.strings', 'A generic translation for \'See more\' used for labeling, CTAs, and buttons'),FOLLOWING:s._('Following', 'business.strings', 'A generic translation for \'Following\' used for labeling, CTAs, and buttons'),CLOSE:s._('Close', 'business.strings', 'A generic translation for \'Close\' used for labeling, CTAs, and buttons'),INSTALL_TAG:s._('Install tag', 'business.strings', 'A generic translation for \'Install tag\' used for labeling, CTAs, and buttons'),PIN_CLICKS:s._('Pin clicks', 'business.strings', 'A generic translation for \'Pin clicks\' used for labeling, CTAs, and buttons'),CONVERSIONS:s._('Conversions', 'business.strings', 'A generic translation for \'Conversions\' used for labeling, CTAs, and buttons'),SEND:s._('Send', 'business.strings', 'A generic translation for \'Send\' used for labeling, CTAs, and buttons'),KEYWORDS:s._('Keywords', 'business.strings', 'A generic translation for \'Keywords\' used for labeling, CTAs, and buttons'),CREATE:s._('Create', 'business.strings', 'A generic translation for \'Create\' used for labeling, CTAs, and buttons'),REPORT_ACTION:s._('Report', 'business.strings', 'A generic translation for \'Report\', the action, used for labeling, CTAs, and buttons'),REPORT_NOUN:s._('Report', 'business.strings', 'A generic translation for \'Report\', the noun,  used for labeling, CTAs, and buttons'),BOARDS:s._('Boards', 'business.strings', 'A generic translation for \'Boards\' used for labeling, CTAs, and buttons'),PINS:s._('Pins', 'business.strings', 'A generic translation for \'Pins\' used for labeling, CTAs, and buttons'),LINK_CLICKS:s._('Link clicks', 'business.strings', 'A generic translation for \'Link clicks\' used for labeling, CTAs, and buttons'),COMPLETED:s._('Completed', 'business.strings', 'A generic translation for \'Completed\' used for labeling, CTAs, and buttons'),PENDING:s._('Pending', 'business.strings', 'A generic translation for \'Pending\' used for labeling, CTAs, and buttons'),SELECT:s._('Select', 'business.strings', 'A generic translation for \'Select\' used for labeling, CTAs, and buttons'),ARCHIVED:s._('Archived', 'business.strings', 'A generic translation for \'Archived\' used for labeling, CTAs, and buttons'),ACTIONS:s._('Actions', 'business.strings', 'A generic translation for \'Actions\' used for labeling, CTAs, and buttons'),PRODUCT_GROUPS:s._('Product groups', 'business.strings', 'A generic translation for \'Product groups\' used for labeling, CTAs, and buttons'),CUSTOM:s._('Custom', 'business.strings', 'A generic translation for \'Custom\' used for labeling, CTAs, and buttons'),CREATE_PIN:s._('Create Pin', 'business.strings', 'A generic translation for \'Create Pin\' used for labeling, CTAs, and buttons'),COUNTRY:s._('Country', 'business.strings', 'A generic translation for \'Country\' used for labeling, CTAs, and buttons'),VIDEO_VIEWS:s._('Video views', 'business.strings', 'A generic translation for \'Video views\' used for labeling, CTAs, and buttons'),REMOVE:s._('Remove', 'business.strings', 'A generic translation for \'Remove\' used for labeling, CTAs, and buttons'),EMAIL_ADDRESS:s._('Email address', 'business.strings', 'A generic translation for \'Email address\' used for labeling, CTAs, and buttons'),PINTEREST:s._('Pinterest', 'business.strings', 'A generic translation for \'Pinterest\' used for labeling, CTAs, and buttons'),PRIVACY_POLICY:s._('Privacy Policy', 'business.strings', 'A generic translation for \'Privacy Policy\' used for labeling, CTAs, and buttons'),OTHER:s._('Other', 'business.strings', 'A generic translation for \'Other\' used for labeling, CTAs, and buttons'),REQUIRED:s._('Required', 'business.strings', 'A generic translation for \'Required\' used for labeling, CTAs, and buttons'),CLICKS_ACTION:s._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the action used for labeling, CTAs, and buttons'),CLICKS_NOUN:s._('Clicks', 'business.strings', 'A generic translation for \'Clicks\', the noun, used for labeling, CTAs, and buttons'),ENGAGEMENT:s._('Engagement', 'business.strings', 'A generic translation for \'Engagement\' used for labeling, CTAs, and buttons'),NOT_NOW:s._('Not now', 'business.strings', 'A generic translation for \'Not now\' used for labeling, CTAs, and buttons'),ADS:s._('Ads', 'business.strings', 'A generic translation for \'Ads\' used for labeling, CTAs, and buttons'),ERROR:s._('Error', 'business.strings', 'A generic translation for \'Error\' used for labeling, CTAs, and buttons'),CAMPAIGNS:s._('Campaigns', 'business.strings', 'A generic translation for \'Campaigns\' used for labeling, CTAs, and buttons'),VISIT_ACTION:s._('Visit', 'business.strings', 'A generic translation for \'Visit\', the action, used for labeling, CTAs, and buttons'),VISIT_NOUN:s._('Visit', 'business.strings', 'A generic translation for \'Visit\', the noun, used for labeling, CTAs, and buttons'),OUTBOUND_CLICKS:s._('Outbound clicks', 'business.strings', 'A generic translation for \'Outbound clicks\' used for labeling, CTAs, and buttons'),ADD:s._('Add', 'business.strings', 'A generic translation for \'Add\' used for labeling, CTAs, and buttons'),DESCRIPTION:s._('Description', 'business.strings', 'A generic translation for \'Description\' used for labeling, CTAs, and buttons'),SPEND_ACTION:s._('Spend', 'business.strings', 'A generic translation for \'Spend\', the action, used for labeling, CTAs, and buttons'),SPEND_NOUN:s._('Spend', 'business.strings', 'A generic translation for \'Spend\', the noun, used for labeling, CTAs, and buttons'),CREATE_AD:s._('Create ad', 'business.strings', 'A generic translation for \'Create ad\' used for labeling, CTAs, and buttons'),EXPAND:s._('Expand', 'business.strings', 'A generic translation for \'Expand\' used for labeling, CTAs, and buttons'),MEASURE_YOUR_AD_PERFORMANCE:s._('Measure your ad performance', 'business.strings', 'A generic translation for \'Measure your ad performance\' used for labeling, CTAs, and buttons'),CREATE_BOARD:s._('Create board', 'business.strings', 'A generic translation for \'Create board\' used for labeling, CTAs, and buttons'),SELECTED:s._('Selected', 'business.strings', 'A generic translation for \'Selected\' used for labeling, CTAs, and buttons'),PEOPLE:s._('People', 'business.strings', 'A generic translation for \'People\' used for labeling, CTAs, and buttons'),YES:s._('Yes', 'business.strings', 'A generic translation for \'Yes\' used for labeling, CTAs, and buttons'),TOTAL:s._('Total', 'business.strings', 'A generic translation for \'Total\' used for labeling, CTAs, and buttons'),AUDIENCE_INSIGHTS:s._('Audience insights', 'business.strings', 'A generic translation for \'Audience insights\' used for labeling, CTAs, and buttons'),DISMISS:s._('Dismiss', 'business.strings', 'A generic translation for \'Dismiss\' used for labeling, CTAs, and buttons'),PHONE_NUMBER:s._('Phone number', 'business.strings', 'A generic translation for \'Phone number\' used for labeling, CTAs, and buttons'),TODAY:s._('Today', 'business.strings', 'A generic translation for \'Today\' used for labeling, CTAs, and buttons'),GOT_IT:s._('Got it', 'business.strings', 'A generic translation for \'Got it\' used for labeling, CTAs, and buttons'),SUCCESS:s._('Success', 'business.strings', 'A generic translation for \'Success\' used for labeling, CTAs, and buttons'),AD_GROUPS:s._('Ad groups', 'business.strings', 'A generic translation for \'Ad groups\' used for labeling, CTAs, and buttons')})[e]}},385336(e,s,l){l.d(s,{A:()=>D});var a=l(61163),t=l(859471),o=l(150880),i=l(743372),r=l(989457),n=l(693154),_=l(578849),c=l(538329),d=l(601185),u=l(844255),A=l(168079),g=l(734696),b=l(653956),h=l(586733),p=l(172150),f=l(264986),P=l(801095);function m(e){return e.map(({id:e})=>e)}function C(e,s){return e.filter(({type:e})=>s.includes(e))}var z=l(562615);function S({boardCreateSource:e,selectedContacts:s,setSelectedContacts:l}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupAddCollaborator","/app/www/BoardCreateGlowup/BoardCreateGlowupAddCollaborator.tsx")},[]);let i=(0,t.useRef)(!1),{logContextEvent:r}=(0,h.o)();(0,A.A)(()=>(r({event_type:13,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}}),()=>{i.current||r({event_type:10521,view_type:5,view_parameter:3059,component:13305,aux_data:{source:e}})}));let{searchValue:n,allContacts:_,handleTextFieldChange:d,handleTypeaheadSuggestionsChange:u,handleCollaboratorClick:g}=(0,P.A)({selectedContacts:s,onSelectedContactsChange:l}),b=m(s),C=(0,c.A)();return(0,z.jsxs)(o.so,{direction:"column",gap:6,children:[(0,z.jsxs)(o.so,{direction:"column",gap:2,children:[(0,z.jsx)(o.KJ,{size:"200",children:C._('Collaborators can...', 'BoardCreateGlowupModal.collaborators.content.paragraph-1', 'Text before explaining current collaborator permission setting')}),(0,z.jsxs)(o.so,{direction:"column",gap:1,children:[(0,z.jsx)(o.KJ,{size:"400",weight:"bold",children:C._('Do (almost) everything', 'BoardCreateGlowupModal.collaborators.content.paragraph-2', 'Text explaining current collaborator permission setting')}),(0,z.jsx)(o.KJ,{size:"200",children:C._('Add, move or delete Pins and sections, comment and react', 'BoardCreateGlowupModal.collaborators.content.paragraph-3', 'Text explaining current collaborator permission setting')})]})]}),(0,z.jsxs)(o.so,{direction:"column",gap:2,children:[(0,z.jsx)(o.KJ,{size:"200",children:C._('Invite someone on Pinterest', 'BoardCreateGlowupModal.collaborators.content.collaborator-picker-label', 'Text before explaining how to invite someone on Pinterest')}),(0,z.jsx)(f.A,{onSearchChange:d,onTypeaheadSuggestionsChange:u,searchValue:n}),(0,z.jsx)(p.A,{contacts:_,itemPadding:2,onCollaboratorToggle:e=>{g(e),i.current=!0},selectedContactIds:b})]})]})}function v({labelId:e,label:s,subtext:l,children:i}){return(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModalField","/app/www/BoardCreateGlowup/BoardCreateGlowupModalField.tsx")},[]),(0,z.jsxs)(o.so,{alignItems:"center",children:[(0,z.jsx)(o.az,{flex:"grow",children:(0,z.jsxs)(o.JU,{htmlFor:e,children:[(0,z.jsx)(o.KJ,{size:"300",weight:"bold",children:s}),(0,z.jsx)(o.KJ,{color:"subtle",size:"200",children:l})]})}),i]})}var T=l(753771),y=l(457315),w=l(955170),x=l(720407),E=l(937975);let I=[96,58],N=["email","email_share_suggestion"],B=["user","user_share_suggestion"];var k=l(928802),O=l(679530),R=l(896575),j=l(849550);function D({boardCreateSource:e,images:s=[],initialValues:l,onBoardCreate:h,onClose:p,pinId:f}){(0,t.useEffect)(()=>{(0,a.A)("BoardCreateGlowupModal","/app/www/BoardCreateGlowup/BoardCreateGlowupModal.tsx")},[]);let{suggestedBoardName:P,isResolved:D,completeExperience:M,dismissExperience:L}=(0,k.A)(1000673,0===s.length),[G,K]=(0,t.useState)(l?.boardName??""),{checkExperiment:U}=(0,d.A)(),F=!!f&&!l?.boardName&&U("web_curation_sabr_board_title_suggestion").anyEnabled,V=(0,j.A)({pinId:f,skip:!F}),J=D?P??V:void 0,[Y,H]=(0,t.useState)(void 0);J!==Y&&(H(J),J&&K(J));let[q,W]=(0,t.useState)(l?.privacy==="secret"),[$,X]=(0,t.useState)(),[Q,Z]=(0,t.useState)(!1),[ee,es]=(0,t.useState)(l?.collaborators??[]),el=(0,c.A)(),ea=(0,i.A)(),{isRTL:et}=(0,u._8)(),eo=(0,n.A)(),ei=eo.isAuth?eo?.avatar_color_index:void 0,er=!!$,en=P??(l?.boardName||V),{state:e_,submitAction:ec,isPending:ed}=function({boardCreateSource:e,onBoardCreate:s,onRequestComplete:l,selectedCollaborators:a,auxData:o={}}){let i=(0,x.A)(),r=(0,w.mV)(),n=(0,w.lt)(),[_,c,d]=(0,t.useActionState)(async(t,_)=>{let c={name:_.get("boardName"),privacy:null!=_.get("isSecretBoard")?T.A.BoardPrivacy.SECRET:T.A.BoardPrivacy.PUBLIC,aux_data:{...o,source:e}};try{let e=await i({boardCreateOptions:c}),l=C(a,N),t=C(a,B),o=[];l.length>0&&o.push(r(e.id,m(l))),t.length>0&&o.push(n(e.id,m(t)));try{await Promise.all(o)}catch(e){(0,E.c)({name:"BoardCreateGlowupCollaboratorInviteError",message:(0,y.A)(e,"message")??"Failed to invite collaborators",message_detail:(0,y.A)(e,"message_detail"),stack:(0,y.A)(e,"stack")})}s(e)}catch(s){let e=(0,y.A)(s,"api_error_code");if(void 0!==e&&I.includes(e))return{serverBoardNameError:(0,y.A)(s,"message")};(0,E.c)({name:"BoardCreateGlowupFormBoardCreateError",message:(0,y.A)(s,"message")??"Failed to create board",message_detail:(0,y.A)(s,"message_detail"),stack:(0,y.A)(s,"stack")})}finally{l?.()}return{}},{});return{state:_,submitAction:c,isPending:d}}({boardCreateSource:e,onBoardCreate:e=>{e.name===P?M():L(),h(e)},onRequestComplete:()=>{Z(!1)},selectedCollaborators:ee,auxData:{...en?{suggested_board_name:en}:{}}}),eu=()=>{P&&L(),p()},{serverBoardNameError:eA}=e_;(0,A.A)(()=>{ea({event_type:13,view_type:5,view_parameter:87,component:13025,aux_data:{source:e}})});let eg=()=>!Q&&eA?eA:er?$:void 0,[eb,eh]=(0,t.useState)("main"),ep=()=>{ea({event_type:101,view_type:5,view_parameter:87,component:13025,element:10592,aux_data:{source:e}}),(0,t.startTransition)(()=>{eh("collaborators")})},ef={main:{content:(0,z.jsxs)(o.so,{direction:"column",gap:6,children:[(0,z.jsx)(o.so,{justifyContent:"center",children:(0,z.jsx)(o.az,{paddingY:2,width:213,children:(0,z.jsx)(b.A,{boardKey:null,coverPinKey:null,images:s})})}),(0,z.jsx)(o.A_,{errorMessage:eg(),id:"board-name",label:el._('Board name', 'BoardCreateGlowupModal.boardNameInput.label', 'Label for board name input'),name:"boardName",onChange:({value:e})=>{K(e);let s=(0,g.Yl)((0,O.D)(el),e);s.length>0?X(s[0]):X(void 0),Z(!0)},placeholder:F?void 0:el._('Name your board', 'BoardCreateGlowupModal.boardNameInput.placeholder', 'Placeholder for board name input'),size:"lg",value:G}),(0,z.jsx)(v,{label:el._('Make this board secret', 'BoardCreateGlowupModal.privacySettings.label', 'Label for privacy settings'),labelId:"secret-board-toggle",subtext:el._('Only you and collaborators will see this board', 'BoardCreateGlowupModal.privacySettings.subtext', 'Subtext for privacy settings'),children:(0,z.jsx)(o.dO,{id:"secret-board-toggle",name:"isSecretBoard",onChange:({value:s})=>{W(s),ea({event_type:s?106:107,view_type:5,view_parameter:87,component:13025,element:53,aux_data:{source:e}})},switched:q})}),(0,z.jsx)(v,{label:el._('Group board', 'BoardCreateGlowupModal.groupBoardSettings.label', 'Label for group board settings'),labelId:"invite-collaborators-button",subtext:el._('Invite others to collaborate on this board', 'BoardCreateGlowupModal.groupBoardSettings.subtext', 'Subtext for group board settings'),children:ee.length>0?(0,z.jsx)(o.az,{"data-test-id":"avatar-group",children:(0,z.jsx)(r.Z7,{addCollaborators:!0,collaborators:ee.map(e=>({color:ei,name:e.full_name??"",src:e.image_medium_url??""})),onClick:ep,role:"button",size:"md"})}):(0,z.jsx)(o.K0,{accessibilityLabel:el._('Invite collaborators', 'BoardCreateGlowupModal.groupBoardSettings.accessibilityLabel', 'Accessibility label for invite collaborators button'),bgColor:"secondary",icon:"person-plus",onClick:ep,size:"lg"})})]}),footer:(0,z.jsx)(R.A,{disabled:!!eg()||!G.trim(),form:"board-create-glowup-form",fullWidth:!0,onClick:()=>{ea({event_type:101,view_type:5,view_parameter:87,component:13025,element:249,aux_data:{source:e}})},size:"lg",submitting:ed,text:el._('Create', 'BoardCreateGlowupModal.createButton', 'The button to submit the board creation form')}),heading:el._('Create a board', 'BoardCreateGlowupModal.heading', 'Heading for board create glowup modal'),accessibilityModalLabel:el._('Create a board', 'BoardCreateGlowupModal.accessibilityModalLabel', 'Accessibility label for board create glowup modal')},collaborators:{content:(0,z.jsx)(S,{boardCreateSource:e,selectedContacts:ee,setSelectedContacts:es}),footer:null,heading:el._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.heading', 'Heading for invite collaborators screen'),accessibilityModalLabel:el._('Invite collaborators', 'BoardCreateGlowupModal.collaborators.accessibilityModalLabel', 'Accessibility label for invite collaborators screen')}};return(0,z.jsx)(r.aF,{accessibilityModalLabel:ef[eb].accessibilityModalLabel,align:"center",footer:ef[eb].footer,heading:(0,z.jsx)(o.az,{position:"relative",children:(0,z.jsxs)(o.so,{alignItems:"center",justifyContent:"center",width:"100%",children:["main"!==eb&&(0,z.jsx)(o.az,{left:!et,position:"absolute",right:et,children:(0,z.jsx)(o.K0,{accessibilityLabel:el._('Go back', 'BoardCreateGlowupModal.backButton.accessibilityLabel', 'Accessibility label for back button'),icon:"chevron-left",onClick:()=>{(0,t.startTransition)(()=>{eh("main")})},size:"lg"})}),"main"===eb&&(0,z.jsx)(o.az,{left:et,position:"absolute",right:!et,children:(0,z.jsx)(o.K0,{accessibilityLabel:(0,_.A)("CLOSE",el),icon:"close",onClick:eu,size:"lg"})}),(0,z.jsx)(o.so.Item,{flex:"grow",children:(0,z.jsx)(o._Y,{accessibilityLevel:1,align:"center",size:"600",children:ef[eb].heading})})]})}),onDismiss:eu,size:"md",children:(0,z.jsx)("form",{id:"board-create-glowup-form",onSubmit:e=>{e.preventDefault();let s=e.currentTarget;(0,t.startTransition)(async()=>{await ec(new FormData(s))})},children:(0,z.jsx)(o.az,{minHeight:600,paddingX:6,paddingY:3,children:ef[eb].content})})})}},31973(e,s,l){l.d(s,{A:()=>u});var a=l(61163),t=l(859471),o=l(150880),i=l(586733),r=l(538329),n=l(542975),_=l(331694),c=l(678358),d=l(562615);function u({accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,clientTrackingParams:u,dropdownRef:A,hideDropdown:g=!1,isSaved:b,onBoardDropdownClick:h,onSaveClick:p,promotedIsLeadAd:f,renderPinSaveTooltip:P,selectedItem:m,selectedTitle:C,showBoardFlyout:z,showPromoteBanner:S=!1,unselectedText:v,variant:T,viewParameter:y,viewType:w,surface:x}){(0,t.useEffect)(()=>{(0,a.A)("BoardSelectionDisplay","/app/www/common/PinBetterSave/BoardSelectionDisplay.tsx")},[]);let E=(0,r.A)(),[I,N]=(0,t.useState)(null),{closeupWithinMasonryEnabled:B}=(0,c._G)(),{logContextEvent:k}=(0,i.o)(),O=(0,t.useEffectEvent)(()=>{k({event_type:13,...w?{view_type:w}:Object.freeze({}),...y?{view_parameter:y}:Object.freeze({}),component:13282,element:14348,object_id_str:m?.boardId,clientTrackingParams:u,aux_data:{is_profile_save:m?.type==="boardless"}})});(0,t.useEffect)(()=>{m&&m?.type==="boardless"&&O()},[m]);let R=C||v,j="closeup"===T,D="media-viewer"===T,M="comparison"===T,L="VideoCarouselModule"===x,G=(0,t.useMemo)(()=>M?"inverse":D?z?"inverse":"default":z||!j?"light":"default",[j,z,D,M]),K=(0,t.useCallback)(({event:e})=>{h(e)},[h]),U=j?"transparent":"transparentInverse";U=D?"tertiarySemiTransparent":U,U=M?"transparentInverse":U;let F=b?E._('Saved', 'PinBetterSave.BoardSelection.SavedButton', 'BetterSave Saved label'):E._('Save', 'PinBetterSave.BoardSelection.SaveButton', 'BetterSave Save label');return(0,d.jsxs)(o.az,{alignItems:D?"start":"center",dangerouslySetInlineStyle:{__style:{gap:"4px"}},display:"flex",paddingX:B?0:void 0,width:"100%",children:[!g&&(0,d.jsx)(o.az,{dangerouslySetInlineStyle:{__style:{width:"fit-content"}},fit:!0,children:(0,d.jsx)(_.A,{overrideDataTestId:C?"board-selection-item-selected":"board-selection-placeholder",children:(0,d.jsx)(o.$n,{ref:A,accessibilityControls:e,accessibilityExpanded:s,accessibilityHaspopup:l,accessibilityLabel:(0,n.$)(E._('Select a board to save to: {{ boardName }}', 'PinBetterSave.BoardSelection.DropdownIcon', 'Accessibility label used to prompt the user to select the board where the Pin will be saved. boardName: The name of the board'),{boardName:R}),color:U,dataTestId:"PinBetterSaveDropdown",iconEnd:"chevron-down",onClick:K,selected:z,size:L?"sm":"lg",text:(0,d.jsx)(o.KJ,{color:G,lineClamp:1,overflow:"breakAll",size:L?"100":"300",weight:"bold",children:R})})})}),(0,d.jsx)(o.az,{alignSelf:j?"center":"start",flex:"none",marginStart:"auto",children:(0,d.jsx)(_.A,{overrideDataTestId:"PinBetterSaveButton",children:(0,d.jsx)(o.PF,{ref:N,color:f||j&&S?"secondary":"primary",onClick:({event:e})=>{g?h(e):p(e)},selected:b,size:L?"sm":"lg",text:F})})}),!!P&&!!I&&j&&P(I)]})}},896575(e,s,l){l.d(s,{A:()=>_});var a=l(61163),t=l(859471),o=l(150880),i=l(562615);let r={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function n(){return(0,i.jsx)(o.az,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:800,width:"100%",children:(0,i.jsx)(o.az,{dangerouslySetInlineStyle:r,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function _({disabled:e,form:s,fullWidth:l,name:r,onClick:_,size:c,submitting:d,text:u}){return(0,t.useEffect)(()=>{(0,a.A)("SubmitButton","/app/www/common/SubmitButton/SubmitButton.tsx")},[]),(0,i.jsxs)(o.az,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[d&&(0,i.jsx)(n,{}),(0,i.jsx)(o.$n,{color:"primary",disabled:e||d,form:s,fullWidth:l,name:r,onClick:_,size:c,text:u,type:"submit"})]})}},849550(e,s,l){l.d(s,{A:()=>o});var a=l(859471),t=l(257300);function o({pinId:e,skip:s}){let[l,o]=(0,a.useState)(void 0),i=!s&&!!e,r=(0,a.useCallback)(async()=>{if(e){let s=await (0,t.A)({url:"/v3/pins/{pin}/board_title_suggestions/",urlParams:{pin:e}}),l=s.resource_response?.data?.[0]?.title;l&&o(l)}},[e]);return(0,a.useEffect)(()=>{i&&r()},[i,r]),l}},275953(e,s,l){l.d(s,{a:()=>K});var a,t,o=l(61163),i=l(859471),r=l(106386);l(825193);var n=l(979638),_=l(427471),c=l(243439),d=l(586733),u=l(900303),A=l(296221),g=l(250325),b=l(567176),h=l(693154),p=l(535273),f=l(662449),P=l(538329),m=l(74806),C=l(706466),z=l(987055),S=l(961403),v=l(310065),T=l(48180),y=l(878913),w=l(204398),x=l(96897),E=l(974694),I=l(150880),N=l(542975),B=l(570805),k=l(562615),O=l(96740);let R=";base64,";function j(e,s,l){var a;return(s="symbol"==typeof(a=function(e,s){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var a=l.call(e,s||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===s?String:Number)(e)}(s,"string"))?a:a+"")in e?Object.defineProperty(e,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[s]=l,e}let D=/#[^(\-\\.\s#,\/$%\^&\*;:{}=\`~()\[\]@|<>â€¦)]+/gi,M=(void 0!==a||(a=l(82118)).hash&&"64132b88edd48497e63c9ad85ae5ab66"!==a.hash&&console.error("The definition of 'PinSaveRequest_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),a),L=(void 0!==t||(t=l(842227)).hash&&"58c24e25a76e7a1c4533f3b07f490517"!==t.hash&&console.error("The definition of 'PinSaveRequest_shuffle_asset' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),t);class G extends i.Component{constructor(...e){super(...e),j(this,"state",{boardSavedTo:null,displaySuccessAnimation:!1,newPin:null,modalTitle:this.getModalTitle(this.props.showCreate,!!this.props.boardWithSection),pinDescription:this.props.pin&&this.props.pin.description||this.props.urlPinInfo?.description||"",resolve:void 0,sharing:{facebook:!1,twitter:!1}}),j(this,"unmounted",!1),j(this,"setModalTitle",e=>this.safeSetState({modalTitle:e})),j(this,"updateDescription",e=>{this.safeSetState({pinDescription:e})}),j(this,"close",()=>{let{onClose:e}=this.props;e&&e(),this.props.logContextEvent({event_type:2502,component:5,element:610})}),j(this,"safeSetState",(e,s)=>{this.unmounted?s&&s():this.setState(e,s)}),j(this,"getPinResource",(e,s,l)=>{let{color:a,clientTrackingParams:t,currentHistoryStack:o,pin:i,method:r,guid:n,additionalCreateFields:d,advertiser_id:u,urlPinInfo:A,shuffleAsset:g,viewerUserId:b}=this.props,h=i?.entityId?"RepinResource":"PinResource",p=i?.imageUrl||A?.imageUrl,f=i?.link||A?.link,P=!i?.entityId&&p?(0,z.A)(p,f):i?.images_orig?.url||"",{imageBase64:m,imageUrl:C}=function({pinImageBase64:e,imageUrl:s}){let l=s.startsWith("data:"),a=l?function(e){let s=e.indexOf(R);if(!(s<0))return e.slice(s+R.length)||void 0}(s):void 0,t=e??a;return l?{imageBase64:t,imageUrl:void 0}:{imageBase64:t,imageUrl:s}}({pinImageBase64:i?.imageBase64,imageUrl:P}),{trafficSource:S}=(0,c.A)(o??[],!!b),v={...d,board_id:s||"",color:a||"",clientTrackingParams:(0,T.A)(t,i?.trackingParams),description:this.state.pinDescription,guid:n||"",link:f,image_base64:m,image_url:C,is_buyable_pin:!1,is_removable:i?.promotedIsRemovable??void 0,media_upload_id:i?.mediaUploadId??void 0,method:r||"",pin_id:i?.entityId||"",section:l,title:i?.title||"",aux_data:{source:S},...u?{advertiser_id:u}:Object.freeze({}),...g?{shuffle_asset:g.entityId}:{}};if(!e){let{facebook:e,twitter:s}=this.state.sharing;v.share_facebook=e,v.share_twitter=s}return _.A.create(h,v)}),j(this,"triggerPubSubs",e=>{this.props.onPinCreate&&this.props.onPinCreate({boardId:e.board.id,pinId:e.id})}),j(this,"makeCancelablePromise",e=>{let s=!1;return{promise:new Promise((l,a)=>{e.then(e=>s?a({isCanceled:!0}):l(e)),e.catch(e=>s?a({isCanceled:!0}):a(e))}),cancel(){s=!0}}}),j(this,"handleLogToastClick",()=>{this.props.logContextEvent({event_type:101,component:20,view_type:52})}),j(this,"showBoardSavedToast",(e,s)=>{let{toastManagerContext:l,i18n:a}=this.props;l.showToast(({hideToast:l})=>{var t;return(0,k.jsx)(b.A,{duration:4e3,href:s?`${e.url??""}${s.slug??""}`:e.url,imageUrl:e.image_cover_url??"",onClick:this.handleLogToastClick,onHide:l,text:(t=e.name,s?(0,B.A)(a._('Saved to {{sectionName}} in {{boardName}}', 'Toast for successfully saving to a section within a board', 'Toast for successfully saving to a section within a board'),{sectionName:s.title??"",boardName:t??""}):(0,k.jsx)(I.KJ,{children:(0,N.$w)({text:a._('Saved to <strong id="1">{{ boardName }}</strong>', 'PinToBoard.Lib.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:t??""},jsxReplacements:{1:({innerHtmlStrings:e})=>(0,k.jsx)(I.KJ,{weight:"bold",children:e})}})}))})})}),j(this,"dismissModal",()=>{let{resolve:e,newPin:s}=this.state;e&&e(s)}),j(this,"handleBoardSaveSuccess",(e,s,l,a)=>{let{action:t,saveToBoard:o,dispatch:i,pin:r,setCompletionPromise:n,shouldShowToast:_,showRepinAnimation:c,viewerUserId:d,urlPinInfo:u}=this.props;i((0,g.$O)());let A=e.resource_response.data,b=this.makeCancelablePromise(new Promise(e=>{this.triggerPubSubs(A);let t=this.state.pinDescription.match(D)||[];t.length>0&&this.props.logContextEvent({event_type:2,element:10273,object_id_str:this.props.pin?.entityId,aux_data:{hashtags:JSON.stringify(t)}});let o=()=>{_&&this.showBoardSavedToast(s,l),this.safeSetState({displaySuccessAnimation:!0,modalTitle:this.props.i18n._('Board created', 'Modal title after creating a new board', 'Modal title after creating a new board'),newPin:A,resolve:e})};a?o():e(A)}));!a&&r?.entityId&&c(r.entityId),n(b),o(s),i((0,w.zY)({boardId:s.id,sectionId:l&&l.id,increment:1})),d&&(i((0,E.LR)({userId:d,increment:1})),i((0,g.$O)())),(l||!s.image_cover_url)&&(s.image_cover_url=r?.imageUrl||u?.imageUrl||r?.images_236x?.url||"",i((0,w.NQ)(s))),l&&i((0,m.Jt)("BoardSectionResource",{options:{field_set_key:"board_page",section_id:l.id}})),r?.entityId&&i((0,x.J4)({id:r.entityId,nodeId:r.__id,boardId:s.id,title:s.name??"",url:s.url??"",localPinId:A.id}))}),j(this,"handleSaveToBoard",(e,s,l)=>{let{onToggleModal:a,shouldShowToast:t,mountAfterActionPlacement:o}=this.props;t&&!l&&(this.close(),this.showBoardSavedToast(e,s));let i="secret"===(e.privacy||""),r={board:s?s.id:e.id,state:O.J.LOADING};this.safeSetState({boardSavedTo:r},()=>{this.getPinResource(i,e.id,(s||{}).id).callCreate({showError:!1}).then(t=>{let i=t.resource_response.data,{clientTrackingParams:n,currentHistoryStack:_,pin:d,viewerUserId:u}=this.props,{trafficSource:A}=(0,c.A)(_??[],!!u);this.props.logContextEvent({aux_data:{source:A},clientTrackingParams:(0,T.A)(n,d?.trackingParams)??void 0,event_type:d?.entityId?5:1,object_id_str:i?.id||d?.entityId||"",view_type:52}),o("Save",{pin_id:d?.entityId,is_promoted:d?.isPromoted}),this.safeSetState({boardSavedTo:Object.assign(r,{state:O.J.SUCCESS})},()=>this.handleBoardSaveSuccess(t,e,s,l)),a&&!l&&a(!1)}).catch(e=>{this.unmounted||this.safeSetState({boardSavedTo:null}),u.A.showError(e.message_detail||e.message);let s=this.makeCancelablePromise(Promise.reject(e));this.props.setCompletionPromise(s),a&&a(!1)})})}),j(this,"handleNewBoardAnimationCompletion",()=>{let{pin:e,showRepinAnimation:s}=this.props;e?.entityId&&s(e.entityId)})}getModalTitle(e,s){if(e)if(s)return this.props.i18n._('Create section', 'modal title for create section pane', 'modal title for create section pane');else return this.props.i18n._('Create board', 'Repin title for making a new board', 'Repin title for making a new board');return s?this.props.i18n._('Choose section', 'modal title for choose section', 'modal title for choose section'):this.props.i18n._('Choose board', 'Repin title for choosing a board', 'Repin title for choosing a board')}componentDidUpdate(e){let{boardWithSection:s,showCreate:l,pin:a,urlPinInfo:t,description:o}=this.props,i={};(a!==e.pin||t!==e.urlPinInfo||o!==e.description)&&(i.pinDescription=a?.description||t?.description||o||""),(l!==e.showCreate||s!==e.boardWithSection)&&(i.modalTitle=this.getModalTitle(l,!!s)),Object.keys(i).length>0&&this.safeSetState(i)}componentWillUnmount(){this.unmounted=!0}render(){let{close:e,dismissModal:s,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,setModalTitle:t,updateDescription:o}=this,{boardSavedTo:i,displaySuccessAnimation:r,modalTitle:n,newPin:_}=this.state,{color:c}=this.props;return this.props.children({boardSavedTo:i,color:c,dismissModal:s,displaySuccessAnimation:r,handleAbort:e,handleNewBoardAnimationCompletion:l,handleSaveToBoard:a,modalTitle:n,newPin:_,setModalTitle:t,updateDescription:o})}componentDidMount(){(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")}}function K({pinKey:e,shuffleAssetKey:s,...l}){(0,i.useEffect)(()=>{(0,o.A)("PinSaveRequest","/app/www/save/pin-to-board/PinSaveRequest.tsx")},[]);let{saveToBoard:a}=(0,v.p)(),{logContextEvent:t}=(0,d.o)(),_=(0,y.y)()?.onPinCreate,c=(0,P.A)(),u=(0,n.zy)(),g=(0,h.A)(),b=(0,C.CG)(),m=(0,r.wA)(),{updateHeaderState:z}=(0,S.A)(),T=(0,r.d4)(({advertiser:e})=>g.isAuth&&e&&e.owner_user_id!==g.id?e.id:void 0),{previous:w}=(0,f.qD)(),x=(0,A.Ts)(),E=(0,f.V)(),I=(0,p.A)(M,e),N=(0,p.A)(L,s);return(0,k.jsx)(G,{...l,advertiser_id:T,currentHistoryStack:E,dispatch:m,i18n:c,location:u,logContextEvent:t,mountAfterActionPlacement:x,onPinCreate:_,pin:I,previousHistory:w,saveToBoard:a,showRepinAnimation:e=>z({type:"showRepinAnimation",payload:e}),shuffleAsset:N,toastManagerContext:b,viewerUserId:g.isAuth?g.id:void 0})}},96740(e,s,l){l.d(s,{J:()=>a});let a={LOADING:"loading",SUCCESS:"success"}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/62155-c2f3ace76a10b555.mjs.map