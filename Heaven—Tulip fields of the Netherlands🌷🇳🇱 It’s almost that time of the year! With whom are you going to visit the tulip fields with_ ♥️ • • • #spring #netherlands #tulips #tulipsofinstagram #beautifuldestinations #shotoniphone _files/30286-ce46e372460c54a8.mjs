(self.modernJsonp=self.modernJsonp||[]).push([["30286"],{754423(e,o,t){t.r(o),t.d(o,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardButton_board"}],type:"Board",abstractKey:null};i.hash="0e2c441822700a6145ea7cd142c0425b";let n=i},52919(e,o,t){t.r(o),t.d(o,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DrawerImageGroup_coverPin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"crop",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}],type:"CoverPin",abstractKey:null};i.hash="35b139c2e951baaa6624b30e45f913ce";let n=i},470166(e,o,t){t.r(o),t.d(o,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardButton_board",selections:[{args:null,kind:"FragmentSpread",name:"SendBoardFlyout_board"}],type:"Board",abstractKey:null};i.hash="8d95294efe15498023c69669c6a41e71";let n=i},638025(e,o,t){t.r(o),t.d(o,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"SendBoardFlyout_board",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageCoverUrl",storageKey:null}],type:"Board",abstractKey:null};i.hash="f459445ee8d1ea0db022e490ef5a2e80";let n=i},829111(e,o,t){t.r(o),t.d(o,{default:()=>n});let i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"UnifiedPinRep_parentPin",selections:[{args:null,kind:"FragmentSpread",name:"PinRep_parentPin"}],type:"Pin",abstractKey:null};i.hash="9c0000d5884ff2a1347c1278f1d95042";let n=i},130215(e,o,t){var i;t.r(o),t.d(o,{default:()=>a});let n={argumentDefinitions:[{kind:"RootArgument",name:"isCloseupRelatedModulesFeedQuery"},{defaultValue:!1,kind:"LocalArgument",name:"shouldShowSeoDrawerOption"},{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:i=[{args:null,kind:"FragmentSpread",name:"PinRepInner_board"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{condition:"isCloseupRelatedModulesFeedQuery",kind:"Condition",passingValue:!1,selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:i,storageKey:null}]},{args:[{kind:"Variable",name:"shouldShowSeoDrawerOption",variableName:"shouldShowSeoDrawerOption"},{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};n.hash="51989dcefa62862d9443ed3d243ffdbf";let a=n},360898(e,o,t){t.r(o),t.d(o,{default:()=>O});var i=t(61163),n=t(859471),a=t(106386),l=t(150880),r=t(949356),s=t(514357),d=t(398380),c=t(408189),h=t(616911),u=t(693154),_=t(538329),p=t(81920),m=t(562615);function f({footerText:e,logoSize:o=12}){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalForm","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalForm.tsx")},[]);let t=(0,_.A)();return(0,m.jsxs)(l.so,{direction:"column",flex:"grow",gap:{column:2,row:0},width:"100%",children:[(0,m.jsxs)(l.so,{alignItems:"center",gap:{row:1,column:0},justifyContent:"start",children:[(0,m.jsx)(l.In,{accessibilityLabel:t._('Lock logo', 'experiencePhoneCollectionModal.footerText.lockLogoAccessibilityLabel', 'Accessibility label for lock logo'),color:"subtle",icon:"lock",size:o}),(0,m.jsx)(l.KJ,{size:"100",children:t._('Your phone number won\'t show on your profile', 'experiencePhoneCollectionModal.text.privacy', 'Text body for privacy statement')})]}),(0,h.dz)(e||"","100")]})}function g({imageUrl:e,imageHeight:o,containerWidth:t,containerHeight:a,imageWidth:r,imageAlt:s}){return(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalForm","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalForm.tsx")},[]),(0,m.jsx)(l.az,{height:a||o,overflow:"hidden",width:t||r,children:(0,m.jsx)(l._V,{alt:s,fit:"cover",naturalHeight:o,naturalWidth:r,src:e})})}function b({headerText:e,subtitleText:o,onE164PhoneNumberChange:t,onSendCode:a,onDismiss:f,inlineError:g,setInlineError:b,logger:x,marginTop:y=4,paddingX:P=6,primaryButtonSize:A="md",secondaryButtonSize:v="md"}){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalForm","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalForm.tsx")},[]);let w=(0,_.A)(),z=(0,u.A)(),C=z.isAuth?z:void 0,j=C?z.unverified_phone_region:void 0,S=C?z.unverified_phone_number:void 0,I=C?z.country:void 0,B=S?(0,r.o)(S)?.nationalNumber.toString():"",[E,k]=(0,n.useState)(B||""),{data:T,isLoaded:F,error:M}=(0,c.A)(),R=e=>{let o=T?.find(o=>o.code===e);return o?.phone_code||""},D=(0,n.useMemo)(()=>{if(F&&T&&I){let e=T.find(e=>e.code===I);return e?.code||""}return""},[F,T,I]),[O,N]=(0,n.useState)(void 0),L=O||j||D;(0,n.useEffect)(()=>{M&&(0,p.GV)("experience_phone_collection_modal.country_codes_load_error",{sampleRate:.1,tags:{error_code:M.api_error_code?String(M.api_error_code):void 0,error_message:M.message||"Unknown error"}})},[M]);let H=(e,o)=>R(e).replace(/\D/g,"").length+o.length,K=(e,o)=>{let i=()=>{(0,s.Om)({eventType:18372,component:15580,logger:x})},n=w._('You entered an invalid phone number', 'experiencePhoneCollectionModal.phoneNumber.error', 'Phone number validation error message');if(0===o.length){b(void 0),t(void 0),i();return}let a=(0,s.mb)(o);if(!/^\d+$/.test(a)||H(e,a)>15){b(n),t(void 0),i();return}let l=R(e)+a;b(void 0),t(l)};(0,n.useEffect)(()=>{F&&L&&E&&K(L,E)},[F,L]);let U=!F||!!M,V=!!g||7>H(L,(0,s.mb)(E))||U;return(0,m.jsx)(n.Fragment,{children:(0,m.jsxs)(l.az,{marginTop:y,paddingX:P,children:[(0,m.jsx)(l._Y,{accessibilityLevel:1,size:"600",children:e}),(0,m.jsx)(l.az,{marginBottom:4,marginTop:2,children:(0,h.dz)(o||"","300")}),(0,m.jsx)(d.A,{countryCodeList:T,countryCodeListError:M,disabled:U,errorMessage:M?w._('Error loading country code list', 'experiencePhoneCollectionModal.countryCodeList.error', 'Error message when country code list fails to load'):void 0,label:w._('Country code', 'experiencePhoneCollectionModal.countryCode.label', 'Label for country code selection'),onChange:e=>{g&&b(void 0),N(e),E.length>0?K(e,E):t(void 0)},userCountry:I,value:L}),(0,m.jsx)(l.az,{marginBottom:4,children:(0,m.jsx)(l.A_,{disabled:U,errorMessage:g,id:"phoneNumber",label:w._('Phone number', 'experiencePhoneCollectionModal.phoneNumber.label', 'Label for phone number input'),onChange:({value:e})=>{k(e),K(L,e)},onFocus:()=>(0,s.Om)({eventType:8721,component:15580,element:18095,logger:x}),onKeyDown:({event:e})=>{"Enter"===e.key&&(e.preventDefault(),V||a())},placeholder:w._('Enter your phone number', 'experiencePhoneCollectionModal.phoneNumberPlaceholder', 'Placeholder for phone number input'),size:"lg",type:"tel",value:E})}),(0,m.jsx)(l.az,{marginBottom:1,children:(0,m.jsxs)(l.so,{direction:"column",flex:"grow",gap:{column:2,row:0},width:"100%",children:[(0,m.jsx)(l.$n,{color:"primary",disabled:V,fullWidth:!0,onClick:a,size:A,text:w._('Send code', 'experiencePhoneCollectionModal.button.primary', 'Primary button text to send code')}),(0,m.jsx)(l.$n,{color:"transparent",fullWidth:!0,onClick:()=>{f(),(0,s.Om)({eventType:102,element:13933,component:15580,logger:x})},size:v,text:w._('Not now', 'experiencePhoneCollectionModal.button.secondary', 'Dismiss button text')})]})})]})})}function x(){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalVerificationStep","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalVerificationStep.tsx")},[]);let e=(0,_.A)();return(0,m.jsxs)(l.so,{direction:"column",gap:{column:2,row:0},justifyContent:"between",children:[(0,m.jsx)(l._Y,{size:"600",children:e._('Enter the code', 'experiencePhoneCollectionModal.verificationStep.title', 'Title for verification step modal')}),(0,m.jsx)(l.KJ,{size:"300",children:e._('To confirm and help secure your account, we\'ve sent a code to your phone number.', 'experiencePhoneCollectionModal.verificationStep.subtitle', 'Subtitle for verification step modal that explains code was sent to phone number')})]})}function y({onDismiss:e,onConfirmCode:o,isConfirmDisabled:t,logger:a}){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalVerificationStep","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalVerificationStep.tsx")},[]);let r=(0,_.A)();return(0,m.jsxs)(l.so,{gap:{row:2,column:0},justifyContent:"end",children:[(0,m.jsx)(l.$n,{color:"transparent",onClick:()=>{e(),(0,s.Om)({eventType:102,element:73,component:15581,logger:a})},size:"lg",text:r._('Cancel', 'experiencePhoneCollectionModal.verificationStep.button.secondary', 'Cancel button text for verification step')}),(0,m.jsx)(l.$n,{color:"primary",disabled:t,onClick:o,size:"lg",text:r._('Confirm', 'experiencePhoneCollectionModal.verificationStep.button.primary', 'Confirm button text for verification step')})]})}function P({onCodeChange:e,onResendCode:o,onConfirmCode:t,isConfirmDisabled:a,otpCode:r,inlineError:d,setInlineError:c,logger:h}){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModalVerificationStep","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModalVerificationStep.tsx")},[]);let u=(0,_.A)();return(0,m.jsxs)(l.az,{paddingX:6,paddingY:1,children:[(0,m.jsx)(l.A_,{errorMessage:d,id:"enter-code",onChange:({value:o})=>{d&&c(void 0),e(o||void 0)},onFocus:()=>(0,s.Om)({eventType:8721,component:15581,logger:h}),onKeyDown:({event:e})=>{"Enter"!==e.key||a||(e.preventDefault(),t())},placeholder:u._('Enter code', 'experiencePhoneCollectionModal.verificationStep.placeholder', 'Placeholder text to send code for verification step modal'),size:"lg",type:"text",value:r||""}),(0,m.jsx)(l.az,{marginTop:4,children:(0,m.jsx)(l.KJ,{color:"default",size:"100",children:(0,m.jsx)(l.N_,{href:"",onClick:({event:e})=>{e.preventDefault(),o(),(0,s.Om)({eventType:102,element:16033,component:15581,logger:h})},underline:"always",children:u._('Send a new code', 'experiencePhoneCollectionModal.verificationStep.resendCode', 'Resend code text for verification step modal')})})})]})}var A=t(917855),v=t(586733),w=t(822727),z=t(173095),C=t(257300),j=t(989457),S=t(62963),I=t(657171),B=t(307424),E=t(971289),k=t(168079),T=t(584342);let F=new l.rk(T.d1),M=new l.K5([F]),R=new l.rk(2e3);function D({experience:e,placementId:o}){let[t,i]=(0,n.useState)(void 0),a=(0,_.A)(),[r,d]=(0,n.useState)(!1),c=(0,s.cb)(),[u,T]=(0,n.useState)(!0),[F,D]=(0,n.useState)(void 0),[O,N]=(0,n.useState)(!1),[L,H]=(0,n.useState)(void 0),{logContextEvent:K}=(0,v.o)(),U=(0,E.qJ)(),V=e?.display_data?(0,S.A)(B.A)(e.display_data):{},W=V?.phoneValueProp,J=!!(V.headerText&&V.subtitleText&&V.footerText&&V.headerImage&&V.headerImage["564x"]);if((0,k.A)(()=>{J&&K({event_type:13,view_type:132,component:15580,...W&&{aux_data:{phone_value_prop:W}}})}),!J)return(0,h.Du)(e?.experience_id??0,o??0,"Required display data not present",1),null;let{headerText:G,subtitleText:$,footerText:Y,headerImage:q}=V,X=q["564x"],Q=a._('There was an error sending the verification code', 'experiencePhoneCollectionModal.sendCode.error', 'Error message shown when sending verification code fails'),Z=async({onSuccess:e,phoneValueProp:o,stepName:i})=>{if(!t){(0,p.GV)("experience_phone_collection_modal.e164_phone_number_missing",{sampleRate:.1}),c(Q,"error");return}N(!0);try{let i=await new Promise((e,o)=>{(0,I.x6)(o=>{e(o)},e=>{o(e)},I.ZK)});await (0,C.A)({url:"/v3/verifications/send/",method:"POST",data:{channel:"sms",phone_recipient:t,recaptcha_token:i,...o&&{phone_value_prop:o}}}),c(a._('Code sent', 'experiencePhoneCollectionModal.verificationStep.sendCode.success', 'Success message shown when code is sent'),"success"),e?.()}catch(e){(0,s.hS)({error:e,defaultErrorMessage:Q,setInlineError:H,showToast:c,metricName:"experience_phone_collection_modal.send_code_error",step:i})}finally{N(!1)}},ee=async()=>{(0,s.Om)({eventType:102,element:18451,component:15580,logger:K}),await Z({onSuccess:()=>{H(void 0),d(!0),(0,s.Om)({eventType:13,viewType:132,component:15581,logger:K})},stepName:"collection",phoneValueProp:W})},eo=a._('Phone collection modal image', 'experiencePhoneCollectionModal.image.alt', 'Alt text for phone collection modal image');return u&&(0,m.jsx)(w.Ay,{eligibleTypes:[35],experience:e,placementId:o,children:({complete:e,dismiss:o})=>{let d=()=>{o(),T(!1)},h=async()=>{if((0,s.Om)({eventType:102,element:18454,component:15581,logger:K}),!F)return void c(a._('Please enter a code', 'experiencePhoneCollectionModal.verificationStep.confirmCode.error', 'Error message shown when no code is entered'),"error");N(!0);try{await (0,C.A)({url:"/v3/verifications/check/",method:"POST",data:{code:F,phone_recipient:t}}),c(a._('Phone number confirmed', 'experiencePhoneCollectionModal.verificationStep.confirmCode.success', 'Success message shown when verification code is confirmed'),"success"),(0,s.Om)({eventType:18374,component:15581,logger:K}),T(!1),e()}catch(t){let e=a._('That code didn\'t work. Try again.', 'experiencePhoneCollectionModal.verificationStep.confirmCode.error', 'Error message shown when confirming phone number fails'),o=(0,s.hS)({error:t,defaultErrorMessage:e,setInlineError:H,showToast:c,metricName:"experience_phone_collection_modal.confirm_code_error",step:"verification"});(0,s.Om)({eventType:18386,component:15581,auxData:{invalid_reason:o},logger:K})}finally{N(!1)}},_=!F||6!==F.length;return(0,m.jsxs)(n.Fragment,{children:[U?(0,m.jsx)(l.Wd,{zIndex:M,children:(0,m.jsx)(j.aF,{accessibilityModalLabel:a._('Modal to collect phone number', 'experiencePhoneCollectionModal.modal.accessibilityLabel', 'Accessibility label for phone collection modal'),closeOnOutsideClick:!1,footer:r?(0,m.jsx)(y,{isConfirmDisabled:_,logger:K,onConfirmCode:h,onDismiss:d}):(0,m.jsx)(f,{footerText:Y}),heading:r?(0,m.jsx)(x,{}):void 0,onDismiss:d,size:"sm",children:r?(0,m.jsx)(P,{inlineError:L,isConfirmDisabled:_,logger:K,onCodeChange:D,onConfirmCode:h,onResendCode:()=>Z({phoneValueProp:W,stepName:"verification"}),otpCode:F,setInlineError:H}):(0,m.jsxs)(n.Fragment,{children:[(0,m.jsx)(g,{imageAlt:eo,imageHeight:275,imageUrl:X,imageWidth:540}),(0,m.jsx)(b,{headerText:G,inlineError:L,logger:K,onDismiss:d,onE164PhoneNumberChange:i,onSendCode:ee,setInlineError:H,subtitleText:$})]})})}):(0,m.jsx)(z.A,{accessibilityModalLabel:a._('Modal to collect phone number', 'experiencePhoneCollectionModal.modal.accessibilityLabel', 'Accessibility label for phone collection modal'),footer:(0,m.jsx)(l.az,{padding:4,children:(0,m.jsx)(f,{footerText:Y,logoSize:16})}),header:(0,m.jsx)(g,{containerHeight:235,containerWidth:"100%",imageAlt:eo,imageHeight:235,imageUrl:X,imageWidth:375}),isOpen:u,mobileIsSlideUp:!1,onDismiss:d,size:"auto",children:(0,m.jsx)(b,{headerText:G,inlineError:L,logger:K,onDismiss:d,onE164PhoneNumberChange:i,onSendCode:ee,paddingX:4,primaryButtonSize:"lg",secondaryButtonSize:"lg",setInlineError:H,subtitleText:$})}),O&&(0,m.jsx)(l.Wd,{zIndex:R,children:(0,m.jsx)(A.A,{})})]})}})}function O({experience:e,placementId:o}){(0,n.useEffect)(()=>{(0,i.A)("ExperiencePhoneCollectionModal","/app/common/react/components/experiences/ExperiencePhoneCollectionModal/ExperiencePhoneCollectionModal.tsx")},[]);let t=(0,a.d4)(({experiences:t})=>e||(o?t[o]:void 0));return t?.type!==35?null:(0,m.jsx)(D,{experience:t,placementId:o})}},708261(e,o,t){t.d(o,{A:()=>T});var i=t(61163),n=t(859471),a=t(150880);let l="select_pins",r="board_picker",s="create_board";var d=t(528911),c=t(586733),h=t(79906),u=t(538329),_=t(593936),p=t(106386),m=t(979638),f=t(457315),g=t(567176),b=t(542975),x=t(601185),y=t(430705),P=t(706466),A=t(897983),v=t(400235),w=t(562615);function z({isFirstBoardCreation:e,isResUserFirstBoardCreation:o=!1,isOnSelectStep:t,onClickBackButton:l,onDismiss:r,selectedPinCount:s}){(0,n.useEffect)(()=>{(0,i.A)("BoardlessPinsModalHeading","/app/www/profile/ProfileBoards/BoardlessPins/BoardlessPinsModalHeading.tsx")},[]);let d=(0,u.A)(),c=d._('Organize into a board', 'boardlessPins.modalHeading.organizeHeading', 'Heading for modal to add unorganized Pins to board'),h=s>0?(0,b.vQ)(d.ngettext('{{ pinCount }} selected', '{{ pinCount }} selected', s, 'boardlessPins.modalHeading.PinCountHeading', 'number of Pins selected'),{pinCount:s}):c,_=d._('Create board', 'boardlessPins.modalHeading.createBoardHeading', 'Heading for modal to create new board with unorganized Pins');return(0,w.jsxs)(a.az,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:8,position:"relative",children:[e||t||o?(0,w.jsx)(a.az,{height:40,width:40}):(0,w.jsx)(a.K0,{accessibilityLabel:d._('Go back to previous modal', 'boardlessPins.modalHeading.arrowBackIconButton', 'Accessibility label for back button'),disabled:t,icon:"chevron-left",iconColor:t?"inverse":"default",onClick:l,size:"md"}),(0,w.jsx)(a.az,{maxWidth:486,children:(0,w.jsx)(a._Y,{align:"center",size:"600",children:t?h:_})}),(0,w.jsx)(a.K0,{accessibilityLabel:d._('Cancel changes', 'boardlessPins.modalHeading.cancelIconButton', 'Accessibility label for close modal button'),icon:"close",iconColor:"default",onClick:r,size:"md"})]})}var C=t(514201),j=t(513010),S=t(517750),I=t(504252),B=t(720407);function E({boardlessPinsBoardId:e,currentStep:o,hasBoards:t,isOnSelectStep:d,onDismiss:_,selectedPins:E,updateCurrentStep:k,userId:T,isFirstBoardCreation:F=!1,isResUserFirstBoardCreation:M=!1,showRepinAnimation:R,onComplete:D}){(0,n.useEffect)(()=>{(0,i.A)("BoardlessPinsBoardPicker","/app/www/profile/ProfileBoards/BoardlessPins/BoardlessPinsBoardPicker.tsx")},[]);let O=(0,u.A)(),N=(0,B.A)(),[L,H]=(0,n.useState)(!1),[K,U]=(0,n.useState)(""),[V,W]=(0,n.useState)(""),{checkExperiment:J}=(0,x.A)(),{logContextEvent:G}=(0,c.o)(),$=(0,y.A)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker"}}),Y=(0,p.wA)(),q=(0,m.Zp)(),X=(0,P.CG)(),Q=E[0],Z=E.map(e=>e.image).filter(e=>!!e),ee=(o,t)=>{let i=E.map(e=>e.id);Y((0,S.A)({selectedPinIds:i,source:{boardId:e,sectionId:null},target:{boardId:o,sectionId:t||null}},O,G)),Y((0,j.J6)({feedId:T,feedType:I.A.BOARDLESS_PINS,itemIds:i,itemType:"pin"}))},eo=async()=>{try{let e=await N({boardCreateOptions:{name:V,privacy:L?"secret":"public",aux_data:{source:"organize_pins"}}});if(ee(e.id),_(),F&&J("ap_dweb_first_board_creation",{dangerouslySkipActivation:!0}).group.includes("genie")){X.showToast(({hideToast:o})=>(0,w.jsx)(g.A,{duration:3e3,imageUrl:E[0]?.image?.url??"",onHide:o,text:(0,w.jsx)(a.KJ,{overflow:"normal",size:"200",children:(0,b.$w)({text:O._('Saved to <a id="1">{{ boardName }}</a>', 'BoardlessPinsBoardPicker.SavedToBoardToast.Message', 'Saved to label for better save. boardName: url to saved board'),markers:{boardName:e.name??""},jsxReplacements:{1:({innerHtmlStrings:o})=>(0,w.jsx)(a.N_,{display:"block",href:e.url??"",children:(0,w.jsx)(a.KJ,{lineClamp:1,size:"200",weight:"bold",children:o},"PostSavedPinToastBoardName")})}})}),thumbnail:{icon:(0,w.jsx)(a.In,{accessibilityLabel:O._('Saved to profile thumbnail', 'BoardlessPinsBoardPicker.thumbnail.accessibilityLabel', 'Thumbnail for saved to profile.'),color:"default",icon:"clock-history",size:24})}}));let o=E.map(e=>e.id);R?.(o[0]??""),D?.()}else X.showToast(({hideToast:e})=>(0,w.jsx)(g.A,{onHide:e,text:O._('Board created!', 'BoardlessPinsBoardPicker.boardCreated.toast', 'Confirmation that a board was created')})),D?.(),e.url&&q(e.url,{replace:!0})}catch(o){let e=O._('Uh oh! Something went wrong.', 'BoardlessPinsBoardPicker.boardCreate.submitErrorDefault', 'Default submit error text when board create fails');if("string"==typeof o)e=o;else{let t=(0,f.A)(o,"message");if(t){let i=(0,f.A)(o,"message_detail");e=i?`${t} ${i}`:t}}U(e)}},et=(0,w.jsxs)(a.az,{alignItems:"center",display:"flex",justifyContent:"between",paddingX:4,paddingY:5,position:"relative",children:[(0,w.jsx)(a.K0,{accessibilityLabel:O._('Go back', 'BoardlessPinsBoardPicker.modalHeading.arrowBackIconButton', 'Accessibility label for back button'),disabled:d,icon:"chevron-left",iconColor:d?"inverse":"default",onClick:()=>k(l),size:"md"}),(0,w.jsx)(a._Y,{align:"center",size:"600",children:O._('Move to a board', 'BoardlessPinsBoardPicker.save.modalTitle', 'Title of modal for moving pins to a board')}),(0,w.jsx)(a.K0,{accessibilityLabel:O._('Cancel changes', 'BoardlessPinsBoardPicker.modalHeading.cancelIconButton', 'Accessibility label for close modal button'),icon:"close",iconColor:"default",onClick:()=>_(r),size:"md"})]});return t&&o!==s?(0,w.jsx)(h.Ay,{accessibilityModalLabel:O._('Move to a board', 'BoardlessPinsBoardPicker.chooseExistingBoardsModal.accessibilityLabel', 'Accessibility Label for modal to move unorganized Pins to another board'),heading:et,onDismiss:()=>_(r),size:"md",children:(0,w.jsx)(a.az,{padding:1,children:(0,w.jsx)(v.K$,{boardResource:$,changeBoardModal:!0,onBoardCreate:({title:e=""}={})=>{W(e),k(s)},onItemChosen:e=>{ee(e.boardId,e.sectionId),X.showToast(({hideToast:o})=>(0,w.jsx)(g.A,{onHide:o,text:(0,b.vQ)(O._('Moved to {{boardName}}', 'BoardlessPinsBoardPicker.onItemChosen.toast', 'Toast for successfully moving pin to a different board'),{boardName:e.title}).join("")})),_()},paneHeight:644,paneWidth:720,pinId:Q.id,surface:A.A.ORGANIZE_PINS})})}):(0,w.jsx)(h.Ay,{accessibilityModalLabel:O._('Create board', 'BoardlessPinsBoardPicker.createBoard.accessibilityLabel', 'Accessibility Label for modal to create a board'),footer:(0,w.jsx)(a.so,{justifyContent:"end",children:(0,w.jsx)(a.$n,{color:"primary",disabled:0===V.trim().length,onClick:eo,size:"lg",text:O._('Create', 'BoardlessPinsBoardPicker.boardCreate.createButton', 'Button to create new board to move Pins to')})}),heading:(0,w.jsx)(z,{isOnSelectStep:!1,isResUserFirstBoardCreation:M,onClickBackButton:()=>{k(t?r:l)},onDismiss:()=>_(s),selectedPinCount:E.length}),onDismiss:()=>_(s),size:"md",children:(0,w.jsx)(a.az,{height:644,children:(0,w.jsx)(C.A,{boardThumbs:Z,isSecret:L,name:V,onNameChange:({value:e})=>{e.trim()?U(""):U(O._('Don\'t forget to name your board!', ' - ', ' -- ')),W(e)},onVisibilityChange:({checked:e})=>H(e),submitError:K})})})}var k=t(699613);function T({boardlessPinsNormalized:e,fetchMore:o,hasBoards:t,isFirstBoardCreation:p=!1,isResUserFirstBoardCreation:m=!1,onDismiss:f,userId:g,showRepinAnimation:b,onComplete:x,lastSavedPin:y}){(0,n.useEffect)(()=>{(0,i.A)("BoardlessPinsOrganizeModal","/app/common/react/components/profile/ProfileBoards/BoardlessPins/BoardlessPinsOrganizeModal.tsx")},[]);let P=(0,u.A)(),A=(0,n.useRef)(null),[v,C]=(0,n.useState)(m?s:l),{logContextEvent:j}=(0,c.o)(),S=(0,k.zy)(),I=(0,n.useMemo)(()=>e&&S?e.reduce((e,o)=>{let t=S[o.id];return e.push(t),e},[]):[],[e,S]),B=I[0]?.board?.id??"",[T,F]=(0,n.useState)(()=>p&&I.length?I.reduce((e,o)=>(o&&e.push({id:o.id,image:p?o.images?.["236x"]??null:o.images?.["170x"]??null}),e),[]):m&&y?[y]:[]),M=(e,o)=>{let t,i=[...T];o?(p?j({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!0}}):j({event_type:7301,view_type:631,view_parameter:3906,object_id_str:e.id,aux_data:{selected:!0,pin_id:e.id}}),t=i.concat({id:e.id,image:p?e.images?.["236x"]:e.images?.["170x"]})):(p?j({event_type:101,view_type:740,view_parameter:4166,element:18124,object_id_str:e.id,aux_data:{selected:!1}}):j({event_type:14667,view_type:631,view_parameter:3906,object_id_str:e.id,aux_data:{selected:!1,pin_id:e.id}}),t=i.filter(o=>o.id!==e.id)),F(t)};(0,n.useEffect)(()=>{let e;v===l?e=p?4166:3906:v===r?e=p?4167:3133:v===s&&(e=3992),(v===l||v===r||v===s)&&j({event_type:13,view_type:p?740:631,view_parameter:e})},[v,p,j]);let R=v===l;return(0,w.jsx)(n.Fragment,{children:R?(0,w.jsx)(h.Ay,{accessibilityModalLabel:P._('Organize into a board', 'boardlessPins.organizeModal.accessibilityLabel', 'Accessibility Label for modal to move unorganized Pins to a board'),footer:(0,w.jsx)(a.so,{justifyContent:"end",children:(0,w.jsx)(a.$n,{color:"primary",disabled:0===T.length,onClick:()=>{j({event_type:101,view_type:p?740:631,view_parameter:p?4166:3906,element:p?96:14187}),C(r)},size:"lg",text:P._('Next', 'boardlessPins.organizeModal.nextButton', 'Button to go from selecting Pins step to board creation step')})}),heading:(0,w.jsx)(z,{isFirstBoardCreation:p,isOnSelectStep:R,onClickBackButton:()=>C(l),onDismiss:()=>f(v),selectedPinCount:T.length}),onDismiss:()=>f(v),size:"md",children:(0,w.jsx)(a.az,{ref:A,height:428,children:I&&A&&(0,w.jsx)(_.n,{children:(0,w.jsx)(a.a,{columnWidth:152,gutterWidth:16,items:I,loadItems:o,renderItem:({data:e,itemIdx:o})=>(0,w.jsx)(d.A,{handleTogglePinSelection:M,index:o,isSelected:!!T.filter(o=>o.id===e.id).length,pin:e,surface:"SelectableBoardlessPin",unselectedState:"no-selection"}),scrollContainer:()=>A.current})})})}):(0,w.jsx)(E,{boardlessPinsBoardId:B,currentStep:v,hasBoards:t,isFirstBoardCreation:p,isOnSelectStep:R,isResUserFirstBoardCreation:m,onComplete:x,onDismiss:f,selectedPins:T,showRepinAnimation:b,updateCurrentStep:e=>C(e),userId:g})})}},528911(e,o,t){t.d(o,{A:()=>d});var i=t(61163),n=t(859471),a=t(150880),l=t(937176),r=t(699613),s=t(562615);function d({handleTogglePinSelection:e,index:o,isSelected:t,isDisabled:d,pin:c,surface:h,unselectedState:u="deselected-image-only",disableHover:_}){(0,n.useEffect)(()=>{(0,i.A)("SelectablePin","/app/common/react/components/profile/ProfileBoards/BoardlessPins/SelectablePin.tsx")},[]);let p=(0,r.HR)()(c.id);return(0,s.jsx)(a.Rp,{disabled:d,onTap:()=>{e(c,!t)},rounding:400,children:(0,s.jsx)(l.A,{attributionOption:"hide",blockClickEvents:!0,disableHover:_,parentPinKey:null,pinImageCrop:"none",pinKey:{type:"Legacy",data:p??c},saveButtonOptions:{type:"none"},selectionState:t?"selected-image-only":u,slotIndex:o,surface:h,viewType:3})})}},662449(e,o,t){t.d(o,{V:()=>u,Xv:()=>_,qD:()=>d});var i=t(859471),n=t(979638),a=t(987628),l=t(567365),r=t(562615);let{Provider:s,get:d}=(0,a.A)("HistoryStackContext",{previous:[],current:null,forward:[]}),c=e=>e&&e.pathname?e.pathname+(e.search||""):"";function h(e,o){let t={action:o.action,location:o.location,matchedPath:o.matchedPath};if(o.location===e.current?.location)return e;switch(o.action){case"POP":if(e.forward.length>0&&c(e.forward[0].location)===c(t.location))return{...e,forward:e.forward.slice(1),current:{...e.forward[0],action:o.action},previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath}]:e.previous};return{...e,forward:e.current?[{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath},...e.forward]:e.forward,current:{...e.previous.slice(-1)[0],action:o.action},previous:e.previous.slice(0,-1)};case"PUSH":return{...e,forward:e.forward.length>0?[]:e.forward,current:t,previous:e.current?[...e.previous,{action:e.current.action,location:e.current.location,matchedPath:e.current.matchedPath}]:e.previous};case"REPLACE":return{...e,current:t};default:return e}}function u(){let{current:e,previous:o}=d();return(0,i.useMemo)(()=>e?o.concat(e):o,[e,o])}function _({children:e}){let o=(0,n.wQ)(),t=(0,n.zy)(),a=(0,l.A)(),[d,c]=(0,i.useReducer)(h,{forward:[],current:{action:o,location:t,matchedPath:a},previous:[]}),u=(0,i.useRef)(t),_=(0,i.useRef)(a);return(u.current!==t||_.current!==a)&&(c({action:o,location:t,matchedPath:a}),u.current=t,_.current=a),(0,r.jsx)(s,{value:d,children:e})}},173095(e,o,t){t.d(o,{A:()=>g});var i=t(61163),n=t(859471),a=t(150880),l=t(642883),r=t(201593);let s={borderRadius:"32px 32px 0px 0px",bottom:0,left:0,overflow:"hidden",touchAction:"none",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",zIndex:1,width:"100vw",maxHeight:"100vw",minHeight:"30vh"},d={full:"100vh",default:"50vh",auto:""},c=({size:e,isDarkMode:o})=>(s.height=d[e],s.maxHeight="auto"===e?"90vh":"100vw",s.backgroundColor=o?r.be:"#FFFFFF",s);var h=t(995273),u=t(538329),_=t(911127),p=t(826258),m=t(562615);let f=({content:e,footer:o,header:t})=>{let[i,l]=(0,n.useState)(!1),r=(0,n.useRef)(null),s=(0,n.useCallback)(()=>{let e=r.current;e&&l(e?.clientHeight<e?.scrollHeight&&e.offsetHeight+e.scrollTop<e.scrollHeight)},[]);return(0,n.useEffect)(()=>{s()},[s]),(0,n.useEffect)(()=>(window?.addEventListener("resize",s),()=>{window?.removeEventListener("resize",s)}),[s]),(0,m.jsxs)(n.Fragment,{children:[(0,m.jsxs)(a.az,{ref:r,fit:!0,onScroll:s,overflow:"scroll",padding:0,children:[t,(0,m.jsx)(a.az,{flex:"grow",overflow:"auto",children:e})]}),!!o&&(0,m.jsx)(a.az,{dangerouslySetInlineStyle:i?{__style:{boxShadow:"var(--sema-space-0) var(--sema-space-negative-50) var(--sema-space-200) var(--sema-space-0) rgb(0 0 0 / 0.12)"}}:void 0,fit:!0,position:"relative",children:o})]})};function g({accessibilityModalLabel:e,allowClickAndDrag:o,allowBackgroundScroll:t=!1,children:s,closeOnOutsideClick:g=!0,footer:b,header:x,isOpen:y,mobileIsSlideUp:P,onDismiss:A,zIndex:v,size:w="auto"}){(0,n.useEffect)(()=>{(0,i.A)("SheetMobileWithMediaHeader","/app/packages/experiences/gestalt/SheetMobile/SheetMobileWithMediaHeader.tsx")},[]);let z=(0,u.A)(),C=(0,n.useRef)(null),{setAppFocusState:j}=(0,p.Y)(),[S,I]=(0,n.useState)(!1),{isDarkMode:B}=(0,r.D2)();if((0,n.useEffect)(()=>(y?j(!1):j(!0),()=>{y&&j(!0)}),[j,y]),(0,n.useEffect)(()=>(C.current=(0,l.A)(()=>{C.current&&I(!0)}),()=>{"u">typeof window&&Object.prototype.hasOwnProperty.call(window,"cancelAnimationFrame")&&C.current&&(window.cancelAnimationFrame(C.current),C.current=null)}),[]),(0,n.useEffect)(()=>{let e=y&&!t;return e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="hidden",e.touchAction="none"}})(),()=>{e&&(()=>{if(document.body){let{body:{style:e}}=document;e.overflow="visible",e.touchAction="auto"}})()}},[y,t]),!y)return null;let E=(({isDarkMode:e,size:o})=>{let t=e?r.be:"#FFFFFF";return{__style:{...c({size:o,isDarkMode:e}),backgroundColor:t,transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out"}}})({isDarkMode:B,size:w});E.__style.transform=(()=>{if(P||!(()=>{if("u"<typeof window)return!1;let e=Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth),o=Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight);return e<=380||o<=760})())return"";let e=Math.min(1,(Math.max(window.visualViewport?.width||0,window.innerWidth,document.documentElement.clientWidth)-12)/380,(Math.max(window.visualViewport?.height||0,window.innerHeight,document.documentElement.clientHeight)-12)/600);return e=Math.max(.8,e),` scale(${e})`})();let k=(({size:e,isShowing:o,isDarkMode:t})=>{let i=c({size:e,isDarkMode:t});return i.transition="all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",i.transform=o?"translateY(0)":`translateY(${d[e]||"100vh"})`,{__style:i}})({size:w,isShowing:S,isDarkMode:B});return(0,m.jsx)(_.A,{allowClickAndDrag:o,children:(0,m.jsx)(a.Wd,{children:(0,m.jsxs)(a.az,{"aria-label":e,display:"inlineBlock",height:"100%",position:"relative",role:"dialog",zIndex:v||h.QN,children:[(0,m.jsx)(a.Rp,{accessibilityLabel:z._('Mobile Sheet Mask', 'mweb.sheet_mobile.mask', 'The accessibility label for the mask of mobile sheet'),onTap:()=>{g&&A()},tapStyle:"none",children:(0,m.jsx)(a.az,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, .5)",touchAction:"none",transitionProperty:"opacity",transitionTimingFunction:"ease-out"}},height:"100%",left:!0,position:"fixed",top:!0,width:"100%",zIndex:new a.rk(1)})}),(0,m.jsx)(a.az,{color:"default",dangerouslySetInlineStyle:P?k:E,position:"fixed",children:(0,m.jsx)(a.az,{direction:"column",display:"flex",justifyContent:"between",maxHeight:k.__style?.maxHeight||"100vh",position:"relative",width:"100%",children:(0,m.jsx)(f,{content:s,footer:b,header:x})})})]})})})}},961403(e,o,t){t.d(o,{A:()=>a,d:()=>i});let{Provider:i,get:n}=(0,t(987628).A)("Header"),a=n},937176(e,o,t){t.d(o,{A:()=>f});var i,n,a=t(61163),l=t(859471);t(825193);var r=t(668014),s=t(104088),d=t(535273),c=t(75092),h=t(189851),u=t(699613),_=t(562615);let p=(void 0!==i||(i=t(130215)).hash&&"51989dcefa62862d9443ed3d243ffdbf"!==i.hash&&console.error("The definition of 'UnifiedPinRep_pin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),m=(void 0!==n||(n=t(829111)).hash&&"9c0000d5884ff2a1347c1278f1d95042"!==n.hash&&console.error("The definition of 'UnifiedPinRep_parentPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n);function f({pinKey:e,parentPinKey:o,...t}){var i,n,f;(0,l.useEffect)(()=>{(0,a.A)("UnifiedPinRep","/app/www/PinRep/UnifiedPinRep.tsx")},[]);let g=(0,d.A)(p,e),b=(0,d.A)(m,o),x=g&&"GraphQL"===(0,s.z)(g),y=(0,u.HR)()(g?.entityId||""),P=(0,h.oW)();return g&&(0,_.jsx)(r.A,{name:"DefaultPinRep",type:"critical",children:(0,_.jsx)(l.Suspense,{children:(0,_.jsx)(c.A,{...t,boardKey:(i=!!x,n=g?.pinnedToBoard||g?.board||null,f=P(y?.pinned_to_board?.id||y?.board?.id||""),i?n??null:f?{type:"Legacy",data:f}:null),parentPinKey:b,pinKey:g})})})}},653956(e,o,t){t.d(o,{A:()=>v});var i,n,a=t(61163),l=t(859471);t(669897);var r=t(150880),s=t(535273),d=t(538329),c=t(921591),h=t(601185),u=t(844255),_=t(971289),p=t(459951),m=t(223733),f=t(562615);function g({backgroundColor:e="darkGray",iconColor:o="inverse",iconSize:t,privacy:i,size:n=20}){(0,l.useEffect)(()=>{(0,a.A)("PrivacyIcon","/app/www/board/duplo/PrivacyIcon.tsx")},[]);let s=(0,d.A)();return(0,f.jsx)(r.az,{alignItems:"center",color:e,direction:"column",display:"flex",height:n,justifyContent:"center",rounding:"circle",width:n,children:(0,f.jsx)(r.In,{accessibilityLabel:s._('Secret board icon', 'Icon indicating that a board is secret', 'Icon indicating that a board is secret'),color:o,icon:"secret"===i?"lock":"shield",size:t??n/2})})}var b=t(831707),x=t(261682);let y=(void 0!==i||(i=t(754423)).hash&&"0e2c441822700a6145ea7cd142c0425b"!==i.hash&&console.error("The definition of 'DrawerImageGroup_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i),P=(void 0!==n||(n=t(52919)).hash&&"35b139c2e951baaa6624b30e45f913ce"!==n.hash&&console.error("The definition of 'DrawerImageGroup_coverPin' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),n),A="100%";function v(e){(0,l.useEffect)(()=>{(0,a.A)("DrawerImageGroup","/app/www/board/DrawerImageGroup.tsx")},[]);let o=(0,d.A)(),{boardKey:t,canEdit:i,containerBackgroundColor:n="white",coverPhoto:v,coverPinKey:w,fullSize:z,hideSecretBoardIcon:C,images:j,isActive:S,isHomePageBoards:I,isProtected:B,isSecret:E,layout:k,onEditClick:T,renderAsImage:F,showSensitivityScreen:M}=e,R=(0,_.qJ)(),{isRTL:D,isAuthenticated:O}=(0,u._8)(),N=(0,s.A)(y,t),L=(0,s.A)(P,w),H=(0,l.useRef)(null),K=R&&O,{checkExperiment:U}=(0,h.A)(),[V,W]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(S&&K&&N&&!E&&!V){let e=U("ce_dweb_board_preview_share_button").anyEnabled,o=window.setTimeout(()=>{W(e)},0);return()=>clearTimeout(o)}return()=>{}},[S,K,N,E,V,U]);let J=(0,l.useRef)(void 0);(0,l.useEffect)(()=>{S?J.current&&(clearTimeout(J.current),J.current=void 0):J.current||(J.current=window.setTimeout(()=>{J.current=void 0,S||W(!1)},200))},[S]),(0,l.useEffect)(()=>()=>{J.current&&clearTimeout(J.current)},[]);let G=j[0],$=!v&&j[0]?.name||o._('Cover image', 'DrawerImageGroup', 'Alt text for the main image of a board'),Y=[,,].fill(0),q=new r.rk(1),X=G?.url?(0,f.jsx)(r._V,{alt:$,color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:G.url}):(0,f.jsx)(r.az,{color:"secondary",height:"100%",width:"100%"}),Q=M?{filter:"blur(20px)"}:{};return(0,f.jsxs)(r.n1,{height:z?"100%":void 0,rounding:400,width:"100%",children:[(0,f.jsxs)(r.so,{alignItems:"stretch",direction:"row",height:"100%",justifyContent:"start",children:[(0,f.jsx)(r.VP,{span:8,children:(0,f.jsx)(r.az,{dangerouslySetInlineStyle:{__style:Q},height:z?"100%":void 0,position:"relative",children:(0,f.jsx)(r.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:A}},overflow:"hidden",width:"100%",children:(0,f.jsxs)(r.az,{ref:H,bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:I?"#FFDFE9":n,borderStyle:"solid",borderWidth:"1px 0 1px 1px",borderRadius:"16px 0 0 16px"}},"data-test-id":"drawer-image-group-first-image-container",left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:[(B||E)&&!C&&(0,f.jsx)(r.az,{left:!D,margin:2,position:"absolute",right:D,top:!0,zIndex:q,children:(0,f.jsx)(g,{backgroundColor:"default",iconColor:"default",privacy:E?"secret":"protected",size:K?32:24})}),v?.url?(0,f.jsx)(r.n1,{height:"100%",wash:!0,width:"100%",children:(0,f.jsx)(m.A,{customCover:v.isCustom,height:"square"===k?157:213,imgPos:L?function(e){let{crop:o,size:t}=e||{};if(Array.isArray(o)&&Array.isArray(t))return{x:o[0]||0,y:o[1]||0,width:t[0]||0,height:t[1]||0}}(L):v.position||{width:0,height:0,x:0,y:0},imgUrl:L?.imageUrl??(v.url||""),renderAsImage:F,width:Math.floor(("square"===k?236:320)/3*2)})}):X]})})})}),(0,f.jsx)(r.VP,{span:4,children:(0,f.jsxs)(r.az,{dangerouslySetInlineStyle:{__style:Q},height:"100%",children:[(i||V)&&(0,f.jsxs)(r.az,{bottom:!0,display:V?"flex":void 0,left:D,margin:2,opacity:100*!!S,position:"absolute",right:!D,zIndex:q,children:[V&&(0,f.jsx)(r.Rp,{onTap:({event:e})=>{e.preventDefault(),e.stopPropagation()},children:(0,f.jsx)(r.az,{marginEnd:1,children:(0,f.jsx)(x.A,{boardKey:N,handleCreatePincode:()=>{},iconColor:"default",size:"sm"})})}),i&&(0,f.jsx)(r.Rp,{onTap:({event:e})=>T?.(e),children:(0,f.jsx)(r.K0,{accessibilityLabel:o._('Edit', 'DrawerImageGroup.edit', 'Icon indicating that a board is editable'),bgColor:"default",icon:"pencil",iconColor:"default",size:"sm",tabIndex:-1})})]}),Y.map((e,o)=>{let t=v?j[o]:j[o+1];return(0,f.jsx)(r.az,{height:z?"50%":void 0,position:"relative",children:(0,f.jsx)(r.az,{color:"secondary",dangerouslySetInlineStyle:{__style:{paddingBottom:A}},overflow:"hidden",width:"100%",children:(0,f.jsx)(r.az,{bottom:!0,dangerouslySetInlineStyle:{__style:{borderColor:I?"#FFDFE9":n,borderStyle:"solid",borderWidth:0===o?1:"0 1px 1px 1px",borderRadius:0===o?"0 16px 0 0":"0 0 16px 0"}},left:!0,overflow:"hidden",position:"absolute",right:!0,top:!0,children:t?.url?(0,f.jsx)(r.n1,{height:"100%",wash:!0,width:"100%",children:(0,f.jsx)(r._V,{alt:"",color:"#efefef",fit:"cover",naturalHeight:133,naturalWidth:133,src:t.url})}):(0,f.jsx)(r.az,{color:"secondary",height:"100%",width:"100%"})})})},o)})]})}),M&&(0,f.jsx)(r.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,f.jsx)(r._Y,{align:"center",color:"light",size:"400",children:o._('This board may contain sensitive content', 'drawerImageGroup.sensitivityScreen.heading', 'Warning text for a board that may have sensitive content')})})]}),(0,f.jsx)(p.A,{visibility:S?"visible":"none",children:(0,f.jsx)(b.A,{additionalStyles:{backgroundColor:c.E.LEGO_WASH}})})]})}},219162(e,o,t){t.d(o,{A:()=>s});var i=t(61163),n=t(859471),a=t(150880),l=t(538329),r=t(562615);function s(){(0,n.useEffect)(()=>{(0,i.A)("SecretBoardIcon","/app/www/board/SecretBoardIcon.tsx")},[]);let e=(0,l.A)();return(0,r.jsx)(a.In,{accessibilityLabel:e._('Secret board', 'Accessibility label for icon indicating a secret board', 'Accessibility label for icon indicating a secret board'),color:"default",icon:"lock",inline:!0})}},593936(e,o,t){t.d(o,{d:()=>s,n:()=>d});var i=t(859471),n=t(987628),a=t(601185),l=t(562615);let{Provider:r,get:s}=(0,n.A)("HomeFeedTuner");function d({children:e}){let[o,t]=(0,i.useState)(!1),[n,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),{checkExperiment:h}=(0,a.A)(),u=(0,i.useMemo)(()=>{let{group:e}=h("mweb_ap_res_user_in_grid_feedback_fast_follow",{dangerouslySkipActivation:!0});return{isInExperiment:e.includes("enabled"),showFeedCopy:e.includes("feed"),showFancyButton:e.includes("fancy"),showSearchButtonOnActivityFeed:e.includes("search")}},[h]),_=(0,i.useCallback)(()=>{u.isInExperiment&&t(!0)},[u.isInExperiment]),p=(0,i.useCallback)(()=>{t(!1)},[]),m=(0,i.useCallback)(e=>{u.isInExperiment&&e?s(!0):s(!1)},[u.isInExperiment]),f=(0,i.useCallback)(()=>{c(!0)},[]),g=(0,i.useCallback)(()=>{c(!1)},[]),b=(0,i.useMemo)(()=>({shouldRefreshHomefeed:o,markForRefresh:_,clearRefreshFlag:p,cameFromRefineButton:n,markCameFromRefineButton:m,cameFromRefineRecommendationsLink:d,markCameFromRefineRecommendationsLink:f,clearCameFromRefineRecommendationsLink:g,showFeedCopy:u.showFeedCopy,showFancyButton:u.showFancyButton,showSearchButtonOnActivityFeed:u.showSearchButtonOnActivityFeed}),[o,n,d,_,p,m,f,g,u.showFeedCopy,u.showFancyButton,u.showSearchButtonOnActivityFeed]);return(0,l.jsx)(r,{value:b,children:e})}},543128(e,o,t){t.d(o,{A:()=>m});var i=t(61163),n=t(859471),a=t(150880),l=t(348681),r=t(538329),s=t(844255),d=t(219162),c=t(223733),h=t(562615);function u({cover:e,height:o,image:t,width:l}){return((0,n.useEffect)(()=>{(0,i.A)("BoardCollageCoverImage","/app/www/profile/ProfileBoardCard/BoardCollageCoverImage.tsx")},[]),e)?(0,h.jsx)(c.A,{customCover:e.isCustom,height:o,imgPos:e.position||{width:0,height:0,x:0,y:0},imgUrl:e.url??"",width:l}):t&&t.url?(0,h.jsx)(a.n1,{height:o,wash:!0,width:l,children:(0,h.jsx)(a._V,{alt:"Board collage cover image",color:"#EFEFEF",fit:"cover",naturalHeight:t.height??1,naturalWidth:t.width??1,src:t.url})}):(0,h.jsx)(a.az,{color:"secondary",height:o,width:l})}function _({image:e,width:o,height:t}){return(0,n.useEffect)(()=>{(0,i.A)("BoardCollageImage","/app/www/profile/ProfileBoardCard/BoardCollageImage.tsx")},[]),e&&e.url?(0,h.jsx)(a.n1,{height:t,wash:!0,width:o,children:(0,h.jsx)(a._V,{alt:"Board collage image",color:"#EFEFEF",fit:"cover",naturalHeight:e.height||1,naturalWidth:e.width||1,src:e.url})}):(0,h.jsx)(a.az,{color:"secondary",height:t,width:o})}var p=t(65646);function m({boardThumbs:e=[],cover:o,editButton:t,isActive:c,isSecret:m,layout:f,sensitivityScreenAuxData:g,showSensitivityScreen:b=!1}){(0,n.useEffect)(()=>{(0,i.A)("BoardCollage","/app/www/profile/ProfileBoardCard/BoardCollage.tsx")},[]);let x=(0,r.A)();(0,l.r)(b?{component:13861,view_type:215,aux_data:g}:null);let{isRTL:y}=(0,s._8)(),{height:P,width:A}=(0,p.P)(f),v=Math.floor(P/2),w=Math.floor(A/3),z=o?void 0:e[0],C=e.slice(+!o);return(0,h.jsxs)(a.n1,{height:P,rounding:400,wash:c,width:A,children:[(0,h.jsx)(a.az,{"aria-label":"Board",color:"default",dangerouslySetInlineStyle:{__style:b?{filter:"blur(20px)"}:{}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:(0,h.jsxs)(a.az,{"aria-hidden":"true",dangerouslySetInlineStyle:{__style:{gap:"1px"}},display:"flex",height:"100%",justifyContent:"between",width:"100%",children:[(0,h.jsx)(u,{cover:o,height:P,image:z,width:Math.floor(A/3*2)}),(0,h.jsxs)(a.so,{alignItems:"stretch",direction:"column",flex:"none",height:"100%",justifyContent:"between",children:[(0,h.jsx)(_,{height:v,image:C[0],width:w}),(0,h.jsx)(_,{height:v,image:C[1],width:w})]})]})}),m&&(0,h.jsx)(a.az,{alignItems:"center",color:"default",display:"flex",height:32,justifyContent:"center",left:!y,marginStart:2,marginTop:2,position:"absolute",right:y,rounding:"circle",top:!0,width:32,children:(0,h.jsx)(d.A,{})}),c&&t&&(0,h.jsx)(a.az,{alignItems:"center",bottom:!0,color:"default",display:"flex",height:32,justifyContent:"center",left:y,marginBottom:2,marginEnd:2,position:"absolute",right:!y,rounding:"circle",width:32,children:t}),b&&(0,h.jsx)(a.az,{alignItems:"center",dangerouslySetInlineStyle:{__style:{background:"rgba(0,0,0,0.5)"}},display:"flex",height:"100%",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,h.jsx)(a._Y,{align:"center",color:"light",size:"400",children:x._('This board may contain sensitive content', 'profileBoardCard.boardCollage.heading', 'Warning text on board that may have sensitive content')})})]})}},65646(e,o,t){t.d(o,{P:()=>n,Q:()=>a});let i={square:{width:236,height:157},wide:{width:320,height:213}};function n(e){return i["square"===e?"square":"wide"]}function a(e){return n(e).width+16}},514201(e,o,t){t.d(o,{A:()=>d});var i=t(61163),n=t(859471),a=t(150880),l=t(538329),r=t(543128),s=t(562615);function d({boardThumbs:e,isChangeBoardModal:o,isSecret:t,name:d,onNameChange:c,onVisibilityChange:h,submitError:u}){(0,n.useEffect)(()=>{(0,i.A)("CreateBoard","/app/www/profile/ProfileBoards/BoardlessPins/CreateBoard.tsx")},[]);let _=(0,l.A)();return(0,s.jsx)(a.az,{paddingX:8,children:(0,s.jsxs)(a.so,{direction:"column",gap:{row:0,column:4},children:[e&&!o&&(0,s.jsx)(r.A,{boardThumbs:e,editButton:null,isActive:!1,isSecret:!1,layout:"square"}),(0,s.jsxs)(a.so,{direction:"column",gap:{row:0,column:2},children:[(0,s.jsx)(a.KJ,{size:"100",children:_._('Name', 'boardlessPins.createBoard.boardNameText', 'Title of text field where user inputs name of board')}),(0,s.jsx)(a.A_,{id:"boardName",name:"boardName",onChange:c,placeholder:_._('Add a title, like \u201CDIY\u201D or \u201CRecipes\u201D', 'boardlessPins.createBoard.boardNameTextPlaceholder', 'Placeholder of text field where user inputs name of board'),size:"lg",value:d})]}),(0,s.jsxs)(a.so,{direction:"column",gap:{row:0,column:2},children:[(0,s.jsx)(a.KJ,{size:"100",children:_._('Visibility', 'boardlessPins.createBoard.visibilityTitle', 'Title of visibility checkbox')}),(0,s.jsxs)(a.so,{gap:{row:4,column:0},children:[(0,s.jsx)(a.Sc,{checked:t,id:"boardVisibility",name:"boardVisibility",onChange:h}),(0,s.jsxs)(a.so,{direction:"column",gap:{row:0,column:1},children:[(0,s.jsx)(a.KJ,{children:_._('Keep this board secret', 'boardlessPins.createBoard.visibilityCheckbox', 'Caption for board settings checkbox to set visibility')}),(0,s.jsx)(a.KJ,{color:"subtle",children:_._('So only you and collaborators can see it.', 'boardlessPins.createBoard.visibilityCheckboxInfo', 'Description of secret setting on board')})]})]})]}),u&&(0,s.jsx)(a.KJ,{color:"error",children:u})]})})}},936751(e,o,t){t.d(o,{A:()=>n});var i=t(74806);function n(e,o){return t=>t((0,i.Jt)("BoardSectionResource",{options:{field_set_key:o||"board_page",section_id:e}}))}},671931(e,o,t){t.d(o,{A:()=>n});var i=t(74806);function n(e,o,t){return(0,i.Jt)("BoardResource",{options:{board_id:e,field_set_key:o,...t?{orbac_subject_id:t}:{}}})}},517750(e,o,t){t.d(o,{A:()=>p,B:()=>_});var i=t(427471),n=t(671931),a=t(936751),l=t(513010),r=t(819515),s=t(504252),d=t(900303);let c=e=>o=>{d.A.showError(function(e,o){switch(e.api_error_code){case 2171:case 2172:case 2173:return o._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(o,e))},h=e=>(0,l.eO)(e.sectionId?s.A.BOARD_SECTION_PINS:s.A.BOARDFEED,e.sectionId||e.boardId);function u(e,o){let{source:t,target:i}=e;i.boardId!==t.boardId?(o((0,n.A)(t.boardId,"pin_count")),o((0,n.A)(i.boardId,"pin_count"))):t.sectionId&&i.sectionId||o((0,n.A)(i.boardId,"pin_count")),t.sectionId&&o((0,a.A)(t.sectionId)),i.sectionId&&o((0,a.A)(i.sectionId))}function _(e){return o=>{let{selectedPinIds:t,source:i,target:n}=e;o((0,l.J6)({feedId:i.sectionId||i.boardId,feedType:i.sectionId?s.A.BOARD_SECTION_PINS:s.A.BOARDFEED,itemIds:t,itemType:"pin"})),o((0,l.ZT)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?s.A.BOARD_SECTION_PINS:s.A.BOARDFEED,itemIds:t,itemType:"pin"})),t.forEach(e=>{o((0,r.PD)({pinId:e,boardId:n.boardId,sectionId:n.sectionId||void 0,title:n.name||""}))}),u(e,o)}}function p(e,o,t){return n=>{let{selectedPinIds:a,target:d}=e;return a.forEach(e=>{n((0,r.PD)({pinId:e,boardId:d.boardId,sectionId:d.sectionId||void 0,title:d.name||""}))}),(function(e,o,t,n){let{inverseSelection:a,selectedPinIds:r,source:d,target:u,orbacSubjectId:_}=e;if(d.boardId===u.boardId&&(d.sectionId||null)===(u.sectionId||null))return Promise.reject();if(a){let e={board_id:d.boardId,new_board_id:u.boardId,old_section_id:d.sectionId||void 0,new_section_id:u.sectionId||void 0,pin_ids:r,orbac_subject_id:_};return i.A.create("BulkEditSelectAllResource",e).callUpdate({showError:!1}).then(()=>Promise.all([o(h(d)),o(h(u))])).catch(c(t))}{let e=(e,t)=>{o((0,l.J6)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?s.A.BOARD_SECTION_PINS:s.A.BOARDFEED,itemIds:r,itemType:"pin"})),o((0,l.ZT)({feedId:t.sectionId||t.boardId,feedType:t.sectionId?s.A.BOARD_SECTION_PINS:s.A.BOARDFEED,itemIds:r,itemType:"pin"}))};if(e(d,u),u.boardId===d.boardId)if(u.sectionId){let o={section_id:u.sectionId,pins:r,orbac_subject_id:_};return i.A.create("BoardSectionEditResource",o).callUpdate({showError:!1}).then(e=>(n?.({event_type:7101,object_id_str:u.sectionId}),e)).catch(o=>{e(u,d),c(t)(o)})}else{let o={section_id:d.sectionId,pins:r,orbac_subject_id:_};return i.A.create("BoardSectionPinsResource",o).callDelete({showError:!1}).catch(o=>{e(u,d),c(t)(o)})}{let o={board_id:u.boardId,section_id:u.sectionId||void 0,pin_ids:r,orbac_subject_id:_};return i.A.create("BulkEditResource",o).callUpdate({showError:!1}).catch(o=>{e(u,d),c(t)(o)})}}})(e,n,o,t).then(()=>u(e,n))}}},819515(e,o,t){function i(e){return{type:"PIN_BETTER_SAVE",payload:e}}function n(e){return{type:"PIN_BETTER_SAVE_CUTOUT",payload:e}}function a(e){return{type:"PIN_BETTER_UNSAVE",payload:e}}function l(e){return{type:"PIN_BETTER_UNSAVE_CUTOUT",payload:e}}function r(e){return{type:"PIN_BETTER_SELECT_BOARD_OR_SECTION",payload:e}}function s(e){return{type:"PIN_BETTER_SELECT_BOARD_CUTOUT",payload:e}}function d(e){return{type:"POST_REPIN_MORE_IDEAS_UPSELL_SHOWN",payload:{boardId:e}}}t.d(o,{PD:()=>r,UN:()=>i,aC:()=>d,dD:()=>s,jI:()=>a,ne:()=>l,uW:()=>n})},520884(e,o,t){t.d(o,{A:()=>p});var i,n=t(61163),a=t(859471);t(825193);var l=t(150880),r=t(948641),s=t(535273),d=t(538329),c=t(832773),h=t(845754),u=t(562615);let _=(void 0!==i||(i=t(638025)).hash&&"f459445ee8d1ea0db022e490ef5a2e80"!==i.hash&&console.error("The definition of 'SendBoardFlyout_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function p({boardKey:e,bgColor:o="default",children:t,iconColor:i="subtle",onCreatePincode:p,onOpen:m,sendBoardButtonRef:f,showTooltip:g,size:b="lg"}){(0,a.useEffect)(()=>{(0,n.A)("SendBoardFlyout","/app/www/save/board/BoardInfoBar/SendBoardFlyout.tsx")},[]);let[x,y]=(0,a.useState)(!1),[P,A]=(0,a.useState)(null),v=(0,d.A)(),w=(0,r.A)(),z=(0,s.A)(_,e),C={description:z?.description,id:z?.entityId??"",imageUrl:z?.imageCoverUrl,name:z?.name??void 0,type:"board",url:z?.url??void 0},j=e=>{if(w){e&&e.preventDefault(),w();return}x||m(),y(e=>!e)},S=t&&t({active:x,onClick:()=>j()})||(0,u.jsx)(l.K0,{ref:f,accessibilityLabel:v._('Send Board', 'Accessible label for button to send board', 'Accessible label for button to send board'),bgColor:o,dataTestId:"send-board-button-icon",icon:"share",iconColor:i,onClick:({event:e})=>j(e),selected:x,size:b,tooltip:g?{text:v._('Share board', 'sendBoardFlyout.button.tooltip', 'Tooltip for button to share board')}:void 0});return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(l.az,{ref:A,children:S}),x&&(0,u.jsx)(l.Wd,{zIndex:h.u$,children:(0,u.jsx)(l.AM,{anchor:P,idealDirection:"down",onDismiss:()=>j(),positionRelativeToAnchor:!1,size:"flexible",children:(0,u.jsx)(c.A,{component:13216,onCreatePincodeClick:p?()=>{j(),p()}:void 0,onHide:()=>j(),sendShareSurface:5,sendType:"board",sharedObject:C,viewType:5})})})]})}},261682(e,o,t){t.d(o,{A:()=>g});var i,n=t(61163),a=t(859471);t(669897);var l=t(150880),r=t(586733),s=t(948641),d=t(296221),c=t(535273),h=t(538329),u=t(844255),_=t(520884),p=t(564533),m=t(562615);let f=(void 0!==i||(i=t(470166)).hash&&"8d95294efe15498023c69669c6a41e71"!==i.hash&&console.error("The definition of 'SendBoardButton_board' appears to have changed. Run `relay-compiler` to update the generated files to receive the expected data."),i);function g({boardKey:e,color:o,handleCreatePincode:t,iconColor:i,hasBoardToolStyles:g,hasShadow:b,showTooltip:x,size:y="lg"}){(0,a.useEffect)(()=>{(0,n.A)("SendBoardButton","/app/www/save/board/Headers/BoardHeader/SendBoardButton.tsx")},[]);let{logContextEvent:P}=(0,r.o)(),A=(0,h.A)(),v=(0,s.A)(),{userAgent:{platform:w}}=(0,u._8)(),z="android"===w,C=(0,a.useRef)(null),j=(0,c.A)(f,e),[S,I]=(0,a.useState)(!1),B=S?void 0:o,E=S?{__style:{backgroundColor:"#e2e2e2"}}:void 0;return(0,m.jsxs)(a.Fragment,{children:[(0,m.jsx)(_.A,{boardKey:j,iconColor:i,onCreatePincode:t,onOpen:()=>{v?v():(0,p.A)(P)},sendBoardButtonRef:C,showTooltip:x,size:y,children:g?({active:e,onClick:o})=>(0,m.jsx)(l.Rp,{dataTestId:"share-board-button",onTap:o,rounding:500,children:(0,m.jsxs)(l.az,{alignItems:"center",color:e?"selected":B,dangerouslySetInlineStyle:E,display:"flex",elevation:b?"shadowFloating":void 0,height:64,justifyContent:"center",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),paddingX:4,rounding:500,children:[(0,m.jsx)(l.az,{marginEnd:2,children:(0,m.jsx)(l.In,{accessibilityLabel:A._('Share', 'Board.ShareButton', 'Accessible label for button to share a board'),color:e?"light":"default",icon:z?"share-android":"share",size:20})}),(0,m.jsx)(l.Wu,{color:e?"inverse":"default",children:A._('Share', 'Board.ShareButton', 'Label for button to share a board')})]})}):void 0}),(0,m.jsx)(d.X$,{anchors:{3018:C},idealDirection:"down",onAnchorTouch:"complete",placementId:18,scrollToDismiss:!0})]})}},564533(e,o,t){t.d(o,{A:()=>i});function i(e){e({event_type:101,element:10778,component:13216,view_type:5,view_parameter:3069})}},567365(e,o,t){t.d(o,{A:()=>n});var i=t(979638);function n(){let e=(0,i.g)(),o=(0,i.zy)(),t=Object.entries(e).reduce((e,[o,t])=>(t&&(e[t]=o),e),{});return o.pathname.split("/").map(e=>t[e]?`:${t[e]}`:e).join("/")}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/30286-ce46e372460c54a8.mjs.map